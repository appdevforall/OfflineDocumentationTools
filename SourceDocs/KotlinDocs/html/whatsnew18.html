<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-04-18T20:47:09.693067654"><title>What's new in Kotlin 1.8.0 | Kotlin</title><script type="application/json" id="virtual-toc-data">[{"id":"ide-support","level":0,"title":"IDE support","anchor":"#ide-support"},{"id":"kotlin-jvm","level":0,"title":"Kotlin/JVM","anchor":"#kotlin-jvm"},{"id":"ability-to-not-generate-type-use-and-type-parameter-annotation-targets","level":1,"title":"Ability to not generate TYPE_USE and TYPE_PARAMETER annotation targets","anchor":"#ability-to-not-generate-type-use-and-type-parameter-annotation-targets"},{"id":"a-new-compiler-option-for-disabling-optimizations","level":1,"title":"A new compiler option for disabling optimizations","anchor":"#a-new-compiler-option-for-disabling-optimizations"},{"id":"removal-of-the-old-backend","level":1,"title":"Removal of the old backend","anchor":"#removal-of-the-old-backend"},{"id":"support-for-lombok-s-builder-annotation","level":1,"title":"Support for Lombok\u0027s @Builder annotation","anchor":"#support-for-lombok-s-builder-annotation"},{"id":"kotlin-native","level":0,"title":"Kotlin/Native","anchor":"#kotlin-native"},{"id":"support-for-xcode-14-1","level":1,"title":"Support for Xcode 14.1","anchor":"#support-for-xcode-14-1"},{"id":"improved-objective-c-swift-interoperability","level":1,"title":"Improved Objective-C/Swift interoperability","anchor":"#improved-objective-c-swift-interoperability"},{"id":"dynamic-frameworks-by-default-in-the-cocoapods-gradle-plugin","level":1,"title":"Dynamic frameworks by default in the CocoaPods Gradle plugin","anchor":"#dynamic-frameworks-by-default-in-the-cocoapods-gradle-plugin"},{"id":"kotlin-multiplatform-a-new-android-source-set-layout","level":0,"title":"Kotlin Multiplatform: A new Android source set layout","anchor":"#kotlin-multiplatform-a-new-android-source-set-layout"},{"id":"kotlinsourceset-naming-schema","level":1,"title":"KotlinSourceSet naming schema","anchor":"#kotlinsourceset-naming-schema"},{"id":"sourcedirectories","level":1,"title":"SourceDirectories","anchor":"#sourcedirectories"},{"id":"the-location-of-the-androidmanifest-xml-file","level":1,"title":"The location of the AndroidManifest.xml file","anchor":"#the-location-of-the-androidmanifest-xml-file"},{"id":"the-relation-between-android-and-common-tests","level":1,"title":"The relation between Android and common tests","anchor":"#the-relation-between-android-and-common-tests"},{"id":"support-for-android-flavors","level":1,"title":"Support for Android flavors","anchor":"#support-for-android-flavors"},{"id":"configuration-and-setup","level":1,"title":"Configuration and setup","anchor":"#configuration-and-setup"},{"id":"kotlin-js","level":0,"title":"Kotlin/JS","anchor":"#kotlin-js"},{"id":"stable-js-ir-compiler-backend","level":1,"title":"Stable JS IR compiler backend","anchor":"#stable-js-ir-compiler-backend"},{"id":"new-settings-for-reporting-that-yarn-lock-has-been-updated","level":1,"title":"New settings for reporting that yarn.lock has been updated","anchor":"#new-settings-for-reporting-that-yarn-lock-has-been-updated"},{"id":"add-test-targets-for-browsers-via-gradle-properties","level":1,"title":"Add test targets for browsers via Gradle properties","anchor":"#add-test-targets-for-browsers-via-gradle-properties"},{"id":"new-approach-to-adding-css-support-to-your-project","level":1,"title":"New approach to adding CSS support to your project","anchor":"#new-approach-to-adding-css-support-to-your-project"},{"id":"gradle","level":0,"title":"Gradle","anchor":"#gradle"},{"id":"exposing-kotlin-compiler-options-as-gradle-lazy-properties","level":1,"title":"Exposing Kotlin compiler options as Gradle lazy properties","anchor":"#exposing-kotlin-compiler-options-as-gradle-lazy-properties"},{"id":"bumping-the-minimum-supported-versions","level":1,"title":"Bumping the minimum supported versions","anchor":"#bumping-the-minimum-supported-versions"},{"id":"ability-to-disable-the-kotlin-daemon-fallback-strategy","level":1,"title":"Ability to disable the Kotlin daemon fallback strategy","anchor":"#ability-to-disable-the-kotlin-daemon-fallback-strategy"},{"id":"usage-of-the-latest-kotlin-stdlib-version-in-transitive-dependencies","level":1,"title":"Usage of the latest kotlin-stdlib version in transitive dependencies","anchor":"#usage-of-the-latest-kotlin-stdlib-version-in-transitive-dependencies"},{"id":"obligatory-check-for-jvm-targets-of-related-kotlin-and-java-compile-tasks","level":1,"title":"Obligatory check for JVM targets of related Kotlin and Java compile tasks","anchor":"#obligatory-check-for-jvm-targets-of-related-kotlin-and-java-compile-tasks"},{"id":"resolution-of-kotlin-gradle-plugins-transitive-dependencies","level":1,"title":"Resolution of Kotlin Gradle plugins\u0027 transitive dependencies","anchor":"#resolution-of-kotlin-gradle-plugins-transitive-dependencies"},{"id":"deprecations-and-removals","level":1,"title":"Deprecations and removals","anchor":"#deprecations-and-removals"},{"id":"standard-library","level":0,"title":"Standard library","anchor":"#standard-library"},{"id":"updated-jvm-compilation-target","level":1,"title":"Updated JVM compilation target","anchor":"#updated-jvm-compilation-target"},{"id":"cbrt","level":1,"title":"cbrt()","anchor":"#cbrt"},{"id":"timeunit-conversion-between-java-and-kotlin","level":1,"title":"TimeUnit conversion between Java and Kotlin","anchor":"#timeunit-conversion-between-java-and-kotlin"},{"id":"comparable-and-subtractable-timemarks","level":1,"title":"Comparable and subtractable TimeMarks","anchor":"#comparable-and-subtractable-timemarks"},{"id":"recursive-copying-or-deletion-of-directories","level":1,"title":"Recursive copying or deletion of directories","anchor":"#recursive-copying-or-deletion-of-directories"},{"id":"java-optionals-extension-functions","level":1,"title":"Java Optionals extension functions","anchor":"#java-optionals-extension-functions"},{"id":"improved-kotlin-reflect-performance","level":1,"title":"Improved kotlin-reflect performance","anchor":"#improved-kotlin-reflect-performance"},{"id":"documentation-updates","level":0,"title":"Documentation updates","anchor":"#documentation-updates"},{"id":"revamped-and-new-pages","level":1,"title":"Revamped and new pages","anchor":"#revamped-and-new-pages"},{"id":"new-and-updated-tutorials","level":1,"title":"New and updated tutorials","anchor":"#new-and-updated-tutorials"},{"id":"install-kotlin-1-8-0","level":0,"title":"Install Kotlin 1.8.0","anchor":"#install-kotlin-1-8-0"},{"id":"compatibility-guide-for-kotlin-1-8-0","level":0,"title":"Compatibility guide for Kotlin 1.8.0","anchor":"#compatibility-guide-for-kotlin-1-8-0"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="frontend/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="icon" type="image/png" sizes="32x32" href="writerside_32.png"><link rel="icon" type="image/png" sizes="64x64" href="writerside_64.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="What's new in Kotlin 1.8.0 | Kotlin"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Kotlin Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/whatsnew18.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="What's new in Kotlin 1.8.0 | Kotlin"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/whatsnew18.html#webpage",
    "url": "writerside-documentation/whatsnew18.html",
    "name": "What's new in Kotlin 1.8.0 | Kotlin",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Kotlin Help"
}</script><!-- End Schema.org --></head><body data-id="whatsnew18" data-main-title="What's new in Kotlin 1.8.0" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="What's new in Kotlin///Earlier versions"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Kotlin  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="whatsnew18" id="whatsnew18.md">What's new in Kotlin 1.8.0</h1><p id="z7a8gzy_2"><span class="emphasis" id="z7a8gzy_15"><a href="releases.html#release-details" id="z7a8gzy_16" data-tooltip="The following table lists details of the latest Kotlin releases:">Released: 28 December 2022</a></span></p><p id="z7a8gzy_3">The Kotlin 1.8.0 release is out and here are some of its biggest highlights:</p><ul class="list _bullet" id="z7a8gzy_4"><li class="list__item" id="z7a8gzy_17"><p id="z7a8gzy_23"><a href="#recursive-copying-or-deletion-of-directories" id="z7a8gzy_24" data-tooltip="These new functions for java.nio.file.path are Experimental. To use them, you need to opt in with @OptIn(kotlin.io.path.ExperimentalPathApi::class) or @kotlin.io.path.ExperimentalPathApi. Alternatively, you can use the compiler option -opt-in=kotlin.io.path.ExperimentalPathApi.">New experimental functions for JVM: recursively copy or delete directory content</a></p></li><li class="list__item" id="z7a8gzy_18"><p id="z7a8gzy_25"><a href="#improved-kotlin-reflect-performance" id="z7a8gzy_26" data-tooltip="Taking advantage of the fact that kotlin-reflect is now compiled with JVM target 1.8, we migrated our internal cache mechanism to Java's ClassValue. Previously we only cached KClass, but we now also cache KType and KDeclarationContainer. These changes have led to significant…">Improved kotlin-reflect performance</a></p></li><li class="list__item" id="z7a8gzy_19"><p id="z7a8gzy_27"><a href="#a-new-compiler-option-for-disabling-optimizations" id="z7a8gzy_28" data-tooltip="Kotlin 1.8.0 adds a new -Xdebug compiler option, which disables optimizations for a better debugging experience. For now, the option disables the &quot;was optimized out&quot; feature for coroutines. In the future, after we add more optimizations, this option will disable them, too.">New -Xdebug compiler option for better debugging experience</a></p></li><li class="list__item" id="z7a8gzy_20"><p id="z7a8gzy_29"><a href="#updated-jvm-compilation-target" id="z7a8gzy_30" data-tooltip="In Kotlin 1.8.0, the standard libraries (kotlin-stdlib, kotlin-reflect, and kotlin-script-*) are compiled with JVM target 1.8. Previously, the standard libraries were compiled with JVM target 1.6."><code class="code" id="z7a8gzy_31">kotlin-stdlib-jdk7</code> and <code class="code" id="z7a8gzy_32">kotlin-stdlib-jdk8</code> merged into <code class="code" id="z7a8gzy_33">kotlin-stdlib</code></a></p></li><li class="list__item" id="z7a8gzy_21"><p id="z7a8gzy_34"><a href="#improved-objective-c-swift-interoperability" id="z7a8gzy_35" data-tooltip="To make Kotlin more interoperable with Objective-C and Swift, three new annotations were added:">Improved Objective-C/Swift interoperability</a></p></li><li class="list__item" id="z7a8gzy_22"><p id="z7a8gzy_36"><a href="#gradle" id="z7a8gzy_37" data-tooltip="Kotlin 1.8.0 fully supports Gradle versions 7.2 and 7.3. You can also use Gradle versions up to the latest Gradle release, but if you do, keep in mind that you might encounter deprecation warnings or some new Gradle features might not work.">Compatibility with Gradle 7.3</a></p></li></ul><section class="chapter"><h2 id="ide-support" data-toc="ide-support">IDE support</h2><p id="z7a8gzy_38">The Kotlin plugin that supports 1.8.0 is available for:</p><div class="table-wrapper"><table class="wide" id="z7a8gzy_39"><thead><tr class="ijRowHead" id="z7a8gzy_41"><th id="z7a8gzy_44"><p>IDE</p></th><th id="z7a8gzy_45"><p>Supported versions</p></th></tr></thead><tbody><tr id="z7a8gzy_42"><td id="z7a8gzy_46"><p>IntelliJ IDEA</p></td><td id="z7a8gzy_47"><p>2021.3, 2022.1, 2022.2</p></td></tr><tr id="z7a8gzy_43"><td id="z7a8gzy_48"><p>Android Studio</p></td><td id="z7a8gzy_49"><p>Electric Eel (221), Flamingo (222)</p></td></tr></tbody></table></div><aside class="prompt" data-type="note" data-title="" id="z7a8gzy_40"><p id="z7a8gzy_50">You can update your projects to Kotlin 1.8.0 in IntelliJ IDEA 2022.3 without updating the IDE plugin.</p><p id="z7a8gzy_51">To migrate existing projects to Kotlin 1.8.0 in IntelliJ IDEA 2022.3, change the Kotlin version to <code class="code" id="z7a8gzy_52">1.8.0</code> and reimport your Gradle or Maven project.</p></aside></section><section class="chapter"><h2 id="kotlin-jvm" data-toc="kotlin-jvm">Kotlin/JVM</h2><p id="z7a8gzy_53">Starting with version 1.8.0, the compiler can generate classes with a bytecode version corresponding to JVM 19. The new language version also includes:</p><ul class="list _bullet" id="z7a8gzy_54"><li class="list__item" id="z7a8gzy_59"><p id="z7a8gzy_63"><a href="#ability-to-not-generate-type-use-and-type-parameter-annotation-targets" id="z7a8gzy_64" data-tooltip="If a Kotlin annotation has TYPE among its Kotlin targets, the annotation maps to java.lang.annotation.ElementType.TYPE_USE in its list of Java annotation targets. This is just like how the TYPE_PARAMETER Kotlin target maps to the java.lang.annotation.ElementType.TYPE_PARAMETER Java…">A compiler option for switching off the generation of JVM annotation targets</a></p></li><li class="list__item" id="z7a8gzy_60"><p id="z7a8gzy_65"><a href="#a-new-compiler-option-for-disabling-optimizations" id="z7a8gzy_66" data-tooltip="Kotlin 1.8.0 adds a new -Xdebug compiler option, which disables optimizations for a better debugging experience. For now, the option disables the &quot;was optimized out&quot; feature for coroutines. In the future, after we add more optimizations, this option will disable them, too.">A new <code class="code" id="z7a8gzy_67">-Xdebug</code> compiler option for disabling optimizations</a></p></li><li class="list__item" id="z7a8gzy_61"><p id="z7a8gzy_68"><a href="#removal-of-the-old-backend" id="z7a8gzy_69" data-tooltip="In Kotlin 1.5.0, we announced that the IR-based backend became Stable. That meant that the old backend from Kotlin 1.4.* was deprecated. In Kotlin 1.8.0, we've removed the old backend completely. By extension, we've removed the compiler option -Xuse-old-backend and the Gradle…">The removal of the old backend</a></p></li><li class="list__item" id="z7a8gzy_62"><p id="z7a8gzy_70"><a href="#support-for-lombok-s-builder-annotation" id="z7a8gzy_71" data-tooltip="The community has added so many votes for the Kotlin Lombok: Support generated builders (@Builder) YouTrack issue that we just had to support the @Builder annotation.">Support for Lombok's @Builder annotation</a></p></li></ul><section class="chapter"><h3 id="ability-to-not-generate-type-use-and-type-parameter-annotation-targets" data-toc="ability-to-not-generate-type-use-and-type-parameter-annotation-targets">Ability to not generate TYPE_USE and TYPE_PARAMETER annotation targets</h3><p id="z7a8gzy_72">If a Kotlin annotation has <code class="code" id="z7a8gzy_74">TYPE</code> among its Kotlin targets, the annotation maps to <code class="code" id="z7a8gzy_75">java.lang.annotation.ElementType.TYPE_USE</code> in its list of Java annotation targets. This is just like how the <code class="code" id="z7a8gzy_76">TYPE_PARAMETER</code> Kotlin target maps to the <code class="code" id="z7a8gzy_77">java.lang.annotation.ElementType.TYPE_PARAMETER</code> Java target. This is an issue for Android clients with API levels less than 26, which don't have these targets in the API.</p><p id="z7a8gzy_73">Starting with Kotlin 1.8.0, you can use the new compiler option <code class="code" id="z7a8gzy_78">-Xno-new-java-annotation-targets</code> to avoid generating the <code class="code" id="z7a8gzy_79">TYPE_USE</code> and <code class="code" id="z7a8gzy_80">TYPE_PARAMETER</code> annotation targets.</p></section><section class="chapter"><h3 id="a-new-compiler-option-for-disabling-optimizations" data-toc="a-new-compiler-option-for-disabling-optimizations">A new compiler option for disabling optimizations</h3><p id="z7a8gzy_81">Kotlin 1.8.0 adds a new <code class="code" id="z7a8gzy_84">-Xdebug</code> compiler option, which disables optimizations for a better debugging experience. For now, the option disables the &quot;was optimized out&quot; feature for coroutines. In the future, after we add more optimizations, this option will disable them, too.</p><p id="z7a8gzy_82">The &quot;was optimized out&quot; feature optimizes variables when you use suspend functions. However, it is difficult to debug code with optimized variables because you don't see their values.</p><aside class="prompt" data-type="warning" data-title="" id="z7a8gzy_83"><p id="z7a8gzy_85"><span class="control" id="z7a8gzy_86">Never use this option in production</span>: Disabling this feature via <code class="code" id="z7a8gzy_87">-Xdebug</code> can <a href="https://youtrack.jetbrains.com/issue/KT-48678/Coroutine-debugger-disable-was-optimised-out-compiler-feature#focus=Comments-27-6015585.0-0" id="z7a8gzy_88" data-external="true" rel="noopener noreferrer" target="_blank">cause memory leaks</a>.</p></aside></section><section class="chapter"><h3 id="removal-of-the-old-backend" data-toc="removal-of-the-old-backend">Removal of the old backend</h3><p id="z7a8gzy_89">In Kotlin 1.5.0, we <a href="whatsnew15.html#stable-jvm-ir-backend" id="z7a8gzy_90" data-tooltip="The IR-based backend for the Kotlin/JVM compiler is now Stable and enabled by default.">announced</a> that the IR-based backend became <a href="components-stability.html" id="z7a8gzy_91" data-tooltip="The Kotlin language and toolset are divided into many components such as the compilers for the JVM, JS and Native targets, the Standard Library, various accompanying tools and so on. Many of these components were officially released as Stable, which means that they were evolved in a…">Stable</a>. That meant that the old backend from Kotlin 1.4.* was deprecated. In Kotlin 1.8.0, we've removed the old backend completely. By extension, we've removed the compiler option <code class="code" id="z7a8gzy_92">-Xuse-old-backend</code> and the Gradle <code class="code" id="z7a8gzy_93">useOldBackend</code> option.</p></section><section class="chapter"><h3 id="support-for-lombok-s-builder-annotation" data-toc="support-for-lombok-s-builder-annotation">Support for Lombok's @Builder annotation</h3><p id="z7a8gzy_94">The community has added so many votes for the <a href="https://youtrack.jetbrains.com/issue/KT-46959" id="z7a8gzy_97" data-external="true" rel="noopener noreferrer" target="_blank">Kotlin Lombok: Support generated builders (@Builder)</a> YouTrack issue that we just had to support the <a href="https://projectlombok.org/features/Builder" id="z7a8gzy_98" data-external="true" rel="noopener noreferrer" target="_blank">@Builder annotation</a>.</p><p id="z7a8gzy_95">We don't yet have plans to support the <code class="code" id="z7a8gzy_99">@SuperBuilder</code> or <code class="code" id="z7a8gzy_100">@Tolerate</code> annotations, but we'll reconsider if enough people vote for the <a href="https://youtrack.jetbrains.com/issue/KT-53563/Kotlin-Lombok-Support-SuperBuilder" id="z7a8gzy_101" data-external="true" rel="noopener noreferrer" target="_blank">@SuperBuilder</a> and <a href="https://youtrack.jetbrains.com/issue/KT-53564/Kotlin-Lombok-Support-Tolerate" id="z7a8gzy_102" data-external="true" rel="noopener noreferrer" target="_blank">@Tolerate</a> issues.</p><p id="z7a8gzy_96"><a href="lombok.html#gradle" id="z7a8gzy_103" data-tooltip="Apply the kotlin-plugin-lombok Gradle plugin in the build.gradle(.kts) file:">Learn how to configure the Lombok compiler plugin</a>.</p></section></section><section class="chapter"><h2 id="kotlin-native" data-toc="kotlin-native">Kotlin/Native</h2><p id="z7a8gzy_104">Kotlin 1.8.0 includes changes to Objective-C and Swift interoperability, support for Xcode 14.1, and improvements to the CocoaPods Gradle plugin:</p><ul class="list _bullet" id="z7a8gzy_105"><li class="list__item" id="z7a8gzy_109"><p id="z7a8gzy_112"><a href="#support-for-xcode-14-1" id="z7a8gzy_113" data-tooltip="The Kotlin/Native compiler now supports the latest stable Xcode version, 14.1. The compatibility improvements include the following changes:">Support for Xcode 14.1</a></p></li><li class="list__item" id="z7a8gzy_110"><p id="z7a8gzy_114"><a href="#improved-objective-c-swift-interoperability" id="z7a8gzy_115" data-tooltip="To make Kotlin more interoperable with Objective-C and Swift, three new annotations were added:">Improved Objective-C/Swift interoperability</a></p></li><li class="list__item" id="z7a8gzy_111"><p id="z7a8gzy_116"><a href="#dynamic-frameworks-by-default-in-the-cocoapods-gradle-plugin" id="z7a8gzy_117" data-tooltip="Starting with Kotlin 1.8.0, Kotlin frameworks registered by the CocoaPods Gradle plugin are linked dynamically by default. The previous static implementation was inconsistent with the behavior of the Kotlin Gradle plugin.">Dynamic frameworks by default in the CocoaPods Gradle plugin</a></p></li></ul><section class="chapter"><h3 id="support-for-xcode-14-1" data-toc="support-for-xcode-14-1">Support for Xcode 14.1</h3><p id="z7a8gzy_118">The Kotlin/Native compiler now supports the latest stable Xcode version, 14.1. The compatibility improvements include the following changes:</p><ul class="list _bullet" id="z7a8gzy_119"><li class="list__item" id="z7a8gzy_120"><p id="z7a8gzy_123">There's a new <code class="code" id="z7a8gzy_124">watchosDeviceArm64</code> preset for the watchOS target that supports Apple watchOS on ARM64 platforms.</p></li><li class="list__item" id="z7a8gzy_121"><p id="z7a8gzy_125">The Kotlin CocoaPods Gradle plugin no longer has bitcode embedding for Apple frameworks by default.</p></li><li class="list__item" id="z7a8gzy_122"><p id="z7a8gzy_126">Platform libraries were updated to reflect the changes to Objective-C frameworks for Apple targets.</p></li></ul></section><section class="chapter"><h3 id="improved-objective-c-swift-interoperability" data-toc="improved-objective-c-swift-interoperability">Improved Objective-C/Swift interoperability</h3><p id="z7a8gzy_127">To make Kotlin more interoperable with Objective-C and Swift, three new annotations were added:</p><ul class="list _bullet" id="z7a8gzy_128"><li class="list__item" id="z7a8gzy_131"><p id="z7a8gzy_134"><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.native/-obj-c-name/" id="z7a8gzy_137" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="z7a8gzy_138">@ObjCName</code></a> allows you to specify a more idiomatic name in Swift or Objective-C, instead of renaming the Kotlin declaration.</p><p id="z7a8gzy_135">The annotation instructs the Kotlin compiler to use a custom Objective-C and Swift name for this class, property, parameter, or function:</p><div class="code-block" data-lang="kotlin">
@ObjCName(swiftName = &quot;MySwiftArray&quot;)
class MyKotlinArray {
    @ObjCName(&quot;index&quot;)
    fun indexOf(@ObjCName(&quot;of&quot;) element: String): Int = TODO()
}

// Usage with the ObjCName annotations
let array = MySwiftArray()
let index = array.index(of: &quot;element&quot;)
</div></li><li class="list__item" id="z7a8gzy_132"><p id="z7a8gzy_139"><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.native/-hidden-from-obj-c/" id="z7a8gzy_141" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="z7a8gzy_142">@HiddenFromObjC</code></a> allows you to hide a Kotlin declaration from Objective-C.</p><p id="z7a8gzy_140">The annotation instructs the Kotlin compiler not to export a function or property to Objective-C and, consequently, Swift. This can make your Kotlin code more Objective-C/Swift-friendly.</p></li><li class="list__item" id="z7a8gzy_133"><p id="z7a8gzy_143"><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.native/-should-refine-in-swift/" id="z7a8gzy_147" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="z7a8gzy_148">@ShouldRefineInSwift</code></a> is useful for replacing a Kotlin declaration with a wrapper written in Swift.</p><p id="z7a8gzy_144">The annotation instructs the Kotlin compiler to mark a function or property as <code class="code" id="z7a8gzy_149">swift_private</code> in the generated Objective-C API. Such declarations get the <code class="code" id="z7a8gzy_150">__</code> prefix, which makes them invisible to Swift code.</p><p id="z7a8gzy_145">You can still use these declarations in your Swift code to create a Swift-friendly API, but they won't be suggested by Xcode's autocompletion, for example.</p><p id="z7a8gzy_146">For more information on refining Objective-C declarations in Swift, see the <a href="https://developer.apple.com/documentation/swift/improving-objective-c-api-declarations-for-swift" id="z7a8gzy_151" data-external="true" rel="noopener noreferrer" target="_blank">official Apple documentation</a>.</p></li></ul><aside class="prompt" data-type="note" data-title="" id="z7a8gzy_129"><p id="z7a8gzy_152">The new annotations require <a href="opt-in-requirements.html" id="z7a8gzy_153" data-tooltip="The Kotlin standard library provides a mechanism for requiring and giving explicit consent to use certain API elements. This mechanism allows library authors to inform users about specific conditions that require opt-in, such as when an API is in an experimental state and is likely…">opt-in</a>.</p></aside><p id="z7a8gzy_130">The Kotlin team is very grateful to <a href="https://github.com/rickclephas" id="z7a8gzy_154" data-external="true" rel="noopener noreferrer" target="_blank">Rick Clephas</a> for implementing these annotations.</p></section><section class="chapter"><h3 id="dynamic-frameworks-by-default-in-the-cocoapods-gradle-plugin" data-toc="dynamic-frameworks-by-default-in-the-cocoapods-gradle-plugin">Dynamic frameworks by default in the CocoaPods Gradle plugin</h3><p id="z7a8gzy_155">Starting with Kotlin 1.8.0, Kotlin frameworks registered by the CocoaPods Gradle plugin are linked dynamically by default. The previous static implementation was inconsistent with the behavior of the Kotlin Gradle plugin.</p><div class="code-block" data-lang="kotlin">
kotlin {
    cocoapods {
        framework {
            baseName = &quot;MyFramework&quot;
            isStatic = false // Now dynamic by default
        }
    }
}
</div><p id="z7a8gzy_157">If you have an existing project with a static linking type and you upgrade to Kotlin 1.8.0 (or change the linking type explicitly), you may encounter an error with the project's execution. To fix it, close your Xcode project and run <code class="code" id="z7a8gzy_159">pod install</code> in the Podfile directory.</p><p id="z7a8gzy_158">For more information, see the <a href="native-cocoapods-dsl-reference.html" id="z7a8gzy_160" data-tooltip="Kotlin CocoaPods Gradle plugin is a tool for creating Podspec files. These files are necessary to integrate your Kotlin project with the CocoaPods dependency manager.">CocoaPods Gradle plugin DSL reference</a>.</p></section></section><section class="chapter"><h2 id="kotlin-multiplatform-a-new-android-source-set-layout" data-toc="kotlin-multiplatform-a-new-android-source-set-layout">Kotlin Multiplatform: A new Android source set layout</h2><p id="z7a8gzy_161">Kotlin 1.8.0 introduces a new Android source set layout that replaces the previous naming schema for directories, which is confusing in multiple ways.</p><p id="z7a8gzy_162">Consider an example of two <code class="code" id="z7a8gzy_171">androidTest</code> directories created in the current layout. One is for <code class="code" id="z7a8gzy_172">KotlinSourceSets</code> and the other is for <code class="code" id="z7a8gzy_173">AndroidSourceSets</code>:</p><ul class="list _bullet" id="z7a8gzy_163"><li class="list__item" id="z7a8gzy_174"><p id="z7a8gzy_177">They have different semantics: Kotlin's <code class="code" id="z7a8gzy_178">androidTest</code> belongs to the <code class="code" id="z7a8gzy_179">unitTest</code> type, whereas Android's belongs to the <code class="code" id="z7a8gzy_180">integrationTest</code> type.</p></li><li class="list__item" id="z7a8gzy_175"><p id="z7a8gzy_181">They create a confusing <code class="code" id="z7a8gzy_182">SourceDirectories</code> layout, as <code class="code" id="z7a8gzy_183">src/androidTest/kotlin</code> has a <code class="code" id="z7a8gzy_184">UnitTest</code> and <code class="code" id="z7a8gzy_185">src/androidTest/java</code> has an <code class="code" id="z7a8gzy_186">InstrumentedTest</code>.</p></li><li class="list__item" id="z7a8gzy_176"><p id="z7a8gzy_187">Both <code class="code" id="z7a8gzy_188">KotlinSourceSets</code> and <code class="code" id="z7a8gzy_189">AndroidSourceSets</code> use a similar naming schema for Gradle configurations, so the resulting configurations of <code class="code" id="z7a8gzy_190">androidTest</code> for both Kotlin's and Android's source sets are the same: <code class="code" id="z7a8gzy_191">androidTestImplementation</code>, <code class="code" id="z7a8gzy_192">androidTestApi</code>, <code class="code" id="z7a8gzy_193">androidTestRuntimeOnly</code>, and <code class="code" id="z7a8gzy_194">androidTestCompileOnly</code>.</p></li></ul><p id="z7a8gzy_164">To address these and other existing issues, we've introduced a new Android source set layout. Here are some of the key differences between the two layouts:</p><section class="chapter"><h3 id="kotlinsourceset-naming-schema" data-toc="kotlinsourceset-naming-schema">KotlinSourceSet naming schema</h3><div class="table-wrapper"><table class="wide" id="z7a8gzy_195"><thead><tr class="ijRowHead" id="z7a8gzy_198"><th id="z7a8gzy_200"><p>Current source set layout</p></th><th id="z7a8gzy_201"><p>New source set layout</p></th></tr></thead><tbody><tr id="z7a8gzy_199"><td id="z7a8gzy_202"><p><code class="code" id="z7a8gzy_204">targetName</code> + <code class="code" id="z7a8gzy_205">AndroidSourceSet.name</code></p></td><td id="z7a8gzy_203"><p><code class="code" id="z7a8gzy_206">targetName</code> + <code class="code" id="z7a8gzy_207">AndroidVariantType</code></p></td></tr></tbody></table></div><p id="z7a8gzy_196"><code class="code" id="z7a8gzy_208">{AndroidSourceSet.name}</code> maps to <code class="code" id="z7a8gzy_209">{KotlinSourceSet.name}</code> as follows:</p><div class="table-wrapper"><table class="wide" id="z7a8gzy_197"><thead><tr class="ijRowHead" id="z7a8gzy_210"><th id="z7a8gzy_214"></th><th id="z7a8gzy_215"><p>Current source set layout</p></th><th id="z7a8gzy_216"><p>New source set layout</p></th></tr></thead><tbody><tr id="z7a8gzy_211"><td id="z7a8gzy_217"><p>main</p></td><td id="z7a8gzy_218"><p>androidMain</p></td><td id="z7a8gzy_219"><p>androidMain</p></td></tr><tr id="z7a8gzy_212"><td id="z7a8gzy_220"><p>test</p></td><td id="z7a8gzy_221"><p>androidTest</p></td><td id="z7a8gzy_222"><p>android<b id="z7a8gzy_223">Unit</b>Test</p></td></tr><tr id="z7a8gzy_213"><td id="z7a8gzy_224"><p>androidTest</p></td><td id="z7a8gzy_225"><p>android<b id="z7a8gzy_227">Android</b>Test</p></td><td id="z7a8gzy_226"><p>android<b id="z7a8gzy_228">Instrumented</b>Test</p></td></tr></tbody></table></div></section><section class="chapter"><h3 id="sourcedirectories" data-toc="sourcedirectories">SourceDirectories</h3><div class="table-wrapper"><table class="wide" id="z7a8gzy_229"><thead><tr class="ijRowHead" id="z7a8gzy_232"><th id="z7a8gzy_234"><p>Current source set layout</p></th><th id="z7a8gzy_235"><p>New source set layout</p></th></tr></thead><tbody><tr id="z7a8gzy_233"><td id="z7a8gzy_236"><p>The layout adds additional <code class="code" id="z7a8gzy_238">/kotlin</code> SourceDirectories</p></td><td id="z7a8gzy_237"><p><code class="code" id="z7a8gzy_239">src/{AndroidSourceSet.name}/kotlin</code>, <code class="code" id="z7a8gzy_240">src/{KotlinSourceSet.name}/kotlin</code></p></td></tr></tbody></table></div><p id="z7a8gzy_230"><code class="code" id="z7a8gzy_241">{AndroidSourceSet.name}</code> maps to <code class="code" id="z7a8gzy_242">{SourceDirectories included}</code> as follows:</p><div class="table-wrapper"><table class="wide" id="z7a8gzy_231"><thead><tr class="ijRowHead" id="z7a8gzy_243"><th id="z7a8gzy_247"></th><th id="z7a8gzy_248"><p>Current source set layout</p></th><th id="z7a8gzy_249"><p>New source set layout</p></th></tr></thead><tbody><tr id="z7a8gzy_244"><td id="z7a8gzy_250"><p>main</p></td><td id="z7a8gzy_251"><p>src/androidMain/kotlin, src/main/kotlin, src/main/java</p></td><td id="z7a8gzy_252"><p>src/androidMain/kotlin, src/main/kotlin, src/main/java</p></td></tr><tr id="z7a8gzy_245"><td id="z7a8gzy_253"><p>test</p></td><td id="z7a8gzy_254"><p>src/androidTest/kotlin, src/test/kotlin, src/test/java</p></td><td id="z7a8gzy_255"><p>src/android<b id="z7a8gzy_256">Unit</b>Test/kotlin, src/test/kotlin, src/test/java</p></td></tr><tr id="z7a8gzy_246"><td id="z7a8gzy_257"><p>androidTest</p></td><td id="z7a8gzy_258"><p>src/android<b id="z7a8gzy_260">Android</b>Test/kotlin, src/androidTest/java</p></td><td id="z7a8gzy_259"><p>src/android<b id="z7a8gzy_261">Instrumented</b>Test/kotlin, src/androidTest/java, <b id="z7a8gzy_262">src/androidTest/kotlin</b></p></td></tr></tbody></table></div></section><section class="chapter"><h3 id="the-location-of-the-androidmanifest-xml-file" data-toc="the-location-of-the-androidmanifest-xml-file">The location of the AndroidManifest.xml file</h3><div class="table-wrapper"><table class="wide" id="z7a8gzy_263"><thead><tr class="ijRowHead" id="z7a8gzy_266"><th id="z7a8gzy_268"><p>Current source set layout</p></th><th id="z7a8gzy_269"><p>New source set layout</p></th></tr></thead><tbody><tr id="z7a8gzy_267"><td id="z7a8gzy_270"><p>src/{<b id="z7a8gzy_272">Android</b>SourceSet.name}/AndroidManifest.xml</p></td><td id="z7a8gzy_271"><p>src/{<b id="z7a8gzy_273">Kotlin</b>SourceSet.name}/AndroidManifest.xml</p></td></tr></tbody></table></div><p id="z7a8gzy_264"><code class="code" id="z7a8gzy_274">{AndroidSourceSet.name}</code> maps to<code class="code" id="z7a8gzy_275">{AndroidManifest.xml location}</code> as follows:</p><div class="table-wrapper"><table class="wide" id="z7a8gzy_265"><thead><tr class="ijRowHead" id="z7a8gzy_276"><th id="z7a8gzy_279"></th><th id="z7a8gzy_280"><p>Current source set layout</p></th><th id="z7a8gzy_281"><p>New source set layout</p></th></tr></thead><tbody><tr id="z7a8gzy_277"><td id="z7a8gzy_282"><p>main</p></td><td id="z7a8gzy_283"><p>src/main/AndroidManifest.xml</p></td><td id="z7a8gzy_284"><p>src/<b id="z7a8gzy_285">android</b>Main/AndroidManifest.xml</p></td></tr><tr id="z7a8gzy_278"><td id="z7a8gzy_286"><p>debug</p></td><td id="z7a8gzy_287"><p>src/debug/AndroidManifest.xml</p></td><td id="z7a8gzy_288"><p>src/<b id="z7a8gzy_289">android</b>Debug/AndroidManifest.xml</p></td></tr></tbody></table></div></section><section class="chapter"><h3 id="the-relation-between-android-and-common-tests" data-toc="the-relation-between-android-and-common-tests">The relation between Android and common tests</h3><p id="z7a8gzy_290">The new Android source set layout changes the relation between Android-instrumented tests (renamed to <code class="code" id="z7a8gzy_295">androidInstrumentedTest</code> in the new layout) and common tests.</p><p id="z7a8gzy_291">Previously, there was a default <code class="code" id="z7a8gzy_296">dependsOn</code> relation between <code class="code" id="z7a8gzy_297">androidAndroidTest</code> and <code class="code" id="z7a8gzy_298">commonTest</code>. In practice, it meant the following:</p><ul class="list _bullet" id="z7a8gzy_292"><li class="list__item" id="z7a8gzy_299"><p id="z7a8gzy_302">The code in <code class="code" id="z7a8gzy_303">commonTest</code> was available in <code class="code" id="z7a8gzy_304">androidAndroidTest</code>.</p></li><li class="list__item" id="z7a8gzy_300"><p id="z7a8gzy_305"><code class="code" id="z7a8gzy_306">expect</code> declarations in <code class="code" id="z7a8gzy_307">commonTest</code> had to have corresponding <code class="code" id="z7a8gzy_308">actual</code> implementations in <code class="code" id="z7a8gzy_309">androidAndroidTest</code>.</p></li><li class="list__item" id="z7a8gzy_301"><p id="z7a8gzy_310">Tests declared in <code class="code" id="z7a8gzy_311">commonTest</code> were also running as Android instrumented tests.</p></li></ul><p id="z7a8gzy_293">In the new Android source set layout, the <code class="code" id="z7a8gzy_312">dependsOn</code> relation is not added by default. If you prefer the previous behavior, manually declare this relation in your <code class="code" id="z7a8gzy_313">build.gradle.kts</code> file:</p><div class="code-block" data-lang="kotlin">
kotlin {
    // ...
    sourceSets {
        val commonTest by getting
        val androidInstrumentedTest by getting {
            dependsOn(commonTest)
        }
    }
}
</div></section><section class="chapter"><h3 id="support-for-android-flavors" data-toc="support-for-android-flavors">Support for Android flavors</h3><p id="z7a8gzy_314">Previously, the Kotlin Gradle plugin eagerly created source sets that correspond to Android source sets with <code class="code" id="z7a8gzy_318">debug</code> and <code class="code" id="z7a8gzy_319">release</code> build types or custom flavors like <code class="code" id="z7a8gzy_320">demo</code> and <code class="code" id="z7a8gzy_321">full</code>. It made them accessible by constructions like <code class="code" id="z7a8gzy_322">val androidDebug by getting { ... }</code>.</p><p id="z7a8gzy_315">In the new Android source set layout, those source sets are created in the <code class="code" id="z7a8gzy_323">afterEvaluate</code> phase. It makes such expressions invalid, leading to errors like <code class="code" id="z7a8gzy_324">org.gradle.api.UnknownDomainObjectException: KotlinSourceSet with name 'androidDebug' not found</code>.</p><p id="z7a8gzy_316">To work around that, use the new <code class="code" id="z7a8gzy_325">invokeWhenCreated()</code> API in your <code class="code" id="z7a8gzy_326">build.gradle.kts</code> file:</p><div class="code-block" data-lang="kotlin">
kotlin {
    // ...
    sourceSets.invokeWhenCreated(&quot;androidFreeDebug&quot;) {
        // ...
    }
}
</div></section><section class="chapter"><h3 id="configuration-and-setup" data-toc="configuration-and-setup">Configuration and setup</h3><p id="z7a8gzy_327">The new layout will become the default in future releases. You can enable it now with the following Gradle option:</p><div class="code-block" data-lang="none">
kotlin.mpp.androidSourceSetLayoutVersion=2
</div><aside class="prompt" data-type="note" data-title="" id="z7a8gzy_329"><p id="z7a8gzy_332">The new layout requires Android Gradle plugin 7.0 or later and is supported in Android Studio 2022.3 and later.</p></aside><p id="z7a8gzy_330">The usage of the previous Android-style directories is now discouraged. Kotlin 1.8.0 marks the start of the deprecation cycle, introducing a warning for the current layout. You can suppress the warning with the following Gradle property:</p><div class="code-block" data-lang="none">
kotlin.mpp.androidSourceSetLayoutVersion1.nowarn=true
</div></section></section><section class="chapter"><h2 id="kotlin-js" data-toc="kotlin-js">Kotlin/JS</h2><p id="z7a8gzy_333">Kotlin 1.8.0 stabilizes the JS IR compiler backend and brings new features to JavaScript-related Gradle build scripts:</p><ul class="list _bullet" id="z7a8gzy_334"><li class="list__item" id="z7a8gzy_339"><p id="z7a8gzy_343"><a href="#stable-js-ir-compiler-backend" id="z7a8gzy_344" data-tooltip="Starting with this release, the Kotlin/JS intermediate representation (IR-based) compiler backend is Stable. It took a while to unify infrastructure for all three backends, but they now work with the same IR for Kotlin code.">Stable JS IR compiler backend</a></p></li><li class="list__item" id="z7a8gzy_340"><p id="z7a8gzy_345"><a href="#new-settings-for-reporting-that-yarn-lock-has-been-updated" id="z7a8gzy_346" data-tooltip="If you use the yarn package manager, there are three new special Gradle settings that could notify you if the yarn.lock file has been updated. You can use these settings when you want to be notified if yarn.lock has been changed silently during the CI build process.">New settings for reporting that yarn.lock has been updated</a></p></li><li class="list__item" id="z7a8gzy_341"><p id="z7a8gzy_347"><a href="#add-test-targets-for-browsers-via-gradle-properties" id="z7a8gzy_348" data-tooltip="Starting with Kotlin 1.8.0, you can set test targets for different browsers right in the Gradle properties file. Doing so shrinks the size of the build script file as you no longer need to write all targets in build.gradle.kts.">Add test targets for browsers via Gradle properties</a></p></li><li class="list__item" id="z7a8gzy_342"><p id="z7a8gzy_349"><a href="#new-approach-to-adding-css-support-to-your-project" id="z7a8gzy_350" data-tooltip="This release provides a new approach to adding CSS support to your project. We assume that this will affect a lot of projects, so don't forget to update your Gradle build script files as described below.">New approach to adding CSS support to your project</a></p></li></ul><section class="chapter"><h3 id="stable-js-ir-compiler-backend" data-toc="stable-js-ir-compiler-backend">Stable JS IR compiler backend</h3><p id="z7a8gzy_351">Starting with this release, the <a href="js-ir-compiler.html" id="z7a8gzy_355" data-tooltip="The Kotlin/JS IR compiler backend is the main focus of innovation around Kotlin/JS, and paves the way forward for the technology.">Kotlin/JS intermediate representation (IR-based) compiler</a> backend is Stable. It took a while to unify infrastructure for all three backends, but they now work with the same IR for Kotlin code.</p><p id="z7a8gzy_352">As a consequence of the stable JS IR compiler backend, the old one is deprecated from now on.</p><p id="z7a8gzy_353">Incremental compilation is enabled by default along with the stable JS IR compiler.</p><p id="z7a8gzy_354">If you still use the old compiler, switch your project to the new backend with the help of our <a href="js-ir-migration.html" id="z7a8gzy_356" data-tooltip="We replaced the old Kotlin/JS compiler with the IR-based compiler in order to unify Kotlin's behavior on all platforms and to make it possible to implement new JS-specific optimizations, among other reasons. You can learn more about the internal differences between the two compilers…">migration guide</a>.</p></section><section class="chapter"><h3 id="new-settings-for-reporting-that-yarn-lock-has-been-updated" data-toc="new-settings-for-reporting-that-yarn-lock-has-been-updated">New settings for reporting that yarn.lock has been updated</h3><p id="z7a8gzy_357">If you use the <code class="code" id="z7a8gzy_362">yarn</code> package manager, there are three new special Gradle settings that could notify you if the <code class="code" id="z7a8gzy_363">yarn.lock</code> file has been updated. You can use these settings when you want to be notified if <code class="code" id="z7a8gzy_364">yarn.lock</code> has been changed silently during the CI build process.</p><p id="z7a8gzy_358">These three new Gradle properties are:</p><ul class="list _bullet" id="z7a8gzy_359"><li class="list__item" id="z7a8gzy_365"><p id="z7a8gzy_368"><code class="code" id="z7a8gzy_370">YarnLockMismatchReport</code>, which specifies how changes to the <code class="code" id="z7a8gzy_371">yarn.lock</code> file are reported. You can use one of the following values:</p><ul class="list _bullet" id="z7a8gzy_369"><li class="list__item" id="z7a8gzy_372"><p id="z7a8gzy_375"><code class="code" id="z7a8gzy_376">FAIL</code> fails the corresponding Gradle task. This is the default.</p></li><li class="list__item" id="z7a8gzy_373"><p id="z7a8gzy_377"><code class="code" id="z7a8gzy_378">WARNING</code> writes the information about changes in the warning log.</p></li><li class="list__item" id="z7a8gzy_374"><p id="z7a8gzy_379"><code class="code" id="z7a8gzy_380">NONE</code> disables reporting.</p></li></ul></li><li class="list__item" id="z7a8gzy_366"><p id="z7a8gzy_381"><code class="code" id="z7a8gzy_382">reportNewYarnLock</code>, which reports about the recently created <code class="code" id="z7a8gzy_383">yarn.lock</code> file explicitly. By default, this option is disabled: it's a common practice to generate a new <code class="code" id="z7a8gzy_384">yarn.lock</code> file at the first start. You can use this option to ensure that the file has been committed to your repository.</p></li><li class="list__item" id="z7a8gzy_367"><p id="z7a8gzy_385"><code class="code" id="z7a8gzy_386">yarnLockAutoReplace</code>, which replaces <code class="code" id="z7a8gzy_387">yarn.lock</code> automatically every time the Gradle task is run.</p></li></ul><p id="z7a8gzy_360">To use these options, update your build script file <code class="code" id="z7a8gzy_388">build.gradle.kts</code> as follows:</p><div class="code-block" data-lang="kotlin">
import org.jetbrains.kotlin.gradle.targets.js.yarn.YarnLockMismatchReport
import org.jetbrains.kotlin.gradle.targets.js.yarn.YarnRootExtension

rootProject.plugins.withType(org.jetbrains.kotlin.gradle.targets.js.yarn.YarnPlugin::class.java) {
    rootProject.the&lt;YarnRootExtension&gt;().yarnLockMismatchReport =
        YarnLockMismatchReport.WARNING // NONE | FAIL
    rootProject.the&lt;YarnRootExtension&gt;().reportNewYarnLock = false // true
    rootProject.the&lt;YarnRootExtension&gt;().yarnLockAutoReplace = false // true
}
</div></section><section class="chapter"><h3 id="add-test-targets-for-browsers-via-gradle-properties" data-toc="add-test-targets-for-browsers-via-gradle-properties">Add test targets for browsers via Gradle properties</h3><p id="z7a8gzy_389">Starting with Kotlin 1.8.0, you can set test targets for different browsers right in the Gradle properties file. Doing so shrinks the size of the build script file as you no longer need to write all targets in <code class="code" id="z7a8gzy_395">build.gradle.kts</code>.</p><p id="z7a8gzy_390">You can use this property to define a list of browsers for all modules, and then add specific browsers in the build scripts of particular modules.</p><p id="z7a8gzy_391">For example, the following line in your Gradle property file will run the test in Firefox and Safari for all modules:</p><div class="code-block" data-lang="none">
kotlin.js.browser.karma.browsers=firefox,safari
</div><p id="z7a8gzy_393">See the full list of <a href="https://github.com/JetBrains/kotlin/blob/master/libraries/tools/kotlin-gradle-plugin/src/common/kotlin/org/jetbrains/kotlin/gradle/targets/js/testing/karma/KotlinKarma.kt#L106" id="z7a8gzy_396" data-external="true" rel="noopener noreferrer" target="_blank">available values for the property on GitHub</a>.</p><p id="z7a8gzy_394">The Kotlin team is very grateful to <a href="https://github.com/mpetuska" id="z7a8gzy_397" data-external="true" rel="noopener noreferrer" target="_blank">Martynas Petu&scaron;ka</a> for implementing this feature.</p></section><section class="chapter"><h3 id="new-approach-to-adding-css-support-to-your-project" data-toc="new-approach-to-adding-css-support-to-your-project">New approach to adding CSS support to your project</h3><p id="z7a8gzy_398">This release provides a new approach to adding CSS support to your project. We assume that this will affect a lot of projects, so don't forget to update your Gradle build script files as described below.</p><p id="z7a8gzy_399">Before Kotlin 1.8.0, the <code class="code" id="z7a8gzy_403">cssSupport.enabled</code> property was used to add CSS support:</p><div class="code-block" data-lang="kotlin">
browser {
    commonWebpackConfig {
        cssSupport.enabled = true
    }
}
</div><p id="z7a8gzy_401">Now you should use the <code class="code" id="z7a8gzy_404">enabled.set()</code> method in the <code class="code" id="z7a8gzy_405">cssSupport {}</code> block:</p><div class="code-block" data-lang="kotlin">
browser {
    commonWebpackConfig {
        cssSupport {
            enabled.set(true)
        }
    }
}
</div></section></section><section class="chapter"><h2 id="gradle" data-toc="gradle">Gradle</h2><p id="z7a8gzy_406">Kotlin 1.8.0 <span class="control" id="z7a8gzy_416">fully</span> supports Gradle versions 7.2 and 7.3. You can also use Gradle versions up to the latest Gradle release, but if you do, keep in mind that you might encounter deprecation warnings or some new Gradle features might not work.</p><p id="z7a8gzy_407">This version brings lots of changes:</p><ul class="list _bullet" id="z7a8gzy_408"><li class="list__item" id="z7a8gzy_417"><p id="z7a8gzy_424"><a href="#exposing-kotlin-compiler-options-as-gradle-lazy-properties" id="z7a8gzy_425" data-tooltip="To expose available Kotlin compiler options as Gradle lazy properties and to integrate them better into the Kotlin tasks, we made lots of changes:">Exposing Kotlin compiler options as Gradle lazy properties</a></p></li><li class="list__item" id="z7a8gzy_418"><p id="z7a8gzy_426"><a href="#bumping-the-minimum-supported-versions" id="z7a8gzy_427" data-tooltip="Starting with Kotlin 1.8.0, the minimum supported Gradle version is 6.8.3 and the minimum supported Android Gradle plugin version is 4.1.3.">Bumping the minimum supported versions</a></p></li><li class="list__item" id="z7a8gzy_419"><p id="z7a8gzy_428"><a href="#ability-to-disable-the-kotlin-daemon-fallback-strategy" id="z7a8gzy_429" data-tooltip="There is a new Gradle property kotlin.daemon.useFallbackStrategy, whose default value is true. When the value is false, builds fail on problems with the daemon's startup or communication. There is also a new useDaemonFallbackStrategy property in Kotlin compile tasks, which takes…">Ability to disable the Kotlin daemon fallback strategy</a></p></li><li class="list__item" id="z7a8gzy_420"><p id="z7a8gzy_430"><a href="#usage-of-the-latest-kotlin-stdlib-version-in-transitive-dependencies" id="z7a8gzy_431" data-tooltip="If you explicitly write Kotlin version 1.8.0 or higher in your dependencies, for example: implementation(&quot;org.jetbrains.kotlin:kotlin-stdlib:1.8.0&quot;), then the Kotlin Gradle Plugin will use that Kotlin version for transitive kotlin-stdlib-jdk7 and kotlin-stdlib-jdk8…">Usage of the latest kotlin-stdlib version in transitive dependencies</a></p></li><li class="list__item" id="z7a8gzy_421"><p id="z7a8gzy_432"><a href="#obligatory-check-for-jvm-targets-of-related-kotlin-and-java-compile-tasks" id="z7a8gzy_433" data-tooltip="This section applies to your JVM project even if your source files are only in Kotlin and you don't use Java.">Obligatory check for JVM target compatibility equality of related Kotlin and Java compile tasks</a></p></li><li class="list__item" id="z7a8gzy_422"><p id="z7a8gzy_434"><a href="#resolution-of-kotlin-gradle-plugins-transitive-dependencies" id="z7a8gzy_435" data-tooltip="In Kotlin 1.7.0, we introduced support for Gradle plugin variants. Because of these plugin variants, a build classpath can have different versions of the Kotlin Gradle plugins that depend on different versions of some dependency, usually kotlin-gradle-plugin-api. This can lead to a…">Resolution of Kotlin Gradle plugins' transitive dependencies</a></p></li><li class="list__item" id="z7a8gzy_423"><p id="z7a8gzy_436"><a href="#deprecations-and-removals" id="z7a8gzy_437" data-tooltip="In Kotlin 1.8.0, the deprecation cycle continues for the following properties and methods:">Deprecations and removals</a></p></li></ul><section class="chapter"><h3 id="exposing-kotlin-compiler-options-as-gradle-lazy-properties" data-toc="exposing-kotlin-compiler-options-as-gradle-lazy-properties">Exposing Kotlin compiler options as Gradle lazy properties</h3><p id="z7a8gzy_438">To expose available Kotlin compiler options as <a href="https://docs.gradle.org/current/userguide/lazy_configuration.html" id="z7a8gzy_442" data-external="true" rel="noopener noreferrer" target="_blank">Gradle lazy properties</a> and to integrate them better into the Kotlin tasks, we made lots of changes:</p><ul class="list _bullet" id="z7a8gzy_439"><li class="list__item" id="z7a8gzy_443"><p id="z7a8gzy_450">Compile tasks have the new <code class="code" id="z7a8gzy_452">compilerOptions</code> input, which is similar to the existing <code class="code" id="z7a8gzy_453">kotlinOptions</code> but uses <a href="https://docs.gradle.org/current/javadoc/org/gradle/api/provider/Property.html" id="z7a8gzy_454" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="z7a8gzy_455">Property</code></a> from the Gradle Properties API as the return type:</p><div class="code-block" data-lang="kotlin">
tasks.named(&quot;compileKotlin&quot;, org.jetbrains.kotlin.gradle.tasks.KotlinJvmCompile::class.java) {
    compilerOptions {
        useK2.set(true)
    }
}
</div></li><li class="list__item" id="z7a8gzy_444"><p id="z7a8gzy_456">The Kotlin tools tasks <code class="code" id="z7a8gzy_457">KotlinJsDce</code> and <code class="code" id="z7a8gzy_458">KotlinNativeLink</code> have the new <code class="code" id="z7a8gzy_459">toolOptions</code> input, which is similar to the existing <code class="code" id="z7a8gzy_460">kotlinOptions</code> input.</p></li><li class="list__item" id="z7a8gzy_445"><p id="z7a8gzy_461">New inputs have the <a href="https://docs.gradle.org/current/javadoc/org/gradle/api/tasks/Nested.html" id="z7a8gzy_462" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="z7a8gzy_464">@Nested</code> Gradle annotation</a>. Every property inside the inputs has a related Gradle annotation, such as <a href="https://docs.gradle.org/current/userguide/more_about_tasks.html#sec:up_to_date_checks" id="z7a8gzy_463" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="z7a8gzy_465">@Input</code> or <code class="code" id="z7a8gzy_466">@Internal</code></a>.</p></li><li class="list__item" id="z7a8gzy_446"><p id="z7a8gzy_467">The Kotlin Gradle plugin API artifact has two new interfaces:</p><ul class="list _bullet" id="z7a8gzy_468"><li class="list__item" id="z7a8gzy_469"><p id="z7a8gzy_471"><code class="code" id="z7a8gzy_472">org.jetbrains.kotlin.gradle.tasks.KotlinCompilationTask</code>, which has the <code class="code" id="z7a8gzy_473">compilerOptions</code> input and the <code class="code" id="z7a8gzy_474">compileOptions()</code> method. All Kotlin compilation tasks implement this interface.</p></li><li class="list__item" id="z7a8gzy_470"><p id="z7a8gzy_475"><code class="code" id="z7a8gzy_476">org.jetbrains.kotlin.gradle.tasks.KotlinToolTask</code>, which has the <code class="code" id="z7a8gzy_477">toolOptions</code> input and the <code class="code" id="z7a8gzy_478">toolOptions()</code> method. All Kotlin tool tasks &ndash; <code class="code" id="z7a8gzy_479">KotlinJsDce</code>, <code class="code" id="z7a8gzy_480">KotlinNativeLink</code>, and <code class="code" id="z7a8gzy_481">KotlinNativeLinkArtifactTask</code> &ndash; implement this interface.</p></li></ul></li><li class="list__item" id="z7a8gzy_447"><p id="z7a8gzy_482">Some <code class="code" id="z7a8gzy_486">compilerOptions</code> use the new types instead of the <code class="code" id="z7a8gzy_487">String</code> type:</p><ul class="list _bullet" id="z7a8gzy_483"><li class="list__item" id="z7a8gzy_488"><p id="z7a8gzy_493"><a href="https://github.com/JetBrains/kotlin/blob/1.8.0/libraries/tools/kotlin-gradle-compiler-types/src/generated/kotlin/org/jetbrains/kotlin/gradle/dsl/JvmTarget.kt" id="z7a8gzy_494" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="z7a8gzy_495">JvmTarget</code></a></p></li><li class="list__item" id="z7a8gzy_489"><p id="z7a8gzy_496"><a href="https://github.com/JetBrains/kotlin/blob/1.8.0/libraries/tools/kotlin-gradle-compiler-types/src/generated/kotlin/org/jetbrains/kotlin/gradle/dsl/KotlinVersion.kt" id="z7a8gzy_497" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="z7a8gzy_500">KotlinVersion</code></a> (for the <code class="code" id="z7a8gzy_498">apiVersion</code> and the <code class="code" id="z7a8gzy_499">languageVersion</code> inputs)</p></li><li class="list__item" id="z7a8gzy_490"><p id="z7a8gzy_501"><a href="https://github.com/JetBrains/kotlin/blob/1.8.0/libraries/tools/kotlin-gradle-compiler-types/src/generated/kotlin/org/jetbrains/kotlin/gradle/dsl/JsMainFunctionExecutionMode.kt" id="z7a8gzy_502" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="z7a8gzy_503">JsMainFunctionExecutionMode</code></a></p></li><li class="list__item" id="z7a8gzy_491"><p id="z7a8gzy_504"><a href="https://github.com/JetBrains/kotlin/blob/1.8.0/libraries/tools/kotlin-gradle-compiler-types/src/generated/kotlin/org/jetbrains/kotlin/gradle/dsl/JsModuleKind.kt" id="z7a8gzy_505" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="z7a8gzy_506">JsModuleKind</code></a></p></li><li class="list__item" id="z7a8gzy_492"><p id="z7a8gzy_507"><a href="https://github.com/JetBrains/kotlin/blob/1.8.0/libraries/tools/kotlin-gradle-compiler-types/src/generated/kotlin/org/jetbrains/kotlin/gradle/dsl/JsSourceMapEmbedMode.kt" id="z7a8gzy_508" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="z7a8gzy_509">JsSourceMapEmbedMode</code></a></p></li></ul><p id="z7a8gzy_484">For example, you can use <code class="code" id="z7a8gzy_510">compilerOptions.jvmTarget.set(JvmTarget.JVM_11)</code> instead of <code class="code" id="z7a8gzy_511">kotlinOptions.jvmTarget = &quot;11&quot;</code>.</p><p id="z7a8gzy_485">The <code class="code" id="z7a8gzy_512">kotlinOptions</code> types didn't change, and they are internally converted to <code class="code" id="z7a8gzy_513">compilerOptions</code> types.</p></li><li class="list__item" id="z7a8gzy_448"><p id="z7a8gzy_514">The Kotlin Gradle plugin API is binary-compatible with previous releases. There are, however, some source and ABI-breaking changes in the <code class="code" id="z7a8gzy_515">kotlin-gradle-plugin</code> artifact. Most of these changes involve additional generic parameters to some internal types. One important change is that the <code class="code" id="z7a8gzy_516">KotlinNativeLink</code> task no longer inherits the <code class="code" id="z7a8gzy_517">AbstractKotlinNativeCompile</code> task.</p></li><li class="list__item" id="z7a8gzy_449"><p id="z7a8gzy_518"><code class="code" id="z7a8gzy_519">KotlinJsCompilerOptions.outputFile</code> and the related <code class="code" id="z7a8gzy_520">KotlinJsOptions.outputFile</code> options are deprecated. Use the <code class="code" id="z7a8gzy_521">Kotlin2JsCompile.outputFileProperty</code> task input instead.</p></li></ul><aside class="prompt" data-type="note" data-title="" id="z7a8gzy_440"><p id="z7a8gzy_522">The Kotlin Gradle plugin still adds the <code class="code" id="z7a8gzy_525">KotlinJvmOptions</code> DSL to the Android extension:</p><div class="code-block" data-lang="kotlin">
android { 
    kotlinOptions {
        jvmTarget = &quot;11&quot;
    }
}
</div><p id="z7a8gzy_524">This will be changed in the scope of <a href="https://youtrack.jetbrains.com/issue/KT-15370/Gradle-DSL-add-module-level-kotlin-options" id="z7a8gzy_526" data-external="true" rel="noopener noreferrer" target="_blank">this issue</a>, when the <code class="code" id="z7a8gzy_527">compilerOptions</code> DSL will be added to a module level.</p></aside><section class="chapter"><h4 id="limitations" data-toc="limitations">Limitations</h4><aside class="prompt" data-type="warning" data-title="" id="z7a8gzy_528"><p id="z7a8gzy_532">The <code class="code" id="z7a8gzy_533">kotlinOptions</code> task input and the <code class="code" id="z7a8gzy_534">kotlinOptions{...}</code> task DSL are in support mode and will be deprecated in upcoming releases. Improvements will be made only to <code class="code" id="z7a8gzy_535">compilerOptions</code> and <code class="code" id="z7a8gzy_536">toolOptions</code>.</p></aside><p id="z7a8gzy_529">Calling any setter or getter on <code class="code" id="z7a8gzy_537">kotlinOptions</code> delegates to the related property in the <code class="code" id="z7a8gzy_538">compilerOptions</code>. This introduces the following limitations:</p><ul class="list _bullet" id="z7a8gzy_530"><li class="list__item" id="z7a8gzy_539"><p id="z7a8gzy_541"><code class="code" id="z7a8gzy_542">compilerOptions</code> and <code class="code" id="z7a8gzy_543">kotlinOptions</code> cannot be changed in the task execution phase (see one exception in the paragraph below).</p></li><li class="list__item" id="z7a8gzy_540"><p id="z7a8gzy_544"><code class="code" id="z7a8gzy_545">freeCompilerArgs</code> returns an immutable <code class="code" id="z7a8gzy_546">List&lt;String&gt;</code>, which means that, for example, <code class="code" id="z7a8gzy_547">kotlinOptions.freeCompilerArgs.remove(&quot;something&quot;)</code> will fail.</p></li></ul><p id="z7a8gzy_531">Several plugins, including <code class="code" id="z7a8gzy_548">kotlin-dsl</code> and the Android Gradle plugin (AGP) with <a href="https://developer.android.com/jetpack/compose" id="z7a8gzy_549" data-external="true" rel="noopener noreferrer" target="_blank">Jetpack Compose</a> enabled, try to modify the <code class="code" id="z7a8gzy_550">freeCompilerArgs</code> attribute in the task execution phase. We've added a workaround for them in Kotlin 1.8.0. This workaround allows any build script or plugin to modify <code class="code" id="z7a8gzy_551">kotlinOptions.freeCompilerArgs</code> in the execution phase but produces a warning in the build log. To disable this warning, use the new Gradle property <code class="code" id="z7a8gzy_552">kotlin.options.suppressFreeCompilerArgsModificationWarning=true</code>. Gradle is going to add fixes for the <a href="https://github.com/gradle/gradle/issues/22091" id="z7a8gzy_553" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="z7a8gzy_555">kotlin-dsl</code> plugin</a> and <a href="https://issuetracker.google.com/u/1/issues/247544167" id="z7a8gzy_554" data-external="true" rel="noopener noreferrer" target="_blank">AGP with Jetpack Compose enabled</a>.</p></section></section><section class="chapter"><h3 id="bumping-the-minimum-supported-versions" data-toc="bumping-the-minimum-supported-versions">Bumping the minimum supported versions</h3><p id="z7a8gzy_556">Starting with Kotlin 1.8.0, the minimum supported Gradle version is 6.8.3 and the minimum supported Android Gradle plugin version is 4.1.3.</p><p id="z7a8gzy_557">See the <a href="gradle-configure-project.html#apply-the-plugin" id="z7a8gzy_558" data-tooltip="To apply the Kotlin Gradle plugin, use the plugins{} block from the Gradle plugins DSL:">Kotlin Gradle plugin compatibility with available Gradle versions in our documentation</a></p></section><section class="chapter"><h3 id="ability-to-disable-the-kotlin-daemon-fallback-strategy" data-toc="ability-to-disable-the-kotlin-daemon-fallback-strategy">Ability to disable the Kotlin daemon fallback strategy</h3><p id="z7a8gzy_559">There is a new Gradle property <code class="code" id="z7a8gzy_561">kotlin.daemon.useFallbackStrategy</code>, whose default value is <code class="code" id="z7a8gzy_562">true</code>. When the value is <code class="code" id="z7a8gzy_563">false</code>, builds fail on problems with the daemon's startup or communication. There is also a new <code class="code" id="z7a8gzy_564">useDaemonFallbackStrategy</code> property in Kotlin compile tasks, which takes priority over the Gradle property if you use both. If there is insufficient memory to run the compilation, you can see a message about it in the logs.</p><p id="z7a8gzy_560">The Kotlin compiler's fallback strategy is to run a compilation outside the Kotlin daemon if the daemon somehow fails. If the Gradle daemon is on, the compiler uses the &quot;In process&quot; strategy. If the Gradle daemon is off, the compiler uses the &quot;Out of process&quot; strategy. Learn more about these <a href="gradle-compilation-and-caches.html#defining-kotlin-compiler-execution-strategy" id="z7a8gzy_565" data-tooltip="Kotlin compiler execution strategy defines where the Kotlin compiler is executed and if incremental compilation is supported in each case.">execution strategies in the documentation</a>. Note that silent fallback to another strategy can consume a lot of system resources or lead to non-deterministic builds; see this <a href="https://youtrack.jetbrains.com/issue/KT-48843/Add-ability-to-disable-Kotlin-daemon-fallback-strategy" id="z7a8gzy_566" data-external="true" rel="noopener noreferrer" target="_blank">YouTrack issue</a> for more details.</p></section><section class="chapter"><h3 id="usage-of-the-latest-kotlin-stdlib-version-in-transitive-dependencies" data-toc="usage-of-the-latest-kotlin-stdlib-version-in-transitive-dependencies">Usage of the latest kotlin-stdlib version in transitive dependencies</h3><p id="z7a8gzy_567">If you explicitly write Kotlin version 1.8.0 or higher in your dependencies, for example: <code class="code" id="z7a8gzy_572">implementation(&quot;org.jetbrains.kotlin:kotlin-stdlib:1.8.0&quot;)</code>, then the Kotlin Gradle Plugin will use that Kotlin version for transitive <code class="code" id="z7a8gzy_573">kotlin-stdlib-jdk7</code> and <code class="code" id="z7a8gzy_574">kotlin-stdlib-jdk8</code> dependencies. This is done to avoid class duplication from different stdlib versions (learn more about <a href="#updated-jvm-compilation-target" id="z7a8gzy_575" data-tooltip="In Kotlin 1.8.0, the standard libraries (kotlin-stdlib, kotlin-reflect, and kotlin-script-*) are compiled with JVM target 1.8. Previously, the standard libraries were compiled with JVM target 1.6.">merging <code class="code" id="z7a8gzy_577">kotlin-stdlib-jdk7</code> and <code class="code" id="z7a8gzy_578">kotlin-stdlib-jdk8</code> into <code class="code" id="z7a8gzy_579">kotlin-stdlib</code></a>). You can disable this behavior with the <code class="code" id="z7a8gzy_576">kotlin.stdlib.jdk.variants.version.alignment</code> Gradle property:</p><div class="code-block" data-lang="none">
kotlin.stdlib.jdk.variants.version.alignment=false
</div><p id="z7a8gzy_569">If you run into issues with version alignment, align all versions via the Kotlin <a href="https://docs.gradle.org/current/userguide/platforms.html#sub:bom_import" id="z7a8gzy_580" data-external="true" rel="noopener noreferrer" target="_blank">BOM</a> by declaring a platform dependency on <code class="code" id="z7a8gzy_581">kotlin-bom</code> in your build script:</p><div class="code-block" data-lang="kotlin">
implementation(platform(&quot;org.jetbrains.kotlin:kotlin-bom:1.8.0&quot;))
</div><p id="z7a8gzy_571">Learn about other cases and our suggested solutions in <a href="gradle-configure-project.html#other-ways-to-align-versions" id="z7a8gzy_582" data-tooltip="If you have issues with version alignment, you can align all versions via the Kotlin BOM. Declare a platform dependency on kotlin-bom in your build script:">the documentation</a>.</p></section><section class="chapter"><h3 id="obligatory-check-for-jvm-targets-of-related-kotlin-and-java-compile-tasks" data-toc="obligatory-check-for-jvm-targets-of-related-kotlin-and-java-compile-tasks">Obligatory check for JVM targets of related Kotlin and Java compile tasks</h3><aside class="prompt" data-type="note" data-title="" id="z7a8gzy_583"><p id="z7a8gzy_587">This section applies to your JVM project even if your source files are only in Kotlin and you don't use Java.</p></aside><p id="z7a8gzy_584"><a href="https://youtrack.jetbrains.com/issue/KT-54993/Raise-kotlin.jvm.target.validation.mode-check-default-level-to-error-when-build-is-running-on-Gradle-8" id="z7a8gzy_588" data-external="true" rel="noopener noreferrer" target="_blank">Starting from this release</a>, the default value for the <a href="gradle-configure-project.html#check-for-jvm-target-compatibility-of-related-compile-tasks" id="z7a8gzy_589" data-tooltip="In the build module, you may have related compile tasks, for example:"><code class="code" id="z7a8gzy_591">kotlin.jvm.target.validation.mode</code> property</a> is <code class="code" id="z7a8gzy_590">error</code> for projects on Gradle 8.0+ (this version of Gradle has not been released yet), and the plugin will fail the build in the event of JVM target incompatibility.</p><p id="z7a8gzy_585">The shift of the default value from <code class="code" id="z7a8gzy_592">warning</code> to <code class="code" id="z7a8gzy_593">error</code> is a preparation step for a smooth migration to Gradle 8.0. <span class="control" id="z7a8gzy_594">We encourage you to set this property to <code class="code" id="z7a8gzy_596">error</code></span> and <a href="gradle-configure-project.html#gradle-java-toolchains-support" id="z7a8gzy_595" data-tooltip="A warning for Android users. To use Gradle toolchain support, use the Android Gradle plugin (AGP) version 8.1.0-alpha09 or higher.">configure a toolchain</a> or align JVM versions manually.</p><p id="z7a8gzy_586">Learn more about <a href="gradle-configure-project.html#what-can-go-wrong-if-targets-are-incompatible" id="z7a8gzy_597" data-tooltip="There are two ways of manually setting JVM targets for Kotlin and Java source sets:">what can go wrong if you don't check the targets' compatibility</a>.</p></section><section class="chapter"><h3 id="resolution-of-kotlin-gradle-plugins-transitive-dependencies" data-toc="resolution-of-kotlin-gradle-plugins-transitive-dependencies">Resolution of Kotlin Gradle plugins' transitive dependencies</h3><p id="z7a8gzy_598">In Kotlin 1.7.0, we introduced <a href="whatsnew17.html#support-for-gradle-plugin-variants" id="z7a8gzy_602" data-tooltip="Gradle 7.0 introduced a new feature for Gradle plugin authors — plugins with variants. This feature makes it easier to add support for new Gradle features while maintaining compatibility for Gradle versions below 7.1. Learn more about variant selection in Gradle.">support for Gradle plugin variants</a>. Because of these plugin variants, a build classpath can have different versions of the <a href="https://plugins.gradle.org/u/kotlin" id="z7a8gzy_603" data-external="true" rel="noopener noreferrer" target="_blank">Kotlin Gradle plugins</a> that depend on different versions of some dependency, usually <code class="code" id="z7a8gzy_604">kotlin-gradle-plugin-api</code>. This can lead to a resolution problem, and we would like to propose the following workaround, using the <code class="code" id="z7a8gzy_605">kotlin-dsl</code> plugin as an example.</p><p id="z7a8gzy_599">The <code class="code" id="z7a8gzy_606">kotlin-dsl</code> plugin in Gradle 7.6 depends on the <code class="code" id="z7a8gzy_607">org.jetbrains.kotlin.plugin.sam.with.receiver:1.7.10</code> plugin, which depends on <code class="code" id="z7a8gzy_608">kotlin-gradle-plugin-api:1.7.10</code>. If you add the <code class="code" id="z7a8gzy_609">org.jetbrains.kotlin.gradle.jvm:1.8.0</code> plugin, this <code class="code" id="z7a8gzy_610">kotlin-gradle-plugin-api:1.7.10</code> transitive dependency may lead to a dependency resolution error because of a mismatch between the versions (<code class="code" id="z7a8gzy_611">1.8.0</code> and <code class="code" id="z7a8gzy_612">1.7.10</code>) and the variant attributes' <a href="https://docs.gradle.org/current/javadoc/org/gradle/api/attributes/plugin/GradlePluginApiVersion.html" id="z7a8gzy_613" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="z7a8gzy_616">org.gradle.plugin.api-version</code></a> values. As a workaround, add this <a href="https://docs.gradle.org/current/userguide/dependency_constraints.html#sec:adding-constraints-transitive-deps" id="z7a8gzy_614" data-external="true" rel="noopener noreferrer" target="_blank">constraint</a> to align the versions. This workaround may be needed until we implement the <a href="https://youtrack.jetbrains.com/issue/KT-54691/Kotlin-Gradle-Plugin-libraries-alignment-platform" id="z7a8gzy_615" data-external="true" rel="noopener noreferrer" target="_blank">Kotlin Gradle Plugin libraries alignment platform</a>, which is in the plans:</p><div class="code-block" data-lang="kotlin">
dependencies {
    constraints {
        implementation(&quot;org.jetbrains.kotlin:kotlin-sam-with-receiver:1.8.0&quot;)
    }
}
</div><p id="z7a8gzy_601">This constraint forces the <code class="code" id="z7a8gzy_617">org.jetbrains.kotlin:kotlin-sam-with-receiver:1.8.0</code> version to be used in the build classpath for transitive dependencies. Learn more about one similar <a href="https://github.com/gradle/gradle/issues/22510#issuecomment-1292259298" id="z7a8gzy_618" data-external="true" rel="noopener noreferrer" target="_blank">case in the Gradle issue tracker</a>.</p></section><section class="chapter"><h3 id="deprecations-and-removals" data-toc="deprecations-and-removals">Deprecations and removals</h3><p id="z7a8gzy_619">In Kotlin 1.8.0, the deprecation cycle continues for the following properties and methods:</p><ul class="list _bullet" id="z7a8gzy_620"><li class="list__item" id="z7a8gzy_621"><p id="z7a8gzy_624"><a href="whatsnew17.html#changes-in-compile-tasks" id="z7a8gzy_625" data-tooltip="Compile tasks have received lots of changes in this release:">In the notes for Kotlin 1.7.0</a> that the <code class="code" id="z7a8gzy_626">KotlinCompile</code> task still had the deprecated Kotlin property <code class="code" id="z7a8gzy_627">classpath</code>, which would be removed in future releases. Now, we've changed the deprecation level to <code class="code" id="z7a8gzy_628">error</code> for the <code class="code" id="z7a8gzy_629">KotlinCompile</code> task's <code class="code" id="z7a8gzy_630">classpath</code> property. All compile tasks use the <code class="code" id="z7a8gzy_631">libraries</code> input for a list of libraries required for compilation.</p></li><li class="list__item" id="z7a8gzy_622"><p id="z7a8gzy_632">We removed the <code class="code" id="z7a8gzy_633">kapt.use.worker.api</code> property that allowed running <a href="kapt.html" id="z7a8gzy_634" data-tooltip="kapt is in maintenance mode. We are keeping it up-to-date with recent Kotlin and Java releases but have no plans to implement new features. Please use the Kotlin Symbol Processing API (KSP) for annotation processing. See the list of libraries supported by KSP.">kapt</a> via the Gradle Workers API. By default, <a href="kapt.html#run-kapt-tasks-in-parallel" id="z7a8gzy_635" data-tooltip="To improve the speed of builds that use kapt, you can enable the Gradle Worker API for kapt tasks. Using the Worker API lets Gradle run independent annotation processing tasks from a single project in parallel, which in some cases significantly decreases the execution time.">kapt has been using Gradle workers</a> since Kotlin 1.3.70, and we recommend sticking to this method.</p></li><li class="list__item" id="z7a8gzy_623"><p id="z7a8gzy_636">In Kotlin 1.7.0, we <a href="whatsnew17.html#deprecation-of-the-kotlin-compiler-execution-strategy-system-property" id="z7a8gzy_637" data-tooltip="Kotlin 1.6.20 introduced new properties for defining a Kotlin compiler execution strategy. In Kotlin 1.7.0, a deprecation cycle has started for the old system property kotlin.compiler.execution.strategy in favor of the new properties.">announced the start of a deprecation cycle for the <code class="code" id="z7a8gzy_639">kotlin.compiler.execution.strategy</code> property</a>. In this release, we removed this property. Learn how to <a href="gradle-compilation-and-caches.html#defining-kotlin-compiler-execution-strategy" id="z7a8gzy_638" data-tooltip="Kotlin compiler execution strategy defines where the Kotlin compiler is executed and if incremental compilation is supported in each case.">define a Kotlin compiler execution strategy</a> in other ways.</p></li></ul></section></section><section class="chapter"><h2 id="standard-library" data-toc="standard-library">Standard library</h2><p id="z7a8gzy_640">Kotlin 1.8.0:</p><ul class="list _bullet" id="z7a8gzy_641"><li class="list__item" id="z7a8gzy_649"><p id="z7a8gzy_654">Updates <a href="#updated-jvm-compilation-target" id="z7a8gzy_655" data-tooltip="In Kotlin 1.8.0, the standard libraries (kotlin-stdlib, kotlin-reflect, and kotlin-script-*) are compiled with JVM target 1.8. Previously, the standard libraries were compiled with JVM target 1.6.">JVM compilation target</a>.</p></li><li class="list__item" id="z7a8gzy_650"><p id="z7a8gzy_656">Stabilizes a number of functions &ndash; <a href="#timeunit-conversion-between-java-and-kotlin" id="z7a8gzy_657" data-tooltip="The toTimeUnit() and toDurationUnit() functions in kotlin.time are now Stable. Introduced as Experimental in Kotlin 1.6.0, these functions improve interoperability between Kotlin and Java. You can now easily convert between Java java.util.concurrent.TimeUnit and Kotlin…">TimeUnit conversion between Java and Kotlin</a>, <a href="#cbrt" id="z7a8gzy_658" data-tooltip="The cbrt() function, which allows you to compute the real cube root of a double or float, is now Stable."><code class="code" id="z7a8gzy_660">cbrt()</code></a>, <a href="#java-optionals-extension-functions" id="z7a8gzy_659" data-tooltip="The extension functions that were introduced in Kotlin 1.7.0 are now Stable. These functions simplify working with Optional classes in Java. They can be used to unwrap and convert Optional objects on the JVM, and to make working with Java APIs more concise. For more information, see…">Java <code class="code" id="z7a8gzy_661">Optionals</code> extension functions</a>.</p></li><li class="list__item" id="z7a8gzy_651"><p id="z7a8gzy_662">Provides a <a href="#comparable-and-subtractable-timemarks" id="z7a8gzy_663" data-tooltip="The new functionality of TimeMarks is Experimental, and to use it you need to opt in by using @OptIn(ExperimentalTime::class) or @ExperimentalTime.">preview for comparable and subtractable <code class="code" id="z7a8gzy_664">TimeMarks</code></a>.</p></li><li class="list__item" id="z7a8gzy_652"><p id="z7a8gzy_665">Includes <a href="#recursive-copying-or-deletion-of-directories" id="z7a8gzy_666" data-tooltip="These new functions for java.nio.file.path are Experimental. To use them, you need to opt in with @OptIn(kotlin.io.path.ExperimentalPathApi::class) or @kotlin.io.path.ExperimentalPathApi. Alternatively, you can use the compiler option -opt-in=kotlin.io.path.ExperimentalPathApi.">experimental extension functions for <code class="code" id="z7a8gzy_667">java.nio.file.path</code></a>.</p></li><li class="list__item" id="z7a8gzy_653"><p id="z7a8gzy_668">Presents <a href="#improved-kotlin-reflect-performance" id="z7a8gzy_669" data-tooltip="Taking advantage of the fact that kotlin-reflect is now compiled with JVM target 1.8, we migrated our internal cache mechanism to Java's ClassValue. Previously we only cached KClass, but we now also cache KType and KDeclarationContainer. These changes have led to significant…">improved kotlin-reflect performance</a>.</p></li></ul><section class="chapter"><h3 id="updated-jvm-compilation-target" data-toc="updated-jvm-compilation-target">Updated JVM compilation target</h3><p id="z7a8gzy_670">In Kotlin 1.8.0, the standard libraries (<code class="code" id="z7a8gzy_674">kotlin-stdlib</code>, <code class="code" id="z7a8gzy_675">kotlin-reflect</code>, and <code class="code" id="z7a8gzy_676">kotlin-script-*</code>) are compiled with JVM target 1.8. Previously, the standard libraries were compiled with JVM target 1.6.</p><p id="z7a8gzy_671">Kotlin 1.8.0 no longer supports JVM targets 1.6 and 1.7. As a result, you no longer need to declare <code class="code" id="z7a8gzy_677">kotlin-stdlib-jdk7</code> and <code class="code" id="z7a8gzy_678">kotlin-stdlib-jdk8</code> separately in build scripts because the contents of these artifacts have been merged into <code class="code" id="z7a8gzy_679">kotlin-stdlib</code>.</p><aside class="prompt" data-type="note" data-title="" id="z7a8gzy_672"><p id="z7a8gzy_680">If you have explicitly declared <code class="code" id="z7a8gzy_681">kotlin-stdlib-jdk7</code> and <code class="code" id="z7a8gzy_682">kotlin-stdlib-jdk8</code> as dependencies in your build scripts, then you should replace them with <code class="code" id="z7a8gzy_683">kotlin-stdlib</code>.</p></aside><p id="z7a8gzy_673">Note that mixing different versions of stdlib artifacts could lead to class duplication or to missing classes. To avoid that, the Kotlin Gradle plugin can help you <a href="#usage-of-the-latest-kotlin-stdlib-version-in-transitive-dependencies" id="z7a8gzy_684" data-tooltip="If you explicitly write Kotlin version 1.8.0 or higher in your dependencies, for example: implementation(&quot;org.jetbrains.kotlin:kotlin-stdlib:1.8.0&quot;), then the Kotlin Gradle Plugin will use that Kotlin version for transitive kotlin-stdlib-jdk7 and kotlin-stdlib-jdk8…">align stdlib versions</a>.</p></section><section class="chapter"><h3 id="cbrt" data-toc="cbrt">cbrt()</h3><p id="z7a8gzy_685">The <code class="code" id="z7a8gzy_687">cbrt()</code> function, which allows you to compute the real cube root of a <code class="code" id="z7a8gzy_688">double</code> or <code class="code" id="z7a8gzy_689">float</code>, is now Stable.</p><div class="code-block" data-lang="kotlin" data-runnable="true" data-min-compiler-version="1.8">
import kotlin.math.*

fun main() {
    val num = 27
    val negNum = -num

    println(&quot;The cube root of ${num.toDouble()} is: &quot; +
            cbrt(num.toDouble()))
    println(&quot;The cube root of ${negNum.toDouble()} is: &quot; +
            cbrt(negNum.toDouble()))
}
</div></section><section class="chapter"><h3 id="timeunit-conversion-between-java-and-kotlin" data-toc="timeunit-conversion-between-java-and-kotlin">TimeUnit conversion between Java and Kotlin</h3><p id="z7a8gzy_690">The <code class="code" id="z7a8gzy_692">toTimeUnit()</code> and <code class="code" id="z7a8gzy_693">toDurationUnit()</code> functions in <code class="code" id="z7a8gzy_694">kotlin.time</code> are now Stable. Introduced as Experimental in Kotlin 1.6.0, these functions improve interoperability between Kotlin and Java. You can now easily convert between Java <code class="code" id="z7a8gzy_695">java.util.concurrent.TimeUnit</code> and Kotlin <code class="code" id="z7a8gzy_696">kotlin.time.DurationUnit</code>. These functions are supported on the JVM only.</p><div class="code-block" data-lang="kotlin">
import kotlin.time.*

// For use from Java
fun wait(timeout: Long, unit: TimeUnit) {
    val duration: Duration = timeout.toDuration(unit.toDurationUnit())
    ...
}
</div></section><section class="chapter"><h3 id="comparable-and-subtractable-timemarks" data-toc="comparable-and-subtractable-timemarks">Comparable and subtractable TimeMarks</h3><aside class="prompt" data-type="warning" data-title="" id="z7a8gzy_697"><p id="z7a8gzy_702">The new functionality of <code class="code" id="z7a8gzy_703">TimeMarks</code> is <a href="components-stability.html#stability-levels-explained" id="z7a8gzy_704" data-tooltip="Here's a quick guide to these stability levels and their meaning:">Experimental</a>, and to use it you need to opt in by using <code class="code" id="z7a8gzy_705">@OptIn(ExperimentalTime::class)</code> or <code class="code" id="z7a8gzy_706">@ExperimentalTime</code>.</p></aside><p id="z7a8gzy_698">Before Kotlin 1.8.0, if you wanted to calculate the time difference between multiple <code class="code" id="z7a8gzy_707">TimeMarks</code> and <span class="control" id="z7a8gzy_708">now</span>, you could only call <code class="code" id="z7a8gzy_709">elapsedNow()</code> on one <code class="code" id="z7a8gzy_710">TimeMark</code> at a time. This made it difficult to compare the results because the two <code class="code" id="z7a8gzy_711">elapsedNow()</code> function calls couldn't be executed at exactly the same time.</p><p id="z7a8gzy_699">To solve this, in Kotlin 1.8.0 you can subtract and compare <code class="code" id="z7a8gzy_712">TimeMarks</code> from the same time source. Now you can create a new <code class="code" id="z7a8gzy_713">TimeMark</code> instance to represent <span class="control" id="z7a8gzy_714">now</span> and subtract other <code class="code" id="z7a8gzy_715">TimeMarks</code> from it. This way, the results that you collect from these calculations are guaranteed to be relative to each other.</p><div class="code-block" data-lang="kotlin" data-runnable="true" data-min-compiler-version="1.8">
import kotlin.time.*
fun main() {
//sampleStart
    val timeSource = TimeSource.Monotonic
    val mark1 = timeSource.markNow()
    Thread.sleep(500) // Sleep 0.5 seconds
    val mark2 = timeSource.markNow()

    // Before 1.8.0
    repeat(4) { n -&gt;
        val elapsed1 = mark1.elapsedNow()
        val elapsed2 = mark2.elapsedNow()

        // Difference between elapsed1 and elapsed2 can vary depending 
        // on how much time passes between the two elapsedNow() calls
        println(&quot;Measurement 1.${n + 1}: elapsed1=$elapsed1, &quot; +
                &quot;elapsed2=$elapsed2, diff=${elapsed1 - elapsed2}&quot;)
    }
    println()

    // Since 1.8.0
    repeat(4) { n -&gt;
        val mark3 = timeSource.markNow()
        val elapsed1 = mark3 - mark1
        val elapsed2 = mark3 - mark2

        // Now the elapsed times are calculated relative to mark3, 
        // which is a fixed value
        println(&quot;Measurement 2.${n + 1}: elapsed1=$elapsed1, &quot; +
                &quot;elapsed2=$elapsed2, diff=${elapsed1 - elapsed2}&quot;)
    }
    // It's also possible to compare time marks with each other
    // This is true, as mark2 was captured later than mark1
    println(mark2 &gt; mark1)
//sampleEnd
}

</div><p id="z7a8gzy_701">This new functionality is particularly useful in animation calculations where you want to calculate the difference between, or compare, multiple <code class="code" id="z7a8gzy_716">TimeMarks</code> representing different frames.</p></section><section class="chapter"><h3 id="recursive-copying-or-deletion-of-directories" data-toc="recursive-copying-or-deletion-of-directories">Recursive copying or deletion of directories</h3><aside class="prompt" data-type="warning" data-title="" id="z7a8gzy_717"><p id="z7a8gzy_724">These new functions for <code class="code" id="z7a8gzy_725">java.nio.file.path</code> are <a href="components-stability.html#stability-levels-explained" id="z7a8gzy_726" data-tooltip="Here's a quick guide to these stability levels and their meaning:">Experimental</a>. To use them, you need to opt in with <code class="code" id="z7a8gzy_727">@OptIn(kotlin.io.path.ExperimentalPathApi::class)</code> or <code class="code" id="z7a8gzy_728">@kotlin.io.path.ExperimentalPathApi</code>. Alternatively, you can use the compiler option <code class="code" id="z7a8gzy_729">-opt-in=kotlin.io.path.ExperimentalPathApi</code>.</p></aside><p id="z7a8gzy_718">We have introduced two new extension functions for <code class="code" id="z7a8gzy_730">java.nio.file.Path</code>, <code class="code" id="z7a8gzy_731">copyToRecursively()</code> and <code class="code" id="z7a8gzy_732">deleteRecursively()</code>, which allow you to recursively:</p><ul class="list _bullet" id="z7a8gzy_719"><li class="list__item" id="z7a8gzy_733"><p id="z7a8gzy_735">Copy a directory and its contents to another destination.</p></li><li class="list__item" id="z7a8gzy_734"><p id="z7a8gzy_736">Delete a directory and its contents.</p></li></ul><p id="z7a8gzy_720">These functions can be very useful as part of a backup process.</p><section class="chapter"><h4 id="error-handling" data-toc="error-handling">Error handling</h4><p id="z7a8gzy_737">Using <code class="code" id="z7a8gzy_740">copyToRecursively()</code>, you can define what should happen if an exception occurs while copying, by overloading the <code class="code" id="z7a8gzy_741">onError</code> lambda function:</p><div class="code-block" data-lang="kotlin">
sourceRoot.copyToRecursively(destinationRoot, followLinks = false,
    onError = { source, target, exception -&gt;
        logger.logError(exception, &quot;Failed to copy $source to $target&quot;)
        OnErrorResult.TERMINATE
    })
</div><p id="z7a8gzy_739">When you use <code class="code" id="z7a8gzy_742">deleteRecursively()</code>, if an exception occurs while deleting a file or folder, then the file or folder is skipped. Once the deletion has completed, <code class="code" id="z7a8gzy_743">deleteRecursively()</code> throws an <code class="code" id="z7a8gzy_744">IOException</code> containing all the exceptions that occurred as suppressed exceptions.</p></section><section class="chapter"><h4 id="file-overwrite" data-toc="file-overwrite">File overwrite</h4><p id="z7a8gzy_745">If <code class="code" id="z7a8gzy_747">copyToRecursively()</code> finds that a file already exists in the destination directory, then an exception occurs. If you want to overwrite the file instead, use the overload that has <code class="code" id="z7a8gzy_748">overwrite</code> as an argument and set it to <code class="code" id="z7a8gzy_749">true</code>:</p><div class="code-block" data-lang="kotlin">
fun setUpEnvironment(projectDirectory: Path, fixtureName: String) {
    fixturesRoot.resolve(COMMON_FIXTURE_NAME)
        .copyToRecursively(projectDirectory, followLinks = false)
    fixturesRoot.resolve(fixtureName)
        .copyToRecursively(projectDirectory, followLinks = false,
            overwrite = true) // patches the common fixture
}
</div></section><section class="chapter"><h4 id="custom-copying-action" data-toc="custom-copying-action">Custom copying action</h4><p id="z7a8gzy_750">To define your own custom logic for copying, use the overload that has <code class="code" id="z7a8gzy_753">copyAction</code> as an additional argument. By using <code class="code" id="z7a8gzy_754">copyAction</code> you can provide a lambda function, for example, with your preferred actions:</p><div class="code-block" data-lang="kotlin">
sourceRoot.copyToRecursively(destinationRoot, followLinks = false) { source, target -&gt;
    if (source.name.startsWith(&quot;.&quot;)) {
        CopyActionResult.SKIP_SUBTREE
    } else {
        source.copyToIgnoringExistingDirectory(target, followLinks = false)
        CopyActionResult.CONTINUE
    }
}
</div><p id="z7a8gzy_752">For more information on these extension functions, see <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io.path/java.nio.file.-path/copy-to-recursively.html" id="z7a8gzy_755" data-external="true" rel="noopener noreferrer" target="_blank">our API reference</a>.</p></section></section><section class="chapter"><h3 id="java-optionals-extension-functions" data-toc="java-optionals-extension-functions">Java Optionals extension functions</h3><p id="z7a8gzy_756">The extension functions that were introduced in <a href="whatsnew17.html#new-experimental-extension-functions-for-java-optionals" id="z7a8gzy_757" data-tooltip="Kotlin 1.7.0 comes with new convenience functions that simplify working with Optional classes in Java. These new functions can be used to unwrap and convert optional objects on the JVM and help make working with Java APIs more concise.">Kotlin 1.7.0</a> are now Stable. These functions simplify working with Optional classes in Java. They can be used to unwrap and convert <code class="code" id="z7a8gzy_758">Optional</code> objects on the JVM, and to make working with Java APIs more concise. For more information, see <a href="whatsnew17.html#new-experimental-extension-functions-for-java-optionals" id="z7a8gzy_759" data-tooltip="Kotlin 1.7.0 comes with new convenience functions that simplify working with Optional classes in Java. These new functions can be used to unwrap and convert optional objects on the JVM and help make working with Java APIs more concise.">What's new in Kotlin 1.7.0</a>.</p></section><section class="chapter"><h3 id="improved-kotlin-reflect-performance" data-toc="improved-kotlin-reflect-performance">Improved kotlin-reflect performance</h3><p id="z7a8gzy_760">Taking advantage of the fact that <code class="code" id="z7a8gzy_761">kotlin-reflect</code> is now compiled with JVM target 1.8, we migrated our internal cache mechanism to Java's <code class="code" id="z7a8gzy_762">ClassValue</code>. Previously we only cached <code class="code" id="z7a8gzy_763">KClass</code>, but we now also cache <code class="code" id="z7a8gzy_764">KType</code> and <code class="code" id="z7a8gzy_765">KDeclarationContainer</code>. These changes have led to significant performance improvements when invoking <code class="code" id="z7a8gzy_766">typeOf()</code>.</p></section></section><section class="chapter"><h2 id="documentation-updates" data-toc="documentation-updates">Documentation updates</h2><p id="z7a8gzy_767">The Kotlin documentation has received some notable changes:</p><section class="chapter"><h3 id="revamped-and-new-pages" data-toc="revamped-and-new-pages">Revamped and new pages</h3><ul class="list _bullet" id="z7a8gzy_770"><li class="list__item" id="z7a8gzy_771"><p id="z7a8gzy_774"><a href="gradle.html" id="z7a8gzy_775" data-tooltip="Gradle is a build system that helps to automate and manage your building process. It downloads required dependencies, packages your code, and prepares it for compilation. Learn about Gradle basics and specifics on the Gradle website.">Gradle overview</a> &ndash; learn how to configure and build a Kotlin project with the Gradle build system, available compiler options, compilation, and caches in the Kotlin Gradle plugin.</p></li><li class="list__item" id="z7a8gzy_772"><p id="z7a8gzy_776"><a href="java-to-kotlin-nullability-guide.html" id="z7a8gzy_777" data-tooltip="Nullability is the ability of a variable to hold a null value. When a variable contains null, an attempt to dereference the variable leads to a NullPointerException. There are many ways to write code in order to minimize the probability of receiving null pointer exceptions.">Nullability in Java and Kotlin</a> &ndash; see the differences between Java's and Kotlin's approaches to handling possibly nullable variables.</p></li><li class="list__item" id="z7a8gzy_773"><p id="z7a8gzy_778"><span id="z7a8gzy_779">Lincheck guide</span> &ndash; learn how to set up and use the Lincheck framework for testing concurrent algorithms on the JVM.</p></li></ul></section><section class="chapter"><h3 id="new-and-updated-tutorials" data-toc="new-and-updated-tutorials">New and updated tutorials</h3><ul class="list _bullet" id="z7a8gzy_780"><li class="list__item" id="z7a8gzy_781"><p id="z7a8gzy_784"><a href="get-started-with-jvm-gradle-project.html" id="z7a8gzy_785" data-tooltip="This tutorial demonstrates how to use IntelliJ IDEA and Gradle to create a JVM console application.">Get started with Gradle and Kotlin/JVM</a> &ndash; create a console application using IntelliJ IDEA and Gradle.</p></li><li class="list__item" id="z7a8gzy_782"><p id="z7a8gzy_786"><a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-ktor-sqldelight.html" id="z7a8gzy_787" data-external="true" rel="noopener noreferrer" target="_blank">Create a multiplatform app using Ktor and SQLDelight</a> &ndash; create a mobile application for iOS and Android using Kotlin Multiplatform Mobile.</p></li><li class="list__item" id="z7a8gzy_783"><p id="z7a8gzy_788"><a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-create-first-app.html" id="z7a8gzy_789" data-external="true" rel="noopener noreferrer" target="_blank">Get started with Kotlin Multiplatform</a> &ndash; learn about cross-platform mobile development with Kotlin and create an app that works on both Android and iOS.</p></li></ul></section></section><section class="chapter"><h2 id="install-kotlin-1-8-0" data-toc="install-kotlin-1-8-0">Install Kotlin 1.8.0</h2><p id="z7a8gzy_790"><a href="https://www.jetbrains.com/idea/download/" id="z7a8gzy_793" data-external="true" rel="noopener noreferrer" target="_blank">IntelliJ IDEA</a> 2021.3, 2022.1, and 2022.2 automatically suggest updating the Kotlin plugin to version 1.8.0. IntelliJ IDEA 2022.3 will have the 1.8.0 version of the Kotlin plugin bundled in an upcoming minor update.</p><aside class="prompt" data-type="note" data-title="" id="z7a8gzy_791"><p id="z7a8gzy_794">To migrate existing projects to Kotlin 1.8.0 in IntelliJ IDEA 2022.3, change the Kotlin version to <code class="code" id="z7a8gzy_795">1.8.0</code> and reimport your Gradle or Maven project.</p></aside><p id="z7a8gzy_792">For Android Studio Electric Eel (221) and Flamingo (222), version 1.8.0 of the Kotlin plugin will be delivered with the upcoming Android Studios updates. The new command-line compiler is available for download on the <a href="https://github.com/JetBrains/kotlin/releases/tag/v1.8.0" id="z7a8gzy_796" data-external="true" rel="noopener noreferrer" target="_blank">GitHub release page</a>.</p></section><section class="chapter"><h2 id="compatibility-guide-for-kotlin-1-8-0" data-toc="compatibility-guide-for-kotlin-1-8-0">Compatibility guide for Kotlin 1.8.0</h2><p id="z7a8gzy_797">Kotlin 1.8.0 is a <a href="kotlin-evolution-principles.html#language-and-tooling-releases" id="z7a8gzy_798" data-tooltip="Stable releases with versions, such as 2.0.0, are usually considered to be language releases bringing major changes in the language. Normally, we publish tooling releases, numbered x.x.20 in between language releases.">feature release</a> and can, therefore, bring changes that are incompatible with your code written for earlier versions of the language. Find the detailed list of these changes in the <a href="compatibility-guide-18.html" id="z7a8gzy_799" data-tooltip="Keeping the Language Modern and Comfortable Updates are among the fundamental principles in Kotlin Language Design. The former says that constructs which obstruct language evolution should be removed, and the latter says that this removal should be well-communicated beforehand to…">Compatibility guide for Kotlin 1.8.0</a>.</p></section><div class="last-modified">19 April 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="whatsnew1820.html" class="navigation-links__prev">What's new in Kotlin 1.8.20</a><a href="whatsnew1720.html" class="navigation-links__next">What's new in Kotlin 1.7.20</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="frontend/app.js"></script></body></html>
<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-04-23T13:00:01.201456331"><title>Using Kotlin from local Swift packages | Kotlin</title><script type="application/json" id="virtual-toc-data">[{"id":"set-up-the-project","level":0,"title":"Set up the project","anchor":"#set-up-the-project"},{"id":"migrate-from-spm-binarytarget-integration","level":1,"title":"Migrate from SPM binaryTarget integration","anchor":"#migrate-from-spm-binarytarget-integration"},{"id":"migrate-from-the-cocoapods-plugin","level":1,"title":"Migrate from the CocoaPods plugin","anchor":"#migrate-from-the-cocoapods-plugin"},{"id":"connect-the-framework-to-your-project","level":0,"title":"Connect the framework to your project","anchor":"#connect-the-framework-to-your-project"},{"id":"what-s-next","level":0,"title":"What\u0027s next","anchor":"#what-s-next"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="frontend/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="icon" type="image/png" sizes="32x32" href="writerside_32.png"><link rel="icon" type="image/png" sizes="64x64" href="writerside_64.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Using Kotlin from local Swift packages | Kotlin"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Kotlin Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/multiplatform-spm-local-integration.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Using Kotlin from local Swift packages | Kotlin"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/multiplatform-spm-local-integration.html#webpage",
    "url": "writerside-documentation/multiplatform-spm-local-integration.html",
    "name": "Using Kotlin from local Swift packages | Kotlin",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Kotlin Help"
}</script><!-- End Schema.org --></head><body data-id="multiplatform-spm-local-integration" data-main-title="Using Kotlin from local Swift packages" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Multiplatform development///Set up iOS integration"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Kotlin  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="multiplatform-spm-local-integration" id="multiplatform-spm-local-integration.md">Using Kotlin from local Swift packages</h1><div class="micro-format" data-content="{&quot;microFormat&quot;:[&quot;\u003cp id\u003d\&quot;yhe4z5_142\&quot;\u003eThis is a local integration method. It can work for you if:\u003c/p\u003e&quot;,&quot;\u003cbr\u003e&quot;,&quot;\u003cul class\u003d\&quot;list _bullet\&quot; id\u003d\&quot;yhe4z5_12\&quot;\u003e\u003cli class\u003d\&quot;list__item\&quot; id\u003d\&quot;yhe4z5_14\&quot;\u003e\u003cp id\u003d\&quot;yhe4z5_17\&quot;\u003eYou have an iOS app with local SPM modules.\u003c/p\u003e\u003c/li\u003e\u003cli class\u003d\&quot;list__item\&quot; id\u003d\&quot;yhe4z5_15\&quot;\u003e\u003cp id\u003d\&quot;yhe4z5_18\&quot;\u003eYou\u0027ve already set up a Kotlin Multiplatform project targeting iOS on your local machine.\u003c/p\u003e\u003c/li\u003e\u003cli class\u003d\&quot;list__item\&quot; id\u003d\&quot;yhe4z5_16\&quot;\u003e\u003cp id\u003d\&quot;yhe4z5_19\&quot;\u003eYour existing iOS project has a static linking type. \u003cbr\u003e\u003c/p\u003e\u003c/li\u003e\u003c/ul\u003e&quot;,&quot;\u003cp id\u003d\&quot;yhe4z5_13\&quot;\u003e\u003ca href\u003d\&quot;multiplatform-ios-integration-overview.html\&quot; id\u003d\&quot;yhe4z5_21\&quot; data-tooltip\u003d\&quot;You can integrate a Kotlin Multiplatform shared module into your iOS app. For that, you generate an iOS framework from the shared module and then add it as a dependency to the iOS project:\&quot;\u003eChoose the integration method that suits you best\u003c/a\u003e\u003c/p\u003e&quot;]}"></div><p id="yhe4z5_3">In this tutorial, you'll learn how to integrate a Kotlin framework from a Kotlin Multiplatform project into a local package using the Swift package manager (SPM).</p><figure id="yhe4z5_4"><img alt="Direct integration diagram" src="images/direct-integration-scheme.svg" title="Direct integration diagram" width="700" height="173"></figure><p id="yhe4z5_5">To set up the integration, you'll add a special script that uses the <code class="code" id="yhe4z5_22">embedAndSignAppleFrameworkForXcode</code> Gradle task as a pre-action in your project's build settings. To see the changes made in common code reflected in your Xcode project, you'll only need to rebuild the Kotlin Multiplatform project.</p><p id="yhe4z5_6">This way, you can easily use Kotlin code in local Swift packages, compared to a regular direct integration method, that adds the script to the build phase and requires rebuilding both the Kotlin Multiplatform and the iOS project to get the changes from the common code.</p><aside class="prompt" data-type="tip" data-title="" id="yhe4z5_7"><p id="yhe4z5_23">If you aren't familiar with Kotlin Multiplatform, learn how to <a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-setup.html" id="yhe4z5_24" data-external="true" rel="noopener noreferrer" target="_blank">set up the environment</a> and <a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-create-first-app.html" id="yhe4z5_25" data-external="true" rel="noopener noreferrer" target="_blank">create a cross-platform application from scratch</a> first.</p></aside><section class="chapter"><h2 id="set-up-the-project" data-toc="set-up-the-project">Set up the project</h2><p id="yhe4z5_26">The feature is available starting with Kotlin 2.0.0.</p><aside class="prompt" data-type="tip" data-title="" id="yhe4z5_27"><p id="yhe4z5_31">To check the Kotlin version, navigate to the <code class="code" id="yhe4z5_33">build.gradle(.kts)</code> file in the root of your Kotlin Multiplatform project. You'll see the current version in the <code class="code" id="yhe4z5_34">plugins {}</code> block at the top of the file.</p><p id="yhe4z5_32">Alternatively, check the version catalog in the <code class="code" id="yhe4z5_35">gradle/libs.versions.toml</code> file.</p></aside><p id="yhe4z5_28">The tutorial assumes that your project is using <a href="multiplatform-direct-integration.html" id="yhe4z5_36" data-tooltip="You've already set up a Kotlin Multiplatform project targeting iOS on your local machine.">direct integration</a> approach with the <code class="code" id="yhe4z5_37">embedAndSignAppleFrameworkForXcode</code> task in the project's build phase. If you're connecting a Kotlin framework through CocoaPods plugin or through Swift package with <code class="code" id="yhe4z5_38">binaryTarget</code>, migrate first.</p><section class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="migrate-from-spm-binarytarget-integration" data-toc="migrate-from-spm-binarytarget-integration">Migrate from SPM binaryTarget integration</h3></div><div class="collapse__content"><p id="yhe4z5_39">To migrate from the SPM integration with <code class="code" id="yhe4z5_41">binaryTarget</code>:</p><ol class="list _decimal" id="yhe4z5_40" type="1"><li class="list__item" id="yhe4z5_42"><p id="yhe4z5_44">In Xcode, clean build directories using <span class="control" id="yhe4z5_45">Product</span> | <span class="control" id="yhe4z5_46">Clean Build Folder</span> or with the <kbd class="keystroke" id="yhe4z5_47" data-bypass="true"><span class="keystroke__value">Cmd + Shift + K</span></kbd> shortcut.</p></li><li class="list__item" id="yhe4z5_43"><p id="yhe4z5_48">In every <code class="code" id="yhe4z5_49">Package.swift</code> file, remove both dependencies to the package with a Kotlin framework inside and target dependencies to the products.</p></li></ol></div></div></section><section class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="migrate-from-the-cocoapods-plugin" data-toc="migrate-from-the-cocoapods-plugin">Migrate from the CocoaPods plugin</h3></div><div class="collapse__content"><aside class="prompt" data-type="warning" data-title="" id="yhe4z5_50"><p id="yhe4z5_53">If you have dependencies on other Pods in the <code class="code" id="yhe4z5_54">cocoapods {}</code> block, you have to resort to the CocoaPods integration approach. Currently, it's impossible to both have dependencies on Pods and on the Kotlin framework in a multimodal SPM project.</p></aside><p id="yhe4z5_51">To migrate from the CocoaPods plugin:</p><ol class="list _decimal" id="yhe4z5_52" type="1"><li class="list__item" id="yhe4z5_55"><p id="yhe4z5_59">In Xcode, clean build directories using <span class="control" id="yhe4z5_60">Product</span> | <span class="control" id="yhe4z5_61">Clean Build Folder</span> or with the <kbd class="keystroke" id="yhe4z5_62" data-bypass="true"><span class="keystroke__value">Cmd + Shift + K</span></kbd> shortcut.</p></li><li class="list__item" id="yhe4z5_56"><p id="yhe4z5_63">In the directory with <code class="code" id="yhe4z5_65">Podfile</code>, run the following command:</p><div class="code-block" data-lang="none">
pod deintegrate
</div></li><li class="list__item" id="yhe4z5_57"><p id="yhe4z5_66">Remove the <code class="code" id="yhe4z5_67">cocoapods {}</code> block from your <code class="code" id="yhe4z5_68">build.gradle(.kts)</code> files.</p></li><li class="list__item" id="yhe4z5_58"><p id="yhe4z5_69">Delete the <code class="code" id="yhe4z5_70">.podspec</code> and <code class="code" id="yhe4z5_71">Podfile</code> files.</p></li></ol></div></div></section></section><section class="chapter"><h2 id="connect-the-framework-to-your-project" data-toc="connect-the-framework-to-your-project">Connect the framework to your project</h2><aside class="prompt" data-type="note" data-title="" id="yhe4z5_72"><p id="yhe4z5_77">The integration into <code class="code" id="yhe4z5_78">swift build</code> is currently not supported.</p></aside><p id="yhe4z5_73">To be able to use Kotlin code in a local Swift package, connect the Kotlin framework generated from the multiplatform project to your Xcode project:</p><ol class="list _decimal" id="yhe4z5_74" type="1"><li class="list__item" id="yhe4z5_79"><p id="yhe4z5_86">In Xcode, go to <span class="control" id="yhe4z5_88">Product</span> | <span class="control" id="yhe4z5_89">Scheme</span> | <span class="control" id="yhe4z5_90">Edit scheme</span> or click the scheme icon in the top bar and select <span class="control" id="yhe4z5_91">Edit scheme</span>:</p><figure id="yhe4z5_87"><img alt="Edit scheme" src="images/xcode-edit-schemes.png" title="Edit scheme" width="700" height="350"></figure></li><li class="list__item" id="yhe4z5_80"><p id="yhe4z5_92">Select the <span class="control" id="yhe4z5_94">Build</span> | <span class="control" id="yhe4z5_95">Pre-actions</span> item, then click <span class="control" id="yhe4z5_96">+</span> | <span class="control" id="yhe4z5_97">New Run Script Action</span>:</p><figure id="yhe4z5_93"><img alt="New run script action" src="images/xcode-new-run-script-action.png" title="New run script action" width="700" height="378"></figure></li><li class="list__item" id="yhe4z5_81"><p id="yhe4z5_98">Adjust the following script and add it as an action:</p><div class="code-block" data-lang="bash">
cd &quot;&lt;Path to the root of the multiplatform project&gt;&quot;
./gradlew :&lt;Shared module name&gt;:embedAndSignAppleFrameworkForXcode 
</div><ul class="list _bullet" id="yhe4z5_100"><li class="list__item" id="yhe4z5_101"><p id="yhe4z5_103">In the <code class="code" id="yhe4z5_104">cd</code> command, specify the path to the root of your Kotlin Multiplatform project, for example, <code class="code" id="yhe4z5_105">$SRCROOT/..</code>.</p></li><li class="list__item" id="yhe4z5_102"><p id="yhe4z5_106">In the <code class="code" id="yhe4z5_107">./gradlew</code> command, specify the name of the shared module, for example, <code class="code" id="yhe4z5_108">:shared</code> or <code class="code" id="yhe4z5_109">:composeApp</code>.</p></li></ul></li><li class="list__item" id="yhe4z5_82"><p id="yhe4z5_110">Choose your app's target in the <span class="control" id="yhe4z5_112">Provide build settings from</span> section:</p><figure id="yhe4z5_111"><img alt="Filled run script action" src="images/xcode-filled-run-script-action.png" title="Filled run script action" width="700" height="376"></figure></li><li class="list__item" id="yhe4z5_83"><p id="yhe4z5_113">You can now import the shared module into your local Swift package and use Kotlin code.</p><p id="yhe4z5_114">In Xcode, navigate to your local Swift package and define a function with a module import, for example:</p><div class="code-block" data-lang="swift">
import Shared

public func greetingsFromSpmLocalPackage() -&gt; String {
    return Greeting.greet()
}
</div><figure id="yhe4z5_116"><img alt="SPM usage" src="images/xcode-spm-usage.png" title="SPM usage" width="700" height="198"></figure></li><li class="list__item" id="yhe4z5_84"><p id="yhe4z5_117">In the <code class="code" id="yhe4z5_119">ContentView.swift</code> file of your iOS project, you can now use this function by importing the local package:</p><div class="code-block" data-lang="swift">
import SwiftUI
import SpmLocalPackage

struct ContentView: View {
    var body: some View {
        Vstack {
            Image(systemName: &quot;globe&quot;)
                .imageScale(.large)
                .foregroundStyle(.tint)
            Text(greetingsFromSpmLocalPackage())
        }
        .padding()
    }
}

#Preview {
    ContentView()
}
</div></li><li class="list__item" id="yhe4z5_85"><p id="yhe4z5_120">Build the project in Xcode. If everything is set up correctly, the project build will be successful.</p></li></ol><p id="yhe4z5_75">There are a couple more factors worth considering:</p><ul class="list _bullet" id="yhe4z5_76"><li class="list__item" id="yhe4z5_121"><p id="yhe4z5_123">If you have a custom build configuration that is different from the default <code class="code" id="yhe4z5_124">Debug</code> or <code class="code" id="yhe4z5_125">Release</code>, on the <span class="control" id="yhe4z5_126">Build Settings</span> tab, add the <code class="code" id="yhe4z5_127">KOTLIN_FRAMEWORK_BUILD_TYPE</code> setting under <span class="control" id="yhe4z5_128">User-Defined</span> and set it to <code class="code" id="yhe4z5_129">Debug</code> or <code class="code" id="yhe4z5_130">Release</code>.</p></li><li class="list__item" id="yhe4z5_122"><p id="yhe4z5_131">If you encounter an error with script sandboxing, open the iOS project settings by double-clicking the project name, then on the <span class="control" id="yhe4z5_132">Build Settings</span> tab, disable the <span class="control" id="yhe4z5_133">User Script Sandboxing</span> under <span class="control" id="yhe4z5_134">Build Options</span>.</p></li></ul></section><section class="chapter"><h2 id="what-s-next" data-toc="what-s-next">What's next</h2><ul class="list _bullet" id="yhe4z5_135"><li class="list__item" id="yhe4z5_136"><p id="yhe4z5_138"><a href="multiplatform-ios-integration-overview.html" id="yhe4z5_139" data-tooltip="You can integrate a Kotlin Multiplatform shared module into your iOS app. For that, you generate an iOS framework from the shared module and then add it as a dependency to the iOS project:">Choose your integration method</a></p></li><li class="list__item" id="yhe4z5_137"><p id="yhe4z5_140"><a href="native-spm.html" id="yhe4z5_141" data-tooltip="You want to separate the codebase of your final application from the common codebase.">Learn how to set up Swift package export</a></p></li></ul></section><div class="last-modified">21 April 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="native-cocoapods-dsl-reference.html" class="navigation-links__prev">CocoaPods Gradle plugin DSL reference</a><a href="multiplatform-configure-compilations.html" class="navigation-links__next">Configure compilations</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="frontend/app.js"></script></body></html>
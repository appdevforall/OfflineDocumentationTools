<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-04-23T13:00:01.138560918"><title>Definition file | Kotlin</title><script type="application/json" id="virtual-toc-data">[{"id":"create-and-configure-a-definition-file","level":0,"title":"Create and configure a definition file","anchor":"#create-and-configure-a-definition-file"},{"id":"properties","level":0,"title":"Properties","anchor":"#properties"},{"id":"import-headers","level":1,"title":"Import headers","anchor":"#import-headers"},{"id":"import-modules","level":1,"title":"Import modules","anchor":"#import-modules"},{"id":"pass-compiler-and-linker-options","level":1,"title":"Pass compiler and linker options","anchor":"#pass-compiler-and-linker-options"},{"id":"ignore-specific-functions","level":1,"title":"Ignore specific functions","anchor":"#ignore-specific-functions"},{"id":"include-a-static-library","level":1,"title":"Include a static library","anchor":"#include-a-static-library"},{"id":"configure-enums-generation","level":1,"title":"Configure enums generation","anchor":"#configure-enums-generation"},{"id":"set-up-string-conversion","level":1,"title":"Set up string conversion","anchor":"#set-up-string-conversion"},{"id":"allow-calling-a-non-designated-initializer","level":1,"title":"Allow calling a non-designated initializer","anchor":"#allow-calling-a-non-designated-initializer"},{"id":"handle-objective-c-exceptions","level":1,"title":"Handle Objective-C exceptions","anchor":"#handle-objective-c-exceptions"},{"id":"add-custom-declarations","level":1,"title":"Add custom declarations","anchor":"#add-custom-declarations"},{"id":"generate-bindings-using-command-line","level":0,"title":"Generate bindings using command line","anchor":"#generate-bindings-using-command-line"},{"id":"what-s-next","level":0,"title":"What\u0027s next","anchor":"#what-s-next"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="frontend/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="icon" type="image/png" sizes="32x32" href="writerside_32.png"><link rel="icon" type="image/png" sizes="64x64" href="writerside_64.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Definition file | Kotlin"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Kotlin Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/native-definition-file.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Definition file | Kotlin"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/native-definition-file.html#webpage",
    "url": "writerside-documentation/native-definition-file.html",
    "name": "Definition file | Kotlin",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Kotlin Help"
}</script><!-- End Schema.org --></head><body data-id="native-definition-file" data-main-title="Definition file" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Platforms///Native"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Kotlin  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="native-definition-file" id="native-definition-file.md">Definition file</h1><p id="-n3tgb_2">Kotlin/Native enables you to consume C and Objective-C libraries, allowing you to use their functionality in Kotlin. A special tool called cinterop takes a C or an Objective-C library and generates the corresponding Kotlin bindings, so that the library's methods can be used in your Kotlin code as usual.</p><p id="-n3tgb_3">To generate these bindings, each library needs a definition file, usually with the same name as the library. This is a property file that describes exactly how the library should be consumed. See the full <a href="#properties" id="-n3tgb_10" data-tooltip="Here's the full list of properties you can use in your definition file to adjust the content of the generated binaries. For more information, see the corresponding sections below.">list of available properties</a>.</p><p id="-n3tgb_4">Here's a general workflow when working with a project:</p><ol class="list _decimal" id="-n3tgb_5" type="1"><li class="list__item" id="-n3tgb_11"><p id="-n3tgb_14">Create a <code class="code" id="-n3tgb_15">.def</code> file describing what to include in the bindings.</p></li><li class="list__item" id="-n3tgb_12"><p id="-n3tgb_16">Use the generated bindings in your Kotlin code.</p></li><li class="list__item" id="-n3tgb_13"><p id="-n3tgb_17">Run the Kotlin/Native compiler to produce the final executable.</p></li></ol><section class="chapter"><h2 id="create-and-configure-a-definition-file" data-toc="create-and-configure-a-definition-file">Create and configure a definition file</h2><p id="-n3tgb_18">Let's create a definition file and generate bindings for a C library:</p><ol class="list _decimal" id="-n3tgb_19" type="1"><li class="list__item" id="-n3tgb_22"><p id="-n3tgb_27">In your IDE, select the <code class="code" id="-n3tgb_28">src</code> folder and create a new directory with <span class="control" id="-n3tgb_29">File | New | Directory</span>.</p></li><li class="list__item" id="-n3tgb_23"><p id="-n3tgb_30">Name the new directory <code class="code" id="-n3tgb_32">nativeInterop/cinterop</code>.</p><p id="-n3tgb_31">This is the default convention for <code class="code" id="-n3tgb_33">.def</code> file locations, but it can be overridden in the <code class="code" id="-n3tgb_34">build.gradle.kts</code> file if you use a different location.</p></li><li class="list__item" id="-n3tgb_24"><p id="-n3tgb_35">Select the new subfolder and create a <code class="code" id="-n3tgb_36">png.def</code> file with <span class="control" id="-n3tgb_37">File | New | File</span>.</p></li><li class="list__item" id="-n3tgb_25"><p id="-n3tgb_38">Add the necessary properties:</p><div class="code-block" data-lang="none">
headers = png.h
headerFilter = png.h
package = png

compilerOpts.linux = -I/usr/include -I/usr/include/x86_64-linux-gnu
linkerOpts.osx = -L/opt/local/lib -L/usr/local/opt/png/lib -lpng
linkerOpts.linux = -L/usr/lib/x86_64-linux-gnu -lpng
</div><ul class="list _bullet" id="-n3tgb_40"><li class="list__item" id="-n3tgb_41"><p id="-n3tgb_44"><code class="code" id="-n3tgb_45">headers</code> is the list of header files to generate Kotlin stubs for. You can add multiple files to this entry, separating each with a space. In this case, it's only <code class="code" id="-n3tgb_46">png.h</code>. The referenced files need to be available on the specified path (in this case, it's <code class="code" id="-n3tgb_47">/usr/include/png</code>).</p></li><li class="list__item" id="-n3tgb_42"><p id="-n3tgb_48"><code class="code" id="-n3tgb_50">headerFilter</code> shows what exactly is included. In C, all the headers are also included when one file references another one with the <code class="code" id="-n3tgb_51">#include</code> directive. Sometimes it's not necessary, and you can add this parameter <a href="https://en.wikipedia.org/wiki/Glob_(programming)" id="-n3tgb_52" data-external="true" rel="noopener noreferrer" target="_blank">using glob patterns</a> to make adjustments.</p><p id="-n3tgb_49">You can use <code class="code" id="-n3tgb_53">headerFilter</code> if you don't want to fetch external dependencies (such as system <code class="code" id="-n3tgb_54">stdint.h</code> header) into the interop library. Also, it may be useful for library size optimization and fixing potential conflicts between the system and the provided Kotlin/Native compilation environment.</p></li><li class="list__item" id="-n3tgb_43"><p id="-n3tgb_55">If the behavior for a certain platform needs to be modified, you can use a format like <code class="code" id="-n3tgb_56">compilerOpts.osx</code> or <code class="code" id="-n3tgb_57">compilerOpts.linux</code> to provide platform-specific values to the options. In this case, they are macOS (the <code class="code" id="-n3tgb_58">.osx</code> suffix) and Linux (the <code class="code" id="-n3tgb_59">.linux</code> suffix). Parameters without a suffix are also possible (for example, <code class="code" id="-n3tgb_60">linkerOpts=</code>) and applied to all platforms.</p></li></ul></li><li class="list__item" id="-n3tgb_26"><p id="-n3tgb_61">To generate bindings, synchronize the Gradle files by clicking <span class="control" id="-n3tgb_63">Sync Now</span> in the notification.</p><figure id="-n3tgb_62"><img alt="Synchronize the Gradle files" src="images/gradle-sync.png" title="Synchronize the Gradle files" width="1570" height="78"></figure></li></ol><p id="-n3tgb_20">After the bindings generation, the IDE can use them as a proxy view of the native library.</p><aside class="prompt" data-type="tip" data-title="" id="-n3tgb_21"><p id="-n3tgb_64">You can also configure bindings generation by using the <a href="#generate-bindings-using-command-line" id="-n3tgb_65" data-tooltip="In addition to the definition file, you can specify what to include in bindings by passing the corresponding properties as options in the cinterop call.">cinterop tool</a> in the command line.</p></aside></section><section class="chapter"><h2 id="properties" data-toc="properties">Properties</h2><p id="-n3tgb_66">Here's the full list of properties you can use in your definition file to adjust the content of the generated binaries. For more information, see the corresponding sections below.</p><div class="table-wrapper"><table class="wide" id="-n3tgb_67"><thead><tr class="ijRowHead" id="-n3tgb_79"><th id="-n3tgb_99"><p><span class="control" id="-n3tgb_101">Property</span></p></th><th id="-n3tgb_100"><p><span class="control" id="-n3tgb_102">Description</span></p></th></tr></thead><tbody><tr id="-n3tgb_80"><td id="-n3tgb_103"><p><a href="#import-headers" id="-n3tgb_105" data-tooltip="If a C library does not have a Clang module and instead consists of a set of headers, use the headers property to specify headers that should be imported:"><code class="code" id="-n3tgb_106">headers</code></a></p></td><td id="-n3tgb_104"><p>The list of headers from a library to be included in the bindings.</p></td></tr><tr id="-n3tgb_81"><td id="-n3tgb_107"><p><a href="#import-modules" id="-n3tgb_109" data-tooltip="If an Objective-C library has a Clang module, use the modules property to specify the module to be imported:"><code class="code" id="-n3tgb_110">modules</code></a></p></td><td id="-n3tgb_108"><p>The list of Clang modules from an Objective-C library to be included in the bindings.</p></td></tr><tr id="-n3tgb_82"><td id="-n3tgb_111"><p><code class="code" id="-n3tgb_113">language</code></p></td><td id="-n3tgb_112"><p>Specifies the language. C is used by default; change to <code class="code" id="-n3tgb_114">Objective-C</code> if necessary.</p></td></tr><tr id="-n3tgb_83"><td id="-n3tgb_115"><p><a href="#pass-compiler-and-linker-options" id="-n3tgb_117" data-tooltip="Use the compilerOpts property to pass options to the C compiler, which is used to analyze headers under the hood. To pass options to the linker, which is used to link final executables, use linkerOpts. For example:"><code class="code" id="-n3tgb_118">compilerOpts</code></a></p></td><td id="-n3tgb_116"><p>Compiler options that the cinterop tool passes to the C compiler.</p></td></tr><tr id="-n3tgb_84"><td id="-n3tgb_119"><p><a href="#pass-compiler-and-linker-options" id="-n3tgb_121" data-tooltip="Use the compilerOpts property to pass options to the C compiler, which is used to analyze headers under the hood. To pass options to the linker, which is used to link final executables, use linkerOpts. For example:"><code class="code" id="-n3tgb_122">linkerOpts</code></a></p></td><td id="-n3tgb_120"><p>Linker options that the cinterop tool passes to the linker.</p></td></tr><tr id="-n3tgb_85"><td id="-n3tgb_123"><p><a href="#ignore-specific-functions" id="-n3tgb_125" data-tooltip="Use the excludedFunctions property to specify a list of the function names that should be ignored. This can be useful if a function declared in the header isn't guaranteed to be callable, and it's difficult or impossible to determine this automatically. You can also use this…"><code class="code" id="-n3tgb_126">excludedFunctions</code></a></p></td><td id="-n3tgb_124"><p>A space-separated list of function names that should be ignored.</p></td></tr><tr id="-n3tgb_86"><td id="-n3tgb_127"><p><code class="code" id="-n3tgb_129">excludedMacros</code></p></td><td id="-n3tgb_128"></td></tr><tr id="-n3tgb_87"><td id="-n3tgb_130"><p><a href="#include-a-static-library" id="-n3tgb_132" data-tooltip="This feature is Experimental. It may be dropped or changed at any time. Use it only for evaluation purposes."><code class="code" id="-n3tgb_133">staticLibraries</code></a></p></td><td id="-n3tgb_131"><p><a href="components-stability.html#stability-levels-explained" id="-n3tgb_134" data-tooltip="Here's a quick guide to these stability levels and their meaning:">Experimental</a>. Includes a static library into <code class="code" id="-n3tgb_135">.klib</code>.</p></td></tr><tr id="-n3tgb_88"><td id="-n3tgb_136"><p><a href="#include-a-static-library" id="-n3tgb_138" data-tooltip="This feature is Experimental. It may be dropped or changed at any time. Use it only for evaluation purposes."><code class="code" id="-n3tgb_139">libraryPaths</code></a></p></td><td id="-n3tgb_137"><p><a href="components-stability.html#stability-levels-explained" id="-n3tgb_140" data-tooltip="Here's a quick guide to these stability levels and their meaning:">Experimental</a>. A space-separated list of directories where the cinterop tool searches for the library to be included in <code class="code" id="-n3tgb_141">.klib</code>.</p></td></tr><tr id="-n3tgb_89"><td id="-n3tgb_142"><p><code class="code" id="-n3tgb_144">packageName</code></p></td><td id="-n3tgb_143"><p>Package prefix for the generated Kotlin API.</p></td></tr><tr id="-n3tgb_90"><td id="-n3tgb_145"><p><a href="#filter-headers-by-globs" id="-n3tgb_147" data-tooltip="You can filter headers by globs using filter properties from the .def file. To include declarations from headers, use the headerFilter property. If a header matches any of the globs, its declarations are included in the bindings."><code class="code" id="-n3tgb_148">headerFilter</code></a></p></td><td id="-n3tgb_146"><p>Filters headers by globs and includes only them when importing a library.</p></td></tr><tr id="-n3tgb_91"><td id="-n3tgb_149"><p><a href="#exclude-headers" id="-n3tgb_151" data-tooltip="To exclude specific headers, use the excludeFilter property. It can be helpful to remove redundant or problematic headers and optimize compilation, as declarations from the specified headers are not included in the bindings:"><code class="code" id="-n3tgb_152">excludeFilter</code></a></p></td><td id="-n3tgb_150"><p>Excludes specific headers when importing a library and takes priority over <code class="code" id="-n3tgb_153">headerFilter</code>.</p></td></tr><tr id="-n3tgb_92"><td id="-n3tgb_154"><p><a href="#configure-enums-generation" id="-n3tgb_156" data-tooltip="Use the strictEnums property to generate enums as Kotlin enums or nonStrictEnums to generate them as integral values. If an enum is not included in either of these lists, it is generated based on heuristics."><code class="code" id="-n3tgb_157">strictEnums</code></a></p></td><td id="-n3tgb_155"><p>A space-separated list of enums that should be generated as <a href="enum-classes.html" id="-n3tgb_158" data-tooltip="The most basic use case for enum classes is the implementation of type-safe enums:">Kotlin enums</a>.</p></td></tr><tr id="-n3tgb_93"><td id="-n3tgb_159"><p><a href="#configure-enums-generation" id="-n3tgb_161" data-tooltip="Use the strictEnums property to generate enums as Kotlin enums or nonStrictEnums to generate them as integral values. If an enum is not included in either of these lists, it is generated based on heuristics."><code class="code" id="-n3tgb_162">nonStrictEnums</code></a></p></td><td id="-n3tgb_160"><p>A space-separated list of enums that should be generated as integral values.</p></td></tr><tr id="-n3tgb_94"><td id="-n3tgb_163"><p><a href="#set-up-string-conversion" id="-n3tgb_165" data-tooltip="Use the noStringConversion property to disable automatic conversion of the const char* function parameters as Kotlin Strings."><code class="code" id="-n3tgb_166">noStringConversion</code></a></p></td><td id="-n3tgb_164"><p>A space-separated list of functions whose <code class="code" id="-n3tgb_167">const char*</code> parameters should not be auto-converted to Kotlin <code class="code" id="-n3tgb_168">String</code>s.</p></td></tr><tr id="-n3tgb_95"><td id="-n3tgb_169"><p><code class="code" id="-n3tgb_171">allowedOverloadsForCFunctions</code></p></td><td id="-n3tgb_170"><p>By default, it's assumed that C functions have unique names. If several functions have the same name, only one is picked. However, you can change this by specifying these functions in <code class="code" id="-n3tgb_172">allowedOverloadsForCFunctions</code>.</p></td></tr><tr id="-n3tgb_96"><td id="-n3tgb_173"><p><a href="#allow-calling-a-non-designated-initializer" id="-n3tgb_175" data-tooltip="By default, the Kotlin/Native compiler doesn't allow calling a non-designated Objective-C initializer as a super() constructor. This behavior can be inconvenient if the designated Objective-C initializers aren't marked properly in the library. To disable these compiler checks, use…"><code class="code" id="-n3tgb_176">disableDesignatedInitializerChecks</code></a></p></td><td id="-n3tgb_174"><p>Disables the compiler check that doesn't allow calling a non-designated Objective-C initializer as a <code class="code" id="-n3tgb_177">super()</code> constructor.</p></td></tr><tr id="-n3tgb_97"><td id="-n3tgb_178"><p><a href="#handle-objective-c-exceptions" id="-n3tgb_180" data-tooltip="By default, the program crashes if Objective-C exceptions reach the Objective-C to Kotlin interop boundary and get to the Kotlin code."><code class="code" id="-n3tgb_181">foreignExceptionMode</code></a></p></td><td id="-n3tgb_179"><p>Wraps exceptions from Objective-C code into Kotlin exceptions with the <code class="code" id="-n3tgb_182">ForeignException</code> type.</p></td></tr><tr id="-n3tgb_98"><td id="-n3tgb_183"><p><a href="#help-resolve-linker-errors" id="-n3tgb_185" data-tooltip="Linker errors might occur when a Kotlin library depends on C or Objective-C libraries, for example, using the CocoaPods integration. If dependent libraries aren't installed locally on the machine or configured explicitly in the project build script, the &quot;Framework not…"><code class="code" id="-n3tgb_186">userSetupHint</code></a></p></td><td id="-n3tgb_184"><p>Adds a custom message, for example, to help users resolve linker errors.</p></td></tr></tbody></table></div><p id="-n3tgb_68">In addition to the list of properties, you can include <a href="#add-custom-declarations" id="-n3tgb_187" data-tooltip="Sometimes it is required to add custom C declarations to the library before generating bindings (for example, for macros). Instead of creating an additional header file with these declarations, you can include them directly to the end of the .def file, after a separating line,…">custom declarations</a> in your definition file.</p><section class="chapter"><h3 id="import-headers" data-toc="import-headers">Import headers</h3><p id="-n3tgb_188">If a C library does not have a Clang module and instead consists of a set of headers, use the <code class="code" id="-n3tgb_192">headers</code> property to specify headers that should be imported:</p><div class="code-block" data-lang="none">
headers = curl/curl.h
</div><section class="chapter"><h4 id="filter-headers-by-globs" data-toc="filter-headers-by-globs">Filter headers by globs</h4><p id="-n3tgb_193">You can filter headers by globs using filter properties from the <code class="code" id="-n3tgb_197">.def</code> file. To include declarations from headers, use the <code class="code" id="-n3tgb_198">headerFilter</code> property. If a header matches any of the globs, its declarations are included in the bindings.</p><p id="-n3tgb_194">The globs are applied to the header paths relative to the appropriate include path elements, for example, <code class="code" id="-n3tgb_199">time.h</code> or <code class="code" id="-n3tgb_200">curl/curl.h</code>. So if the library is usually included with <code class="code" id="-n3tgb_201">#include &lt;SomeLibrary/Header.h&gt;</code>, you can probably filter headers with the following filter:</p><div class="code-block" data-lang="none">
headerFilter = SomeLibrary/**
</div><p id="-n3tgb_196">If <code class="code" id="-n3tgb_202">headerFilter</code> is not provided, all the headers are included. However, we encourage you to use <code class="code" id="-n3tgb_203">headerFilter</code> and specify the glob as precisely as possible. In this case, the generated library contains only the necessary declarations. It can help avoid various issues when upgrading Kotlin or tools in your development environment.</p></section><section class="chapter"><h4 id="exclude-headers" data-toc="exclude-headers">Exclude headers</h4><p id="-n3tgb_204">To exclude specific headers, use the <code class="code" id="-n3tgb_207">excludeFilter</code> property. It can be helpful to remove redundant or problematic headers and optimize compilation, as declarations from the specified headers are not included in the bindings:</p><div class="code-block" data-lang="none">
excludeFilter = SomeLibrary/time.h
</div><aside class="prompt" data-type="note" data-title="" id="-n3tgb_206"><p id="-n3tgb_208">If the same header is both included with <code class="code" id="-n3tgb_209">headerFilter</code>, and excluded with <code class="code" id="-n3tgb_210">excludeFilter</code>, the specified header will not be included in the bindings.</p></aside></section></section><section class="chapter"><h3 id="import-modules" data-toc="import-modules">Import modules</h3><p id="-n3tgb_211">If an Objective-C library has a Clang module, use the <code class="code" id="-n3tgb_213">modules</code> property to specify the module to be imported:</p><div class="code-block" data-lang="none">
modules = UIKit
</div></section><section class="chapter"><h3 id="pass-compiler-and-linker-options" data-toc="pass-compiler-and-linker-options">Pass compiler and linker options</h3><p id="-n3tgb_214">Use the <code class="code" id="-n3tgb_219">compilerOpts</code> property to pass options to the C compiler, which is used to analyze headers under the hood. To pass options to the linker, which is used to link final executables, use <code class="code" id="-n3tgb_220">linkerOpts</code>. For example:</p><div class="code-block" data-lang="none">
compilerOpts = -DFOO=bar
linkerOpts = -lpng
</div><p id="-n3tgb_216">You can also specify target-specific options that apply only to a certain target:</p><div class="code-block" data-lang="none">
compilerOpts = -DBAR=bar
compilerOpts.linux_x64 = -DFOO=foo1
compilerOpts.macos_x64 = -DFOO=foo2
</div><p id="-n3tgb_218">With this configuration, headers are analyzed using <code class="code" id="-n3tgb_221">-DBAR=bar -DFOO=foo1</code> on Linux and <code class="code" id="-n3tgb_222">-DBAR=bar -DFOO=foo2</code> on macOS. Note that any definition file option can have both common and platform-specific parts.</p></section><section class="chapter"><h3 id="ignore-specific-functions" data-toc="ignore-specific-functions">Ignore specific functions</h3><p id="-n3tgb_223">Use the <code class="code" id="-n3tgb_224">excludedFunctions</code> property to specify a list of the function names that should be ignored. This can be useful if a function declared in the header isn't guaranteed to be callable, and it's difficult or impossible to determine this automatically. You can also use this property to work around a bug in the interop itself.</p></section><section class="chapter"><h3 id="include-a-static-library" data-toc="include-a-static-library">Include a static library</h3><aside class="prompt" data-type="warning" data-title="" id="-n3tgb_225"><p id="-n3tgb_230">This feature is <a href="components-stability.html#stability-levels-explained" id="-n3tgb_231" data-tooltip="Here's a quick guide to these stability levels and their meaning:">Experimental</a>. It may be dropped or changed at any time. Use it only for evaluation purposes.</p></aside><p id="-n3tgb_226">Sometimes it's more convenient to ship a static library with your product, rather than assume it is available within the user's environment. To include a static library into <code class="code" id="-n3tgb_232">.klib</code>, use <code class="code" id="-n3tgb_233">staticLibrary</code> and <code class="code" id="-n3tgb_234">libraryPaths</code> properties:</p><div class="code-block" data-lang="none">
headers = foo.h
staticLibraries = libfoo.a
libraryPaths = /opt/local/lib /usr/local/opt/curl/lib
</div><p id="-n3tgb_228">When given the above snippet, the cinterop tool searches <code class="code" id="-n3tgb_235">libfoo.a</code> in <code class="code" id="-n3tgb_236">/opt/local/lib</code> and <code class="code" id="-n3tgb_237">/usr/local/opt/curl/lib</code>, and if found, includes the library binary in the <code class="code" id="-n3tgb_238">klib</code>.</p><p id="-n3tgb_229">When using a <code class="code" id="-n3tgb_239">klib</code> like this in your program, the library is linked automatically.</p></section><section class="chapter"><h3 id="configure-enums-generation" data-toc="configure-enums-generation">Configure enums generation</h3><p id="-n3tgb_240">Use the <code class="code" id="-n3tgb_241">strictEnums</code> property to generate enums as Kotlin enums or <code class="code" id="-n3tgb_242">nonStrictEnums</code> to generate them as integral values. If an enum is not included in either of these lists, it is generated based on heuristics.</p></section><section class="chapter"><h3 id="set-up-string-conversion" data-toc="set-up-string-conversion">Set up string conversion</h3><p id="-n3tgb_243">Use the <code class="code" id="-n3tgb_244">noStringConversion</code> property to disable automatic conversion of the <code class="code" id="-n3tgb_245">const char*</code> function parameters as Kotlin <code class="code" id="-n3tgb_246">String</code>s.</p></section><section class="chapter"><h3 id="allow-calling-a-non-designated-initializer" data-toc="allow-calling-a-non-designated-initializer">Allow calling a non-designated initializer</h3><p id="-n3tgb_247">By default, the Kotlin/Native compiler doesn't allow calling a non-designated Objective-C initializer as a <code class="code" id="-n3tgb_248">super()</code> constructor. This behavior can be inconvenient if the designated Objective-C initializers aren't marked properly in the library. To disable these compiler checks, use the <code class="code" id="-n3tgb_249">disableDesignatedInitializerChecks</code> property.</p></section><section class="chapter"><h3 id="handle-objective-c-exceptions" data-toc="handle-objective-c-exceptions">Handle Objective-C exceptions</h3><p id="-n3tgb_250">By default, the program crashes if Objective-C exceptions reach the Objective-C to Kotlin interop boundary and get to the Kotlin code.</p><p id="-n3tgb_251">To propagate Objective-C exceptions to Kotlin, enable wrapping with the <code class="code" id="-n3tgb_253">foreignExceptionMode = objc-wrap</code> property. In this case, Objective-C exceptions are translated into Kotlin exceptions that get the <code class="code" id="-n3tgb_254">ForeignException</code> type.</p><section class="chapter"><h4 id="help-resolve-linker-errors" data-toc="help-resolve-linker-errors">Help resolve linker errors</h4><p id="-n3tgb_255">Linker errors might occur when a Kotlin library depends on C or Objective-C libraries, for example, using the <a href="native-cocoapods.html" id="-n3tgb_257" data-tooltip="You have a mono repository setup with an iOS project that uses CocoaPods.">CocoaPods integration</a>. If dependent libraries aren't installed locally on the machine or configured explicitly in the project build script, the &quot;Framework not found&quot; error occurs.</p><p id="-n3tgb_256">If you're a library author, you can help your users resolve linker errors with custom messages. To do that, add a <code class="code" id="-n3tgb_258">userSetupHint=message</code> property to your <code class="code" id="-n3tgb_259">.def</code> file or pass the <code class="code" id="-n3tgb_260">-Xuser-setup-hint</code> compiler option to <code class="code" id="-n3tgb_261">cinterop</code>.</p></section></section><section class="chapter"><h3 id="add-custom-declarations" data-toc="add-custom-declarations">Add custom declarations</h3><p id="-n3tgb_262">Sometimes it is required to add custom C declarations to the library before generating bindings (for example, for <a href="native-c-interop.html#macros" id="-n3tgb_265" data-tooltip="Every C macro that expands to a constant is represented as a Kotlin property.">macros</a>). Instead of creating an additional header file with these declarations, you can include them directly to the end of the <code class="code" id="-n3tgb_266">.def</code> file, after a separating line, containing only the separator sequence <code class="code" id="-n3tgb_267">---</code>:</p><div class="code-block" data-lang="none">
headers = errno.h
---

static inline int getErrno() {
    return errno;
}
</div><p id="-n3tgb_264">Note that this part of the <code class="code" id="-n3tgb_268">.def</code> file is treated as part of the header file, so functions with the body should be declared as <code class="code" id="-n3tgb_269">static</code>. The declarations are parsed after including the files from the <code class="code" id="-n3tgb_270">headers</code> list.</p></section></section><section class="chapter"><h2 id="generate-bindings-using-command-line" data-toc="generate-bindings-using-command-line">Generate bindings using command line</h2><p id="-n3tgb_271">In addition to the definition file, you can specify what to include in bindings by passing the corresponding properties as options in the <code class="code" id="-n3tgb_276">cinterop</code> call.</p><p id="-n3tgb_272">Here's an example of the command that produces a <code class="code" id="-n3tgb_277">png.klib</code> compiled library:</p><div class="code-block" data-lang="bash">
cinterop -def png.def -compiler-option -I/usr/local/include -o png
</div><p id="-n3tgb_274">Note that the generated bindings are generally platform-specific, so if you are developing for multiple targets, the bindings need to be regenerated.</p><ul class="list _bullet" id="-n3tgb_275"><li class="list__item" id="-n3tgb_278"><p id="-n3tgb_281">For host libraries that are not included in the sysroot search paths, headers may be needed.</p></li><li class="list__item" id="-n3tgb_279"><p id="-n3tgb_282">For a typical UNIX library with a configuration script, the <code class="code" id="-n3tgb_283">compilerOpts</code> will likely contain the output of a configuration script with the <code class="code" id="-n3tgb_284">--cflags</code> option (maybe without exact paths).</p></li><li class="list__item" id="-n3tgb_280"><p id="-n3tgb_285">The output of a configuration script with <code class="code" id="-n3tgb_286">--libs</code> can be passed to the <code class="code" id="-n3tgb_287">linkerOpts</code> property.</p></li></ul></section><section class="chapter"><h2 id="what-s-next" data-toc="what-s-next">What's next</h2><ul class="list _bullet" id="-n3tgb_288"><li class="list__item" id="-n3tgb_289"><p id="-n3tgb_291"><a href="native-c-interop.html#bindings" id="-n3tgb_292" data-tooltip="All the supported C types have corresponding representations in Kotlin:">Bindings for C-interoperability</a></p></li><li class="list__item" id="-n3tgb_290"><p id="-n3tgb_293"><a href="native-objc-interop.html" id="-n3tgb_294" data-tooltip="The Objective-C libraries import is Experimental. All Kotlin declarations generated by the cinterop tool from Objective-C libraries should have the @ExperimentalForeignApi annotation.">Interoperability with Swift/Objective-C</a></p></li></ul></section><div class="last-modified">21 April 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="native-get-started.html" class="navigation-links__prev">Get started with Kotlin/Native</a><a href="native-c-interop.html" class="navigation-links__next">Interoperability with C</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="frontend/app.js"></script></body></html>
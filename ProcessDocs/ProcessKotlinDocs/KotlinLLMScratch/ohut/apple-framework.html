<html>
 <head>
  <meta charset="utf-8"/>
  <title>
   Kotlin Documentation
  </title>
  <link href="style.css" rel="stylesheet"/>
 </head>
 <body>
  <div style="text-align: center; margin-bottom: 1em;">
   <a href="toc.html" style="font-size: 24px; text-decoration: none;">
    Menu
   </a>
  </div>
  <article class="article" data-shortcut-switcher="inactive">
   <h1 data-toc="apple-framework" id="apple-framework.md">
    Kotlin/Native as an Apple framework – tutorial
   </h1>
   <aside class="prompt" data-title="" data-type="warning" id="arhcs9_2">
    <p id="arhcs9_16">
     The Objective-C libraries import is
     <a data-tooltip="Here's a quick guide to these stability levels and their meaning:" href="components-stability.html#stability-levels-explained" id="arhcs9_18" style="color: blue;">
      Experimental
     </a>
     . All Kotlin declarations generated by the cinterop tool from Objective-C libraries should have the
     <code class="code" id="arhcs9_19">
      @ExperimentalForeignApi
     </code>
     annotation.
    </p>
    <p id="arhcs9_17">
     Native platform libraries shipped with Kotlin/Native (like Foundation, UIKit, and POSIX) require opt-in only for some APIs.
    </p>
   </aside>
   <p id="arhcs9_3">
    Kotlin/Native provides bidirectional interoperability with Swift/Objective-C. You can both use Objective-C frameworks and libraries in Kotlin code, and Kotlin modules in Swift/Objective-C code.
   </p>
   <p id="arhcs9_4">
    Kotlin/Native comes with a set of pre-imported system frameworks; it's also possible to import an existing framework and use it from Kotlin. In this tutorial, you'll learn how to create your own framework and use Kotlin/Native code from Swift/Objective-C applications on macOS and iOS.
   </p>
   <p id="arhcs9_5">
    In this tutorial, you will:
   </p>
   <ul class="list _bullet" id="arhcs9_6">
    <li class="list__item" id="arhcs9_20">
     <p id="arhcs9_24">
      <a data-tooltip="See the Get started with Kotlin/Native tutorial for detailed first steps and instructions on how to create a new Kotlin/Native project and open it in IntelliJ IDEA." href="#create-a-kotlin-library" id="arhcs9_25" style="color: blue;">
       Create a Kotlin library and compile it to a framework
      </a>
     </p>
    </li>
    <li class="list__item" id="arhcs9_21">
     <p id="arhcs9_26">
      <a data-tooltip="Each framework variant contains a header file. The headers don't depend on the target platform. Header files contain definitions for your Kotlin code and a few Kotlin-wide declarations. Let's see what's inside." href="#generated-framework-headers" id="arhcs9_27" style="color: blue;">
       Examine the generated Swift/Objective-C API code
      </a>
     </p>
    </li>
    <li class="list__item" id="arhcs9_22">
     <p id="arhcs9_28">
      <a data-tooltip="Let's call the framework from Objective-C. In the framework directory, create the main.m file with the following code:" href="#use-code-from-objective-c" id="arhcs9_29" style="color: blue;">
       Use the framework from Objective-C
      </a>
     </p>
    </li>
    <li class="list__item" id="arhcs9_23">
     <p id="arhcs9_30">
      <a data-tooltip="The framework you generated has helper attributes to make it easier to use with Swift. Let's convert the previous Objective-C example into Swift." href="#use-code-from-swift" id="arhcs9_31" style="color: blue;">
       Use the framework from Swift
      </a>
     </p>
    </li>
   </ul>
   <p id="arhcs9_7">
    You can use the command line to generate a Kotlin framework, either directly or with a script file (such as
    <code class="code" id="arhcs9_32">
     .sh
    </code>
    or
    <code class="code" id="arhcs9_33">
     .bat
    </code>
    file). However, this approach doesn't scale well for larger projects that have hundreds of files and libraries. Using a build system simplifies the process by downloading and caching the Kotlin/Native compiler binaries and libraries with transitive dependencies, as well as by running the compiler and tests. Kotlin/Native can use the
    <a data-external="true" href="https://gradle.org" id="arhcs9_34" rel="noopener noreferrer" style="color: red;" target="_blank">
     Gradle
    </a>
    build system through the
    <a data-tooltip="Projects targeting multiple platforms, called multiplatform projects, require the kotlin-multiplatform plugin." href="gradle-configure-project.html#targeting-multiple-platforms" id="arhcs9_35" style="color: blue;">
     Kotlin Multiplatform plugin
    </a>
    .
   </p>
   <aside class="prompt" data-title="" data-type="note" id="arhcs9_8">
    <p id="arhcs9_36">
     If you use a Mac and want to create and run applications for iOS or other Apple targets, you also need to install the
     <a data-external="true" href="https://developer.apple.com/download/" id="arhcs9_37" rel="noopener noreferrer" style="color: red;" target="_blank">
      Xcode Command Line Tools
     </a>
     , launch it, and accept the license terms first.
    </p>
   </aside>
   <section class="chapter">
    <h2 data-toc="create-a-kotlin-library" id="create-a-kotlin-library">
     Create a Kotlin library
    </h2>
    <aside class="prompt" data-title="" data-type="tip" id="arhcs9_38">
     <p id="arhcs9_44">
      See the
      <a data-tooltip="In this section, you'll learn how to manually create a Kotlin/Native application using Gradle. It's the default build system for Kotlin/Native and Kotlin Multiplatform projects, which is also commonly used in Java, Android, and other ecosystems." href="native-get-started.html#using-gradle" id="arhcs9_45" style="color: blue;">
       Get started with Kotlin/Native
      </a>
      tutorial for detailed first steps and instructions on how to create a new Kotlin/Native project and open it in IntelliJ IDEA.
     </p>
    </aside>
    <p id="arhcs9_39">
     The Kotlin/Native compiler can produce a framework for macOS and iOS from the Kotlin code. The created framework contains all declarations and binaries needed to use it with Swift/Objective-C.
    </p>
    <p id="arhcs9_40">
     Let's first create a Kotlin library:
    </p>
    <ol class="list _decimal" id="arhcs9_41" type="1">
     <li class="list__item" id="arhcs9_46">
      <p id="arhcs9_49">
       In the
       <code class="code" id="arhcs9_51">
        src/nativeMain/kotlin
       </code>
       directory, create the
       <code class="code" id="arhcs9_52">
        lib.kt
       </code>
       file with the library contents:
      </p>
      <div class="code-block" data-lang="kotlin" style="font-family: monospace; background: #f4f4f4; padding: 10px; overflow-x: auto; margin: 1em 0; display: block;">
       package example

object Object {
    val field = "A"
}

interface Interface {
    fun iMember() {}
}

class Clazz : Interface {
    fun member(p: Int): ULong? = 42UL
}

fun forIntegers(b: Byte, s: UShort, i: Int, l: ULong?) { }
fun forFloats(f: Float, d: Double?) { }

fun strings(str: String?) : String {
    return "That is '$str' from C"
}

fun acceptFun(f: (String) -&gt; String?) = f("Kotlin/Native rocks!")
fun supplyFun() : (String) -&gt; String? = { "$it is cool!" }
      </div>
     </li>
     <li class="list__item" id="arhcs9_47">
      <p id="arhcs9_53">
       Update your
       <code class="code" id="arhcs9_59">
        build.gradle(.kts)
       </code>
       Gradle build file with the following:
      </p>
      <div class="tabs" data-anchors="[arhcs9_60,arhcs9_61]" data-group="build-script" id="arhcs9_54">
       <div class="tabs__content" data-gtm="tab" data-sync-tabs="kotlin" data-title="Kotlin" id="arhcs9_60">
        <div class="code-block" data-lang="kotlin" data-title="Kotlin" style="font-family: monospace; background: #f4f4f4; padding: 10px; overflow-x: auto; margin: 1em 0; display: block;">
         plugins {
    kotlin("multiplatform") version "2.1.20"
}

repositories {
    mavenCentral()
}

kotlin {
    iosArm64("native") {
        binaries {
            framework {
                baseName = "Demo"
            }
        }
    }
}

tasks.wrapper {
    gradleVersion = "8.10"
    distributionType = Wrapper.DistributionType.ALL
}
        </div>
       </div>
       <div class="tabs__content" data-gtm="tab" data-sync-tabs="groovy" data-title="Groovy" id="arhcs9_61">
        <div class="code-block" data-lang="groovy" data-title="Groovy" style="font-family: monospace; background: #f4f4f4; padding: 10px; overflow-x: auto; margin: 1em 0; display: block;">
         plugins {
    id 'org.jetbrains.kotlin.multiplatform' version '2.1.20'
}

repositories {
    mavenCentral()
}

kotlin {
    iosArm64("native") {
        binaries {
            framework {
                baseName = "Demo"
            }
        }
    }
}

wrapper {
    gradleVersion = "8.10"
    distributionType = "ALL"
}
        </div>
       </div>
      </div>
      <p id="arhcs9_55">
       The
       <code class="code" id="arhcs9_64">
        binaries {}
       </code>
       block configures the project to generate a dynamic or shared library.
      </p>
      <p id="arhcs9_56">
       Kotlin/Native supports the
       <code class="code" id="arhcs9_65">
        iosArm64
       </code>
       ,
       <code class="code" id="arhcs9_66">
        iosX64
       </code>
       , and
       <code class="code" id="arhcs9_67">
        iosSimulatorArm64
       </code>
       targets for iOS, as well as
       <code class="code" id="arhcs9_68">
        macosX64
       </code>
       and
       <code class="code" id="arhcs9_69">
        macosArm64
       </code>
       targets for macOS. So, you can replace the
       <code class="code" id="arhcs9_70">
        iosArm64()
       </code>
       with the respective Gradle function for your target platform:
      </p>
      <div class="table-wrapper">
       <table class="wide" id="arhcs9_57">
        <thead>
         <tr class="ijRowHead" id="arhcs9_71">
          <th id="arhcs9_77">
           <p>
            Target platform/device
           </p>
          </th>
          <th id="arhcs9_78">
           <p>
            Gradle function
           </p>
          </th>
         </tr>
        </thead>
        <tbody>
         <tr id="arhcs9_72">
          <td id="arhcs9_79">
           <p>
            macOS x86_64
           </p>
          </td>
          <td id="arhcs9_80">
           <p>
            <code class="code" id="arhcs9_81">
             macosX64()
            </code>
           </p>
          </td>
         </tr>
         <tr id="arhcs9_73">
          <td id="arhcs9_82">
           <p>
            macOS ARM64
           </p>
          </td>
          <td id="arhcs9_83">
           <p>
            <code class="code" id="arhcs9_84">
             macosArm64()
            </code>
           </p>
          </td>
         </tr>
         <tr id="arhcs9_74">
          <td id="arhcs9_85">
           <p>
            iOS ARM64
           </p>
          </td>
          <td id="arhcs9_86">
           <p>
            <code class="code" id="arhcs9_87">
             iosArm64()
            </code>
           </p>
          </td>
         </tr>
         <tr id="arhcs9_75">
          <td id="arhcs9_88">
           <p>
            iOS Simulator (x86_64)
           </p>
          </td>
          <td id="arhcs9_89">
           <p>
            <code class="code" id="arhcs9_90">
             iosX64()
            </code>
           </p>
          </td>
         </tr>
         <tr id="arhcs9_76">
          <td id="arhcs9_91">
           <p>
            iOS Simulator (ARM64)
           </p>
          </td>
          <td id="arhcs9_92">
           <p>
            <code class="code" id="arhcs9_93">
             iosSimulatorArm64()
            </code>
           </p>
          </td>
         </tr>
        </tbody>
       </table>
      </div>
      <p id="arhcs9_58">
       For information on other supported Apple targets, see
       <a data-tooltip="The Kotlin/Native compiler supports a great number of different targets, though it is hard to provide the same level of support for all of them. This document describes which targets Kotlin/Native supports and breaks them into several tiers depending on how well the compiler…" href="native-target-support.html" id="arhcs9_94" style="color: blue;">
        Kotlin/Native target support
       </a>
       .
      </p>
     </li>
     <li class="list__item" id="arhcs9_48">
      <p id="arhcs9_95">
       Run the
       <code class="code" id="arhcs9_97">
        linkDebugFrameworkNative
       </code>
       Gradle task in the IDE or use the following console command in your terminal to build the framework:
      </p>
      <div class="code-block" data-lang="bash" style="font-family: monospace; background: #f4f4f4; padding: 10px; overflow-x: auto; margin: 1em 0; display: block;">
       ./gradlew linkDebugFrameworkNative
      </div>
     </li>
    </ol>
    <p id="arhcs9_42">
     The build generates the framework into the
     <code class="code" id="arhcs9_98">
      build/bin/native/debugFramework
     </code>
     directory.
    </p>
    <aside class="prompt" data-title="" data-type="tip" id="arhcs9_43">
     <p id="arhcs9_99">
      You can also use the
      <code class="code" id="arhcs9_100">
       linkNative
      </code>
      Gradle task to generate both
      <code class="code" id="arhcs9_101">
       debug
      </code>
      and
      <code class="code" id="arhcs9_102">
       release
      </code>
      variants of the framework.
     </p>
    </aside>
   </section>
   <section class="chapter">
    <h2 data-toc="generated-framework-headers" id="generated-framework-headers">
     Generated framework headers
    </h2>
    <p id="arhcs9_103">
     Each framework variant contains a header file. The headers don't depend on the target platform. Header files contain definitions for your Kotlin code and a few Kotlin-wide declarations. Let's see what's inside.
    </p>
    <section class="chapter">
     <h3 data-toc="kotlin-native-runtime-declarations" id="kotlin-native-runtime-declarations">
      Kotlin/Native runtime declarations
     </h3>
     <p id="arhcs9_108">
      In the
      <code class="code" id="arhcs9_112">
       build/bin/native/debugFramework/Demo.framework/Headers
      </code>
      directory, open the
      <code class="code" id="arhcs9_113">
       Demo.h
      </code>
      header file. Take a look at Kotlin runtime declarations:
     </p>
     <div class="code-block" data-lang="objectivec" style="font-family: monospace; background: #f4f4f4; padding: 10px; overflow-x: auto; margin: 1em 0; display: block;">
      NS_ASSUME_NONNULL_BEGIN
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Wunknown-warning-option"
#pragma clang diagnostic ignored "-Wincompatible-property-type"
#pragma clang diagnostic ignored "-Wnullability"

#pragma push_macro("_Nullable_result")
#if !__has_feature(nullability_nullable_result)
#undef _Nullable_result
#define _Nullable_result _Nullable
#endif

__attribute__((swift_name("KotlinBase")))
@interface DemoBase : NSObject
- (instancetype)init __attribute__((unavailable));
+ (instancetype)new __attribute__((unavailable));
+ (void)initialize __attribute__((objc_requires_super));
@end

@interface DemoBase (DemoBaseCopying) &lt;NSCopying&gt;
@end

__attribute__((swift_name("KotlinMutableSet")))
@interface DemoMutableSet&lt;ObjectType&gt; : NSMutableSet&lt;ObjectType&gt;
@end

__attribute__((swift_name("KotlinMutableDictionary")))
@interface DemoMutableDictionary&lt;KeyType, ObjectType&gt; : NSMutableDictionary&lt;KeyType, ObjectType&gt;
@end

@interface NSError (NSErrorDemoKotlinException)
@property (readonly) id _Nullable kotlinException;
@end
     </div>
     <p id="arhcs9_110">
      Kotlin classes have a
      <code class="code" id="arhcs9_114">
       KotlinBase
      </code>
      base class in Swift/Objective-C that extends the
      <code class="code" id="arhcs9_115">
       NSObject
      </code>
      class there. There are also wrappers for collections and exceptions. Most of the collection types are mapped to similar collection types in Swift/Objective-C:
     </p>
     <div class="table-wrapper">
      <table class="wide" id="arhcs9_111">
       <thead>
        <tr class="ijRowHead" id="arhcs9_116">
         <th id="arhcs9_123">
          <p>
           Kotlin
          </p>
         </th>
         <th id="arhcs9_124">
          <p>
           Swift
          </p>
         </th>
         <th id="arhcs9_125">
          <p>
           Objective-C
          </p>
         </th>
        </tr>
       </thead>
       <tbody>
        <tr id="arhcs9_117">
         <td id="arhcs9_126">
          <p>
           List
          </p>
         </td>
         <td id="arhcs9_127">
          <p>
           Array
          </p>
         </td>
         <td id="arhcs9_128">
          <p>
           NSArray
          </p>
         </td>
        </tr>
        <tr id="arhcs9_118">
         <td id="arhcs9_129">
          <p>
           MutableList
          </p>
         </td>
         <td id="arhcs9_130">
          <p>
           NSMutableArray
          </p>
         </td>
         <td id="arhcs9_131">
          <p>
           NSMutableArray
          </p>
         </td>
        </tr>
        <tr id="arhcs9_119">
         <td id="arhcs9_132">
          <p>
           Set
          </p>
         </td>
         <td id="arhcs9_133">
          <p>
           Set
          </p>
         </td>
         <td id="arhcs9_134">
          <p>
           NSSet
          </p>
         </td>
        </tr>
        <tr id="arhcs9_120">
         <td id="arhcs9_135">
          <p>
           MutableSet
          </p>
         </td>
         <td id="arhcs9_136">
          <p>
           NSMutableSet
          </p>
         </td>
         <td id="arhcs9_137">
          <p>
           NSMutableSet
          </p>
         </td>
        </tr>
        <tr id="arhcs9_121">
         <td id="arhcs9_138">
          <p>
           Map
          </p>
         </td>
         <td id="arhcs9_139">
          <p>
           Dictionary
          </p>
         </td>
         <td id="arhcs9_140">
          <p>
           NSDictionary
          </p>
         </td>
        </tr>
        <tr id="arhcs9_122">
         <td id="arhcs9_141">
          <p>
           MutableMap
          </p>
         </td>
         <td id="arhcs9_142">
          <p>
           NSMutableDictionary
          </p>
         </td>
         <td id="arhcs9_143">
          <p>
           NSMutableDictionary
          </p>
         </td>
        </tr>
       </tbody>
      </table>
     </div>
    </section>
    <section class="chapter">
     <h3 data-toc="kotlin-numbers-and-nsnumber" id="kotlin-numbers-and-nsnumber">
      Kotlin numbers and NSNumber
     </h3>
     <p id="arhcs9_144">
      The next part of the
      <code class="code" id="arhcs9_151">
       Demo.h
      </code>
      file contains type mappings between Kotlin/Native number types and
      <code class="code" id="arhcs9_152">
       NSNumber
      </code>
      . The base class is called
      <code class="code" id="arhcs9_153">
       DemoNumber
      </code>
      in Objective-C and
      <code class="code" id="arhcs9_154">
       KotlinNumber
      </code>
      in Swift. It extends
      <code class="code" id="arhcs9_155">
       NSNumber
      </code>
      .
     </p>
     <p id="arhcs9_145">
      For each Kotlin number type, there is a corresponding predefined child class:
     </p>
     <div class="table-wrapper">
      <table class="wide" id="arhcs9_146">
       <thead>
        <tr class="ijRowHead" id="arhcs9_156">
         <th id="arhcs9_169">
          <p>
           Kotlin
          </p>
         </th>
         <th id="arhcs9_170">
          <p>
           Swift
          </p>
         </th>
         <th id="arhcs9_171">
          <p>
           Objective-C
          </p>
         </th>
         <th id="arhcs9_172">
          <p>
           Simple type
          </p>
         </th>
        </tr>
       </thead>
       <tbody>
        <tr id="arhcs9_157">
         <td id="arhcs9_173">
          <p>
           <code class="code" id="arhcs9_177">
            -
           </code>
          </p>
         </td>
         <td id="arhcs9_174">
          <p>
           <code class="code" id="arhcs9_178">
            KotlinNumber
           </code>
          </p>
         </td>
         <td id="arhcs9_175">
          <p>
           <code class="code" id="arhcs9_179">
            &lt;Package&gt;Number
           </code>
          </p>
         </td>
         <td id="arhcs9_176">
          <p>
           <code class="code" id="arhcs9_180">
            -
           </code>
          </p>
         </td>
        </tr>
        <tr id="arhcs9_158">
         <td id="arhcs9_181">
          <p>
           <code class="code" id="arhcs9_185">
            Byte
           </code>
          </p>
         </td>
         <td id="arhcs9_182">
          <p>
           <code class="code" id="arhcs9_186">
            KotlinByte
           </code>
          </p>
         </td>
         <td id="arhcs9_183">
          <p>
           <code class="code" id="arhcs9_187">
            &lt;Package&gt;Byte
           </code>
          </p>
         </td>
         <td id="arhcs9_184">
          <p>
           <code class="code" id="arhcs9_188">
            char
           </code>
          </p>
         </td>
        </tr>
        <tr id="arhcs9_159">
         <td id="arhcs9_189">
          <p>
           <code class="code" id="arhcs9_193">
            UByte
           </code>
          </p>
         </td>
         <td id="arhcs9_190">
          <p>
           <code class="code" id="arhcs9_194">
            KotlinUByte
           </code>
          </p>
         </td>
         <td id="arhcs9_191">
          <p>
           <code class="code" id="arhcs9_195">
            &lt;Package&gt;UByte
           </code>
          </p>
         </td>
         <td id="arhcs9_192">
          <p>
           <code class="code" id="arhcs9_196">
            unsigned char
           </code>
          </p>
         </td>
        </tr>
        <tr id="arhcs9_160">
         <td id="arhcs9_197">
          <p>
           <code class="code" id="arhcs9_201">
            Short
           </code>
          </p>
         </td>
         <td id="arhcs9_198">
          <p>
           <code class="code" id="arhcs9_202">
            KotlinShort
           </code>
          </p>
         </td>
         <td id="arhcs9_199">
          <p>
           <code class="code" id="arhcs9_203">
            &lt;Package&gt;Short
           </code>
          </p>
         </td>
         <td id="arhcs9_200">
          <p>
           <code class="code" id="arhcs9_204">
            short
           </code>
          </p>
         </td>
        </tr>
        <tr id="arhcs9_161">
         <td id="arhcs9_205">
          <p>
           <code class="code" id="arhcs9_209">
            UShort
           </code>
          </p>
         </td>
         <td id="arhcs9_206">
          <p>
           <code class="code" id="arhcs9_210">
            KotlinUShort
           </code>
          </p>
         </td>
         <td id="arhcs9_207">
          <p>
           <code class="code" id="arhcs9_211">
            &lt;Package&gt;UShort
           </code>
          </p>
         </td>
         <td id="arhcs9_208">
          <p>
           <code class="code" id="arhcs9_212">
            unsigned short
           </code>
          </p>
         </td>
        </tr>
        <tr id="arhcs9_162">
         <td id="arhcs9_213">
          <p>
           <code class="code" id="arhcs9_217">
            Int
           </code>
          </p>
         </td>
         <td id="arhcs9_214">
          <p>
           <code class="code" id="arhcs9_218">
            KotlinInt
           </code>
          </p>
         </td>
         <td id="arhcs9_215">
          <p>
           <code class="code" id="arhcs9_219">
            &lt;Package&gt;Int
           </code>
          </p>
         </td>
         <td id="arhcs9_216">
          <p>
           <code class="code" id="arhcs9_220">
            int
           </code>
          </p>
         </td>
        </tr>
        <tr id="arhcs9_163">
         <td id="arhcs9_221">
          <p>
           <code class="code" id="arhcs9_225">
            UInt
           </code>
          </p>
         </td>
         <td id="arhcs9_222">
          <p>
           <code class="code" id="arhcs9_226">
            KotlinUInt
           </code>
          </p>
         </td>
         <td id="arhcs9_223">
          <p>
           <code class="code" id="arhcs9_227">
            &lt;Package&gt;UInt
           </code>
          </p>
         </td>
         <td id="arhcs9_224">
          <p>
           <code class="code" id="arhcs9_228">
            unsigned int
           </code>
          </p>
         </td>
        </tr>
        <tr id="arhcs9_164">
         <td id="arhcs9_229">
          <p>
           <code class="code" id="arhcs9_233">
            Long
           </code>
          </p>
         </td>
         <td id="arhcs9_230">
          <p>
           <code class="code" id="arhcs9_234">
            KotlinLong
           </code>
          </p>
         </td>
         <td id="arhcs9_231">
          <p>
           <code class="code" id="arhcs9_235">
            &lt;Package&gt;Long
           </code>
          </p>
         </td>
         <td id="arhcs9_232">
          <p>
           <code class="code" id="arhcs9_236">
            long long
           </code>
          </p>
         </td>
        </tr>
        <tr id="arhcs9_165">
         <td id="arhcs9_237">
          <p>
           <code class="code" id="arhcs9_241">
            ULong
           </code>
          </p>
         </td>
         <td id="arhcs9_238">
          <p>
           <code class="code" id="arhcs9_242">
            KotlinULong
           </code>
          </p>
         </td>
         <td id="arhcs9_239">
          <p>
           <code class="code" id="arhcs9_243">
            &lt;Package&gt;ULong
           </code>
          </p>
         </td>
         <td id="arhcs9_240">
          <p>
           <code class="code" id="arhcs9_244">
            unsigned long long
           </code>
          </p>
         </td>
        </tr>
        <tr id="arhcs9_166">
         <td id="arhcs9_245">
          <p>
           <code class="code" id="arhcs9_249">
            Float
           </code>
          </p>
         </td>
         <td id="arhcs9_246">
          <p>
           <code class="code" id="arhcs9_250">
            KotlinFloat
           </code>
          </p>
         </td>
         <td id="arhcs9_247">
          <p>
           <code class="code" id="arhcs9_251">
            &lt;Package&gt;Float
           </code>
          </p>
         </td>
         <td id="arhcs9_248">
          <p>
           <code class="code" id="arhcs9_252">
            float
           </code>
          </p>
         </td>
        </tr>
        <tr id="arhcs9_167">
         <td id="arhcs9_253">
          <p>
           <code class="code" id="arhcs9_257">
            Double
           </code>
          </p>
         </td>
         <td id="arhcs9_254">
          <p>
           <code class="code" id="arhcs9_258">
            KotlinDouble
           </code>
          </p>
         </td>
         <td id="arhcs9_255">
          <p>
           <code class="code" id="arhcs9_259">
            &lt;Package&gt;Double
           </code>
          </p>
         </td>
         <td id="arhcs9_256">
          <p>
           <code class="code" id="arhcs9_260">
            double
           </code>
          </p>
         </td>
        </tr>
        <tr id="arhcs9_168">
         <td id="arhcs9_261">
          <p>
           <code class="code" id="arhcs9_265">
            Boolean
           </code>
          </p>
         </td>
         <td id="arhcs9_262">
          <p>
           <code class="code" id="arhcs9_266">
            KotlinBoolean
           </code>
          </p>
         </td>
         <td id="arhcs9_263">
          <p>
           <code class="code" id="arhcs9_267">
            &lt;Package&gt;Boolean
           </code>
          </p>
         </td>
         <td id="arhcs9_264">
          <p>
           <code class="code" id="arhcs9_268">
            BOOL/Bool
           </code>
          </p>
         </td>
        </tr>
       </tbody>
      </table>
     </div>
     <p id="arhcs9_147">
      Every number type has a class method to create a new instance from the corresponding simple type. Also, there is an instance method to extract a simple value back. Schematically, all such declarations look like that:
     </p>
     <div class="code-block" data-lang="objectivec" style="font-family: monospace; background: #f4f4f4; padding: 10px; overflow-x: auto; margin: 1em 0; display: block;">
      __attribute__((swift_name("Kotlin__TYPE__")))
@interface Demo__TYPE__ : DemoNumber
- (instancetype)initWith__TYPE__:(__CTYPE__)value;
+ (instancetype)numberWith__TYPE__:(__CTYPE__)value;
@end;
     </div>
     <p id="arhcs9_149">
      Here,
      <code class="code" id="arhcs9_269">
       __TYPE__
      </code>
      is one of the simple type names, and
      <code class="code" id="arhcs9_270">
       __CTYPE__
      </code>
      is the corresponding Objective-C type, for example,
      <code class="code" id="arhcs9_271">
       initWithChar(char)
      </code>
      .
     </p>
     <p id="arhcs9_150">
      These types are used to map boxed Kotlin number types to Swift/Objective-C. In Swift, you can call the constructor to create an instance, for example,
      <code class="code" id="arhcs9_272">
       KotlinLong(value: 42)
      </code>
      .
     </p>
    </section>
    <section class="chapter">
     <h3 data-toc="classes-and-objects-from-kotlin" id="classes-and-objects-from-kotlin">
      Classes and objects from Kotlin
     </h3>
     <p id="arhcs9_273">
      Let's see how
      <code class="code" id="arhcs9_277">
       class
      </code>
      and
      <code class="code" id="arhcs9_278">
       object
      </code>
      are mapped to Swift/Objective-C. The generated
      <code class="code" id="arhcs9_279">
       Demo.h
      </code>
      file contains the exact definitions for
      <code class="code" id="arhcs9_280">
       Class
      </code>
      ,
      <code class="code" id="arhcs9_281">
       Interface
      </code>
      , and
      <code class="code" id="arhcs9_282">
       Object
      </code>
      :
     </p>
     <div class="code-block" data-lang="objectivec" style="font-family: monospace; background: #f4f4f4; padding: 10px; overflow-x: auto; margin: 1em 0; display: block;">
      __attribute__((swift_name("Interface")))
@protocol DemoInterface
@required
- (void)iMember __attribute__((swift_name("iMember()")));
@end

__attribute__((objc_subclassing_restricted))
__attribute__((swift_name("Clazz")))
@interface DemoClazz : DemoBase &lt;DemoInterface&gt;
- (instancetype)init __attribute__((swift_name("init()"))) __attribute__((objc_designated_initializer));
+ (instancetype)new __attribute__((availability(swift, unavailable, message="use object initializers instead")));
- (DemoULong * _Nullable)memberP:(int32_t)p __attribute__((swift_name("member(p:)")));
@end

__attribute__((objc_subclassing_restricted))
__attribute__((swift_name("Object")))
@interface DemoObject : DemoBase
+ (instancetype)alloc __attribute__((unavailable));
+ (instancetype)allocWithZone:(struct _NSZone *)zone __attribute__((unavailable));
+ (instancetype)object __attribute__((swift_name("init()")));
@property (class, readonly, getter=shared) DemoObject *shared __attribute__((swift_name("shared")));
@property (readonly) NSString *field __attribute__((swift_name("field")));
@end
     </div>
     <p id="arhcs9_275">
      Objective-C attributes in this code help use the framework from both Swift and Objective-C languages.
      <code class="code" id="arhcs9_283">
       DemoInterface
      </code>
      ,
      <code class="code" id="arhcs9_284">
       DemoClazz
      </code>
      , and
      <code class="code" id="arhcs9_285">
       DemoObject
      </code>
      are created for
      <code class="code" id="arhcs9_286">
       Interface
      </code>
      ,
      <code class="code" id="arhcs9_287">
       Clazz
      </code>
      , and
      <code class="code" id="arhcs9_288">
       Object
      </code>
      , respectively.
     </p>
     <p id="arhcs9_276">
      The
      <code class="code" id="arhcs9_289">
       Interface
      </code>
      is turned into
      <code class="code" id="arhcs9_290">
       @protocol
      </code>
      , while both a
      <code class="code" id="arhcs9_291">
       class
      </code>
      and an
      <code class="code" id="arhcs9_292">
       object
      </code>
      are represented as
      <code class="code" id="arhcs9_293">
       @interface
      </code>
      . The
      <code class="code" id="arhcs9_294">
       Demo
      </code>
      prefix comes from the framework name. The nullable return type
      <code class="code" id="arhcs9_295">
       ULong?
      </code>
      is turned into
      <code class="code" id="arhcs9_296">
       DemoULong
      </code>
      in Objective-C.
     </p>
    </section>
    <section class="chapter">
     <h3 data-toc="global-declarations-from-kotlin" id="global-declarations-from-kotlin">
      Global declarations from Kotlin
     </h3>
     <p id="arhcs9_297">
      All global functions from Kotlin are turned into
      <code class="code" id="arhcs9_301">
       DemoLibKt
      </code>
      in Objective-C and into
      <code class="code" id="arhcs9_302">
       LibKt
      </code>
      in Swift, where
      <code class="code" id="arhcs9_303">
       Demo
      </code>
      is the framework name set by the
      <code class="code" id="arhcs9_304">
       -output
      </code>
      parameter of
      <code class="code" id="arhcs9_305">
       kotlinc-native
      </code>
      :
     </p>
     <div class="code-block" data-lang="objectivec" style="font-family: monospace; background: #f4f4f4; padding: 10px; overflow-x: auto; margin: 1em 0; display: block;">
      __attribute__((objc_subclassing_restricted))
__attribute__((swift_name("LibKt")))
@interface DemoLibKt : DemoBase
+ (NSString * _Nullable)acceptFunF:(NSString * _Nullable (^)(NSString *))f __attribute__((swift_name("acceptFun(f:)")));
+ (void)forFloatsF:(float)f d:(DemoDouble * _Nullable)d __attribute__((swift_name("forFloats(f:d:)")));
+ (void)forIntegersB:(int8_t)b s:(uint16_t)s i:(int32_t)i l:(DemoULong * _Nullable)l __attribute__((swift_name("forIntegers(b:s:i:l:)")));
+ (NSString *)stringsStr:(NSString * _Nullable)str __attribute__((swift_name("strings(str:)")));
+ (NSString * _Nullable (^)(NSString *))supplyFun __attribute__((swift_name("supplyFun()")));
@end
     </div>
     <p id="arhcs9_299">
      Kotlin
      <code class="code" id="arhcs9_306">
       String
      </code>
      and Objective-C
      <code class="code" id="arhcs9_307">
       NSString*
      </code>
      are mapped transparently. Similarly,
      <code class="code" id="arhcs9_308">
       Unit
      </code>
      type from Kotlin is mapped to
      <code class="code" id="arhcs9_309">
       void
      </code>
      . The primitive types are mapped directly. Non-nullable primitive types are mapped transparently. Nullable primitive types are mapped to
      <code class="code" id="arhcs9_310">
       Kotlin&lt;TYPE&gt;*
      </code>
      types, as shown in the
      <a data-tooltip="The next part of the Demo.h file contains type mappings between Kotlin/Native number types and NSNumber. The base class is called DemoNumber in Objective-C and KotlinNumber in Swift. It extends NSNumber." href="#kotlin-numbers-and-nsnumber" id="arhcs9_311" style="color: blue;">
       table
      </a>
      . Both higher-order functions
      <code class="code" id="arhcs9_312">
       acceptFunF
      </code>
      and
      <code class="code" id="arhcs9_313">
       supplyFun
      </code>
      are included and accept Objective-C blocks.
     </p>
     <p id="arhcs9_300">
      You can find more information about type mapping in
      <a data-tooltip="The table below shows how Kotlin concepts are mapped to Swift/Objective-C and vice versa." href="native-objc-interop.html#mappings" id="arhcs9_314" style="color: blue;">
       Interoperability with Swift/Objective-C
      </a>
      .
     </p>
    </section>
   </section>
   <section class="chapter">
    <h2 data-toc="garbage-collection-and-reference-counting" id="garbage-collection-and-reference-counting">
     Garbage collection and reference counting
    </h2>
    <p id="arhcs9_315">
     Swift and Objective-C use automatic reference counting (ARC). Kotlin/Native has its own
     <a data-tooltip="Kotlin/Native's garbage collector (GC) algorithm is constantly evolving. Currently, it functions as a stop-the-world mark and concurrent sweep collector that does not separate the heap into generations." href="native-memory-manager.html#garbage-collector" id="arhcs9_317" style="color: blue;">
      garbage collector
     </a>
     , which is also
     <a data-tooltip="Kotlin and Objective-C use different memory management strategies. Kotlin has a tracing garbage collector, while Objective-C relies on automatic reference counting (ARC)." href="native-arc-integration.html" id="arhcs9_318" style="color: blue;">
      integrated with Swift/Objective-C ARC
     </a>
     .
    </p>
    <p id="arhcs9_316">
     Unused Kotlin objects are automatically removed. You don't need to take additional steps to control the lifetime of Kotlin/Native instances from Swift or Objective-C.
    </p>
   </section>
   <section class="chapter">
    <h2 data-toc="use-code-from-objective-c" id="use-code-from-objective-c">
     Use code from Objective-C
    </h2>
    <p id="arhcs9_319">
     Let's call the framework from Objective-C. In the framework directory, create the
     <code class="code" id="arhcs9_325">
      main.m
     </code>
     file with the following code:
    </p>
    <div class="code-block" data-lang="objectivec" style="font-family: monospace; background: #f4f4f4; padding: 10px; overflow-x: auto; margin: 1em 0; display: block;">
     #import &lt;Foundation/Foundation.h&gt;
#import &lt;Demo/Demo.h&gt;

int main(int argc, const char * argv[]) {
    @autoreleasepool {
        [DemoObject.shared field];
        
        DemoClazz* clazz = [[ DemoClazz alloc] init];
        [clazz memberP:42];
        
        [DemoLibKt forIntegersB:1 s:1 i:3 l:[DemoULong numberWithUnsignedLongLong:4]];
        [DemoLibKt forIntegersB:1 s:1 i:3 l:nil];
        
        [DemoLibKt forFloatsF:2.71 d:[DemoDouble numberWithDouble:2.71]];
        [DemoLibKt forFloatsF:2.71 d:nil];
        
        NSString* ret = [DemoLibKt acceptFunF:^NSString * _Nullable(NSString * it) {
            return [it stringByAppendingString:@" Kotlin is fun"];
        }];
        
        NSLog(@"%@", ret);
        return 0;
    }
}
    </div>
    <p id="arhcs9_321">
     Here, you call Kotlin classes directly from Objective-C code. A Kotlin object uses the
     <code class="code" id="arhcs9_326">
      &lt;object name&gt;.shared
     </code>
     class property, which allows you to get the object's only instance and call object methods on it.
    </p>
    <p id="arhcs9_322">
     The widespread pattern is used to create an instance of the
     <code class="code" id="arhcs9_327">
      Clazz
     </code>
     class. You call the
     <code class="code" id="arhcs9_328">
      [[ DemoClazz alloc] init]
     </code>
     on Objective-C. You can also use
     <code class="code" id="arhcs9_329">
      [DemoClazz new]
     </code>
     for constructors without parameters.
    </p>
    <p id="arhcs9_323">
     Global declarations from the Kotlin sources are scoped under the
     <code class="code" id="arhcs9_330">
      DemoLibKt
     </code>
     class in Objective-C. All Kotlin functions are turned into class methods of that class.
    </p>
    <p id="arhcs9_324">
     The
     <code class="code" id="arhcs9_331">
      strings
     </code>
     function is turned into
     <code class="code" id="arhcs9_332">
      DemoLibKt.stringsStr
     </code>
     function in Objective-C, so you can pass
     <code class="code" id="arhcs9_333">
      NSString
     </code>
     directly to it. The return value is visible as
     <code class="code" id="arhcs9_334">
      NSString
     </code>
     too.
    </p>
   </section>
   <section class="chapter">
    <h2 data-toc="use-code-from-swift" id="use-code-from-swift">
     Use code from Swift
    </h2>
    <p id="arhcs9_335">
     The framework you generated has helper attributes to make it easier to use with Swift. Let's convert the
     <a data-tooltip="Let's call the framework from Objective-C. In the framework directory, create the main.m file with the following code:" href="#use-code-from-objective-c" id="arhcs9_341" style="color: blue;">
      previous Objective-C example
     </a>
     into Swift.
    </p>
    <p id="arhcs9_336">
     In the framework directory, create the
     <code class="code" id="arhcs9_342">
      main.swift
     </code>
     file with the following code:
    </p>
    <div class="code-block" data-lang="swift" style="font-family: monospace; background: #f4f4f4; padding: 10px; overflow-x: auto; margin: 1em 0; display: block;">
     import Foundation
import Demo

let kotlinObject = Object.shared

let field = Object.shared.field

let clazz = Clazz()
clazz.member(p: 42)

LibKt.forIntegers(b: 1, s: 2, i: 3, l: 4)
LibKt.forFloats(f: 2.71, d: nil)

let ret = LibKt.acceptFun { "\($0) Kotlin is fun" }
if (ret != nil) {
    print(ret!)
}
    </div>
    <p id="arhcs9_338">
     There are some small differences between the original Kotlin code and its Swift version. In Kotlin, any object declaration has only one instance. The
     <code class="code" id="arhcs9_343">
      Object.shared
     </code>
     syntax is used to access this single instance.
    </p>
    <p id="arhcs9_339">
     Kotlin function and property names are translated as is. Kotlin's
     <code class="code" id="arhcs9_344">
      String
     </code>
     is turned into Swift's
     <code class="code" id="arhcs9_345">
      String
     </code>
     . Swift hides
     <code class="code" id="arhcs9_346">
      NSNumber*
     </code>
     boxing too. You can also pass a Swift closure to Kotlin and call a Kotlin lambda function from Swift.
    </p>
    <p id="arhcs9_340">
     You can find more information about type mapping in
     <a data-tooltip="The table below shows how Kotlin concepts are mapped to Swift/Objective-C and vice versa." href="native-objc-interop.html#mappings" id="arhcs9_347" style="color: blue;">
      Interoperability with Swift/Objective-C
     </a>
     .
    </p>
   </section>
   <section class="chapter">
    <h2 data-toc="connect-the-framework-to-your-ios-project" id="connect-the-framework-to-your-ios-project">
     Connect the framework to your iOS project
    </h2>
    <p id="arhcs9_348">
     Now you can connect the generated framework to your iOS project as a dependency. There are multiple ways to set it up and automate the process, choose the method that suits you best:
    </p>
    <p id="arhcs9_349">
     <a data-tooltip="You can integrate a Kotlin Multiplatform shared module into your iOS app. For that, you generate an iOS framework from the shared module and then add it as a dependency to the iOS project:" href="multiplatform-ios-integration-overview.html" id="arhcs9_350" style="color: blue;">
      <figure id="arhcs9_351">
       <img alt="Choose iOS integration method" height="52" src="images/choose-ios-integration.svg" title="Choose iOS integration method" width="700"/>
      </figure>
     </a>
    </p>
   </section>
   <section class="chapter">
    <h2 data-toc="what-s-next" id="what-s-next">
     What's next
    </h2>
    <ul class="list _bullet" id="arhcs9_352">
     <li class="list__item" id="arhcs9_353">
      <p id="arhcs9_356">
       <a data-tooltip="The Objective-C libraries import is Experimental. All Kotlin declarations generated by the cinterop tool from Objective-C libraries should have the @ExperimentalForeignApi annotation." href="native-objc-interop.html" id="arhcs9_357" style="color: blue;">
        Learn more about interoperability with Objective-C
       </a>
      </p>
     </li>
     <li class="list__item" id="arhcs9_354">
      <p id="arhcs9_358">
       <a data-tooltip="The C libraries import is Experimental. All Kotlin declarations generated by the cinterop tool from C libraries should have the @ExperimentalForeignApi annotation." href="native-c-interop.html" id="arhcs9_359" style="color: blue;">
        See how interoperability with C is implemented in Kotlin
       </a>
      </p>
     </li>
     <li class="list__item" id="arhcs9_355">
      <p id="arhcs9_360">
       <a data-tooltip="You can create dynamic libraries to use Kotlin code from existing programs. This enables code sharing across many platforms or languages, including JVM, Python, Android, and others." href="native-dynamic-libraries.html" id="arhcs9_361" style="color: blue;">
        Check out the Kotlin/Native as a dynamic library tutorial
       </a>
      </p>
     </li>
    </ul>
   </section>
   <div class="last-modified">
    19 April 2025
   </div>
   <div data-feedback-placeholder="true">
   </div>
  </article>
 </body>
</html>

<html>
 <head>
  <meta charset="utf-8"/>
  <title>
   Kotlin Documentation
  </title>
  <link href="style.css" rel="stylesheet"/>
 </head>
 <body>
  <div style="text-align: center; margin-bottom: 1em;">
   <a href="toc.html" style="font-size: 24px; text-decoration: none;">
    Menu
   </a>
  </div>
  <article class="article" data-shortcut-switcher="inactive">
   <h1 data-toc="whatsnew1520" id="whatsnew1520.md">
    What's new in Kotlin 1.5.20
   </h1>
   <p id="-x81cel_2">
    <span class="emphasis" id="-x81cel_11">
     <a data-tooltip="The following table lists details of the latest Kotlin releases:" href="releases.html#release-details" id="-x81cel_12" style="color: blue;">
      Released: 24 June 2021
     </a>
    </span>
   </p>
   <p id="-x81cel_3">
    Kotlin 1.5.20 has fixes for issues discovered in the new features of 1.5.0, and it also includes various tooling improvements.
   </p>
   <p id="-x81cel_4">
    You can find an overview of the changes in the
    <a data-external="true" href="https://blog.jetbrains.com/kotlin/2021/06/kotlin-1-5-20-released/" id="-x81cel_13" rel="noopener noreferrer" style="color: red;" target="_blank">
     release blog post
    </a>
    and this video:
   </p>
   <div class="video-player" id="-x81cel_5">
    <object class="article__bordered-element" data="https://www.youtube.com/v/SV8CgSXQe44?color2=FBE9EC&amp;rel=0&amp;hd=1&amp;autoplay=0&amp;version=3&amp;modestbranding=1&amp;fs=1" data-theme="light" height="315" type="application/x-shockwave-flash" width="560">
    </object>
   </div>
   <section class="chapter">
    <h2 data-toc="kotlin-jvm" id="kotlin-jvm">
     Kotlin/JVM
    </h2>
    <p id="-x81cel_14">
     Kotlin 1.5.20 is receiving the following updates on the JVM platform:
    </p>
    <ul class="list _bullet" id="-x81cel_15">
     <li class="list__item" id="-x81cel_19">
      <p id="-x81cel_22">
       <a data-tooltip="Kotlin 1.5.20 compiles string concatenations into dynamic invocations (invokedynamic) on JVM 9+ targets, thereby keeping up with modern Java versions. More precisely, it uses StringConcatFactory.makeConcatWithConstants() for string concatenation." href="#string-concatenation-via-invokedynamic" id="-x81cel_23" style="color: blue;">
        String concatenation via invokedynamic
       </a>
      </p>
     </li>
     <li class="list__item" id="-x81cel_20">
      <p id="-x81cel_24">
       <a data-tooltip="The Kotlin compiler can read various types of nullability annotations to pass nullability information from Java to Kotlin. Version 1.5.20 introduces support for the JSpecify project, which includes the standard unified set of Java nullness annotations." href="#support-for-jspecify-nullness-annotations" id="-x81cel_25" style="color: blue;">
        Support for JSpecify nullness annotations
       </a>
      </p>
     </li>
     <li class="list__item" id="-x81cel_21">
      <p id="-x81cel_26">
       <a data-tooltip="The Lombok compiler plugin is Experimental. It may be dropped or changed at any time. Use it only for evaluation purposes. We would appreciate your feedback on it in YouTrack." href="#support-for-calling-java-s-lombok-generated-methods-within-modules-that-have-kotlin-and-java-code" id="-x81cel_27" style="color: blue;">
        Support for calling Java's Lombok-generated methods within modules that have Kotlin and Java code
       </a>
      </p>
     </li>
    </ul>
    <section class="chapter">
     <h3 data-toc="string-concatenation-via-invokedynamic" id="string-concatenation-via-invokedynamic">
      String concatenation via invokedynamic
     </h3>
     <p id="-x81cel_28">
      Kotlin 1.5.20 compiles string concatenations into
      <a data-external="true" href="https://docs.oracle.com/javase/7/docs/technotes/guides/vm/multiple-language-support.html#invokedynamic" id="-x81cel_31" rel="noopener noreferrer" style="color: red;" target="_blank">
       dynamic invocations
      </a>
      (
      <code class="code" id="-x81cel_32">
       invokedynamic
      </code>
      ) on JVM 9+ targets, thereby keeping up with modern Java versions. More precisely, it uses
      <a data-external="true" href="https://docs.oracle.com/javase/9/docs/api/java/lang/invoke/StringConcatFactory.html#makeConcatWithConstants-java.lang.invoke.MethodHandles.Lookup-java.lang.String-java.lang.invoke.MethodType-java.lang.String-java.lang.Object...-" id="-x81cel_33" rel="noopener noreferrer" style="color: red;" target="_blank">
       <code class="code" id="-x81cel_34">
        StringConcatFactory.makeConcatWithConstants()
       </code>
      </a>
      for string concatenation.
     </p>
     <p id="-x81cel_29">
      To switch back to concatenation via
      <a data-external="true" href="https://docs.oracle.com/javase/9/docs/api/java/lang/StringBuilder.html#append-java.lang.String-" id="-x81cel_35" rel="noopener noreferrer" style="color: red;" target="_blank">
       <code class="code" id="-x81cel_37">
        StringBuilder.append()
       </code>
      </a>
      used in previous versions, add the compiler option
      <code class="code" id="-x81cel_36">
       -Xstring-concat=inline
      </code>
      .
     </p>
     <p id="-x81cel_30">
      Learn how to add compiler options in
      <a data-tooltip="Each release of Kotlin includes compilers for the supported targets: JVM, JavaScript, and native binaries for supported platforms." href="gradle-compiler-options.html" id="-x81cel_38" style="color: blue;">
       Gradle
      </a>
      ,
      <a data-tooltip="Additional options and arguments for the compiler can be specified as tags under the &lt;configuration&gt; element of the Maven plugin node:" href="maven.html#specify-compiler-options" id="-x81cel_39" style="color: blue;">
       Maven
      </a>
      , and the
      <a data-tooltip="Kotlin compilers have a number of options for tailoring the compiling process. Compiler options for different targets are listed on this page together with a description of each one." href="compiler-reference.html#compiler-options" id="-x81cel_40" style="color: blue;">
       command-line compiler
      </a>
      .
     </p>
    </section>
    <section class="chapter">
     <h3 data-toc="support-for-jspecify-nullness-annotations" id="support-for-jspecify-nullness-annotations">
      Support for JSpecify nullness annotations
     </h3>
     <p id="-x81cel_41">
      The Kotlin compiler can read various types of
      <a data-tooltip="Java types that have nullability annotations are represented not as platform types, but as actual nullable or non-nullable Kotlin types. The compiler supports several flavors of nullability annotations, including:" href="java-interop.html#nullability-annotations" id="-x81cel_48" style="color: blue;">
       nullability annotations
      </a>
      to pass nullability information from Java to Kotlin. Version 1.5.20 introduces support for the
      <a data-external="true" href="https://jspecify.dev/" id="-x81cel_49" rel="noopener noreferrer" style="color: red;" target="_blank">
       JSpecify project
      </a>
      , which includes the standard unified set of Java nullness annotations.
     </p>
     <p id="-x81cel_42">
      With JSpecify, you can provide more detailed nullability information to help Kotlin keep null-safety interoperating with Java. You can set default nullability for the declaration, package, or module scope, specify parametric nullability, and more. You can find more details about this in the
      <a data-external="true" href="https://jspecify.dev/docs/user-guide" id="-x81cel_50" rel="noopener noreferrer" style="color: red;" target="_blank">
       JSpecify user guide
      </a>
      .
     </p>
     <p id="-x81cel_43">
      Here is the example of how Kotlin can handle JSpecify annotations:
     </p>
     <div class="code-block" data-lang="java" style="font-family: monospace; background: #f4f4f4; padding: 10px; overflow-x: auto; margin: 1em 0; display: block;">
      // JavaClass.java
import org.jspecify.nullness.*;

@NullMarked
public class JavaClass {
  public String notNullableString() { return ""; }
  public @Nullable String nullableString() { return ""; }
}
     </div>
     <div class="code-block" data-lang="kotlin" style="font-family: monospace; background: #f4f4f4; padding: 10px; overflow-x: auto; margin: 1em 0; display: block;">
      // Test.kt
fun kotlinFun() = with(JavaClass()) {
  notNullableString().length // OK
  nullableString().length    // Warning: receiver nullability mismatch
}
     </div>
     <p id="-x81cel_46">
      In 1.5.20, all nullability mismatches according to the JSpecify-provided nullability information are reported as warnings. Use the
      <code class="code" id="-x81cel_51">
       -Xjspecify-annotations=strict
      </code>
      and
      <code class="code" id="-x81cel_52">
       -Xtype-enhancement-improvements-strict-mode
      </code>
      compiler options to enable strict mode (with error reporting) when working with JSpecify. Please note that the JSpecify project is under active development. Its API and implementation can change significantly at any time.
     </p>
     <p id="-x81cel_47">
      <a data-tooltip="Any reference in Java may be null, which makes Kotlin's requirements of strict null-safety impractical for objects coming from Java. Types of Java declarations are treated in Kotlin in a specific manner and called platform types. Null-checks are relaxed for such types, so that…" href="java-interop.html#null-safety-and-platform-types" id="-x81cel_53" style="color: blue;">
       Learn more about null-safety and platform types
      </a>
      .
     </p>
    </section>
    <section class="chapter">
     <h3 data-toc="support-for-calling-java-s-lombok-generated-methods-within-modules-that-have-kotlin-and-java-code" id="support-for-calling-java-s-lombok-generated-methods-within-modules-that-have-kotlin-and-java-code">
      Support for calling Java's Lombok-generated methods within modules that have Kotlin and Java code
     </h3>
     <aside class="prompt" data-title="" data-type="warning" id="-x81cel_54">
      <p id="-x81cel_61">
       The Lombok compiler plugin is
       <a data-tooltip="The Kotlin language and toolset are divided into many components such as the compilers for the JVM, JS and Native targets, the Standard Library, various accompanying tools and so on. Many of these components were officially released as Stable, which means that they were evolved in a…" href="components-stability.html" id="-x81cel_62" style="color: blue;">
        Experimental
       </a>
       . It may be dropped or changed at any time. Use it only for evaluation purposes. We would appreciate your feedback on it in
       <a data-external="true" href="https://youtrack.jetbrains.com/issue/KT-7112" id="-x81cel_63" rel="noopener noreferrer" style="color: red;" target="_blank">
        YouTrack
       </a>
       .
      </p>
     </aside>
     <p id="-x81cel_55">
      Kotlin 1.5.20 introduces an experimental
      <a data-tooltip="The Lombok compiler plugin is Experimental. It may be dropped or changed at any time. Use it only for evaluation purposes. We would appreciate your feedback on it in YouTrack." href="lombok.html" id="-x81cel_64" style="color: blue;">
       Lombok compiler plugin
      </a>
      . This plugin makes it possible to generate and use Java's
      <a data-external="true" href="https://projectlombok.org/" id="-x81cel_65" rel="noopener noreferrer" style="color: red;" target="_blank">
       Lombok
      </a>
      declarations within modules that have Kotlin and Java code. Lombok annotations work only in Java sources and are ignored if you use them in Kotlin code.
     </p>
     <p id="-x81cel_56">
      The plugin supports the following annotations:
     </p>
     <ul class="list _bullet" id="-x81cel_57">
      <li class="list__item" id="-x81cel_66">
       <p id="-x81cel_71">
        <code class="code" id="-x81cel_72">
         @Getter
        </code>
        ,
        <code class="code" id="-x81cel_73">
         @Setter
        </code>
       </p>
      </li>
      <li class="list__item" id="-x81cel_67">
       <p id="-x81cel_74">
        <code class="code" id="-x81cel_75">
         @NoArgsConstructor
        </code>
        ,
        <code class="code" id="-x81cel_76">
         @RequiredArgsConstructor
        </code>
        , and
        <code class="code" id="-x81cel_77">
         @AllArgsConstructor
        </code>
       </p>
      </li>
      <li class="list__item" id="-x81cel_68">
       <p id="-x81cel_78">
        <code class="code" id="-x81cel_79">
         @Data
        </code>
       </p>
      </li>
      <li class="list__item" id="-x81cel_69">
       <p id="-x81cel_80">
        <code class="code" id="-x81cel_81">
         @With
        </code>
       </p>
      </li>
      <li class="list__item" id="-x81cel_70">
       <p id="-x81cel_82">
        <code class="code" id="-x81cel_83">
         @Value
        </code>
       </p>
      </li>
     </ul>
     <p id="-x81cel_58">
      We're continuing to work on this plugin. To find out the detailed current state, visit the
      <a data-external="true" href="https://github.com/JetBrains/kotlin/tree/master/plugins/lombok" id="-x81cel_84" rel="noopener noreferrer" style="color: red;" target="_blank">
       Lombok compiler plugin's README
      </a>
      .
     </p>
     <p id="-x81cel_59">
      Currently, we don't have plans to support the
      <code class="code" id="-x81cel_85">
       @Builder
      </code>
      annotation. However, we can consider this if you vote for
      <a data-external="true" href="https://youtrack.jetbrains.com/issue/KT-46959" id="-x81cel_86" rel="noopener noreferrer" style="color: red;" target="_blank">
       <code class="code" id="-x81cel_87">
        @Builder
       </code>
       in YouTrack
      </a>
      .
     </p>
     <p id="-x81cel_60">
      <a data-tooltip="Apply the kotlin-plugin-lombok Gradle plugin in the build.gradle(.kts) file:" href="lombok.html#gradle" id="-x81cel_88" style="color: blue;">
       Learn how to configure the Lombok compiler plugin
      </a>
      .
     </p>
    </section>
   </section>
   <section class="chapter">
    <h2 data-toc="kotlin-native" id="kotlin-native">
     Kotlin/Native
    </h2>
    <p id="-x81cel_89">
     Kotlin/Native 1.5.20 offers a preview of the new feature and the tooling improvements:
    </p>
    <ul class="list _bullet" id="-x81cel_90">
     <li class="list__item" id="-x81cel_94">
      <p id="-x81cel_97">
       <a data-tooltip="The ability to export KDoc comments to generated Objective-C headers is Experimental. It may be dropped or changed at any time. Opt-in is required (see the details below), and you should use it only for evaluation purposes. We would appreciate your feedback on it in YouTrack." href="#opt-in-export-of-kdoc-comments-to-generated-objective-c-headers" id="-x81cel_98" style="color: blue;">
        Opt-in export of KDoc comments to generated Objective-C headers
       </a>
      </p>
     </li>
     <li class="list__item" id="-x81cel_95">
      <p id="-x81cel_99">
       <a data-tooltip="The Kotlin/Native compiler has received multiple bug fixes in 1.5.20. You can find the complete list in the changelog." href="#compiler-bug-fixes" id="-x81cel_100" style="color: blue;">
        Compiler bug fixes
       </a>
      </p>
     </li>
     <li class="list__item" id="-x81cel_96">
      <p id="-x81cel_101">
       <a data-tooltip="We've improved the way Array.copyInto() works when its source and destination are the same array. Now such operations finish up to 20 times faster (depending on the number of objects being copied) due to memory management optimizations for this use case." href="#improved-performance-of-array-copyinto-inside-one-array" id="-x81cel_102" style="color: blue;">
        Improved performance of Array.copyInto() inside one array
       </a>
      </p>
     </li>
    </ul>
    <section class="chapter">
     <h3 data-toc="opt-in-export-of-kdoc-comments-to-generated-objective-c-headers" id="opt-in-export-of-kdoc-comments-to-generated-objective-c-headers">
      Opt-in export of KDoc comments to generated Objective-C headers
     </h3>
     <aside class="prompt" data-title="" data-type="warning" id="-x81cel_103">
      <p id="-x81cel_113">
       The ability to export KDoc comments to generated Objective-C headers is
       <a data-tooltip="The Kotlin language and toolset are divided into many components such as the compilers for the JVM, JS and Native targets, the Standard Library, various accompanying tools and so on. Many of these components were officially released as Stable, which means that they were evolved in a…" href="components-stability.html" id="-x81cel_114" style="color: blue;">
        Experimental
       </a>
       . It may be dropped or changed at any time. Opt-in is required (see the details below), and you should use it only for evaluation purposes. We would appreciate your feedback on it in
       <a data-external="true" href="https://youtrack.jetbrains.com/issue/KT-38600" id="-x81cel_115" rel="noopener noreferrer" style="color: red;" target="_blank">
        YouTrack
       </a>
       .
      </p>
     </aside>
     <p id="-x81cel_104">
      You can now set the Kotlin/Native compiler to export the
      <a data-tooltip="The language used to document Kotlin code (the equivalent of Java's Javadoc) is called KDoc. In essence, KDoc combines Javadoc's syntax for block tags (extended to support Kotlin's specific constructs) and Markdown for inline markup." href="kotlin-doc.html" id="-x81cel_116" style="color: blue;">
       documentation comments (KDoc)
      </a>
      from Kotlin code to the Objective-C frameworks generated from it, making them visible to the frameworks' consumers.
     </p>
     <p id="-x81cel_105">
      For example, the following Kotlin code with KDoc:
     </p>
     <div class="code-block" data-lang="kotlin" style="font-family: monospace; background: #f4f4f4; padding: 10px; overflow-x: auto; margin: 1em 0; display: block;">
      /**
 * Prints the sum of the arguments.
 * Properly handles the case when the sum doesn't fit in 32-bit integer.
 */
fun printSum(a: Int, b: Int) = println(a.toLong() + b)
     </div>
     <p id="-x81cel_107">
      produces the following Objective-C headers:
     </p>
     <div class="code-block" data-lang="objectivec" style="font-family: monospace; background: #f4f4f4; padding: 10px; overflow-x: auto; margin: 1em 0; display: block;">
      /**
 * Prints the sum of the arguments.
 * Properly handles the case when the sum doesn't fit in 32-bit integer.
 */
+ (void)printSumA:(int32_t)a b:(int32_t)b __attribute__((swift_name("printSum(a:b:)")));
     </div>
     <p id="-x81cel_109">
      This also works well with Swift.
     </p>
     <p id="-x81cel_110">
      To try out this ability to export KDoc comments to Objective-C headers, use the
      <code class="code" id="-x81cel_117">
       -Xexport-kdoc
      </code>
      compiler option. Add the following lines to
      <code class="code" id="-x81cel_118">
       build.gradle(.kts)
      </code>
      of the Gradle projects you want to export comments from:
     </p>
     <div class="tabs" data-anchors="[-x81cel_119,-x81cel_120]" data-group="build-script" id="-x81cel_111">
      <div class="tabs__content" data-gtm="tab" data-sync-tabs="kotlin" data-title="Kotlin" id="-x81cel_119">
       <div class="code-block" data-lang="kotlin" data-title="Kotlin" style="font-family: monospace; background: #f4f4f4; padding: 10px; overflow-x: auto; margin: 1em 0; display: block;">
        kotlin {
    targets.withType&lt;org.jetbrains.kotlin.gradle.plugin.mpp.KotlinNativeTarget&gt; {
        compilations.get("main").kotlinOptions.freeCompilerArgs += "-Xexport-kdoc"
    }
}
       </div>
      </div>
      <div class="tabs__content" data-gtm="tab" data-sync-tabs="groovy" data-title="Groovy" id="-x81cel_120">
       <div class="code-block" data-lang="groovy" data-title="Groovy" style="font-family: monospace; background: #f4f4f4; padding: 10px; overflow-x: auto; margin: 1em 0; display: block;">
        kotlin {
    targets.withType(org.jetbrains.kotlin.gradle.plugin.mpp.KotlinNativeTarget) {
        compilations.get("main").kotlinOptions.freeCompilerArgs += "-Xexport-kdoc"
    }
}
       </div>
      </div>
     </div>
     <p id="-x81cel_112">
      We would be very grateful if you would share your feedback with us using this
      <a data-external="true" href="https://youtrack.jetbrains.com/issue/KT-38600" id="-x81cel_123" rel="noopener noreferrer" style="color: red;" target="_blank">
       YouTrack ticket
      </a>
      .
     </p>
    </section>
    <section class="chapter">
     <h3 data-toc="compiler-bug-fixes" id="compiler-bug-fixes">
      Compiler bug fixes
     </h3>
     <p id="-x81cel_124">
      The Kotlin/Native compiler has received multiple bug fixes in 1.5.20. You can find the complete list in the
      <a data-external="true" href="https://github.com/JetBrains/kotlin/releases/tag/v1.5.20" id="-x81cel_126" rel="noopener noreferrer" style="color: red;" target="_blank">
       changelog
      </a>
      .
     </p>
     <p id="-x81cel_125">
      There is an important bug fix that affects compatibility: in previous versions, string constants that contained incorrect UTF
      <a data-external="true" href="https://en.wikipedia.org/wiki/Universal_Character_Set_characters#Surrogates" id="-x81cel_127" rel="noopener noreferrer" style="color: red;" target="_blank">
       surrogate pairs
      </a>
      were losing their values during compilation. Now such values are preserved. Application developers can safely update to 1.5.20 – nothing will break. However, libraries compiled with 1.5.20 are incompatible with earlier compiler versions. See
      <a data-external="true" href="https://youtrack.jetbrains.com/issue/KT-33175" id="-x81cel_128" rel="noopener noreferrer" style="color: red;" target="_blank">
       this YouTrack issue
      </a>
      for details.
     </p>
    </section>
    <section class="chapter">
     <h3 data-toc="improved-performance-of-array-copyinto-inside-one-array" id="improved-performance-of-array-copyinto-inside-one-array">
      Improved performance of Array.copyInto() inside one array
     </h3>
     <p id="-x81cel_129">
      We've improved the way
      <code class="code" id="-x81cel_130">
       Array.copyInto()
      </code>
      works when its source and destination are the same array. Now such operations finish up to 20 times faster (depending on the number of objects being copied) due to memory management optimizations for this use case.
     </p>
    </section>
   </section>
   <section class="chapter">
    <h2 data-toc="kotlin-js" id="kotlin-js">
     Kotlin/JS
    </h2>
    <p id="-x81cel_131">
     With 1.5.20, we're publishing a guide that will help you migrate your projects to the new
     <a data-tooltip="The Kotlin/JS IR compiler backend is the main focus of innovation around Kotlin/JS, and paves the way forward for the technology." href="js-ir-compiler.html" id="-x81cel_133" style="color: blue;">
      IR-based backend
     </a>
     for Kotlin/JS.
    </p>
    <section class="chapter">
     <h3 data-toc="migration-guide-for-the-js-ir-backend" id="migration-guide-for-the-js-ir-backend">
      Migration guide for the JS IR backend
     </h3>
     <p id="-x81cel_134">
      The new
      <a data-tooltip="We replaced the old Kotlin/JS compiler with the IR-based compiler in order to unify Kotlin's behavior on all platforms and to make it possible to implement new JS-specific optimizations, among other reasons. You can learn more about the internal differences between the two compilers…" href="js-ir-migration.html" id="-x81cel_135" style="color: blue;">
       migration guide for the JS IR backend
      </a>
      identifies issues you may encounter during migration and provides solutions for them. If you find any issues that aren't covered in the guide, please report them to our
      <a data-external="true" href="http://kotl.in/issue" id="-x81cel_136" rel="noopener noreferrer" style="color: red;" target="_blank">
       issue tracker
      </a>
      .
     </p>
    </section>
   </section>
   <section class="chapter">
    <h2 data-toc="gradle" id="gradle">
     Gradle
    </h2>
    <p id="-x81cel_137">
     Kotlin 1.5.20 introduces the following features that can improve the Gradle experience:
    </p>
    <ul class="list _bullet" id="-x81cel_138">
     <li class="list__item" id="-x81cel_141">
      <p id="-x81cel_143">
       <a data-tooltip="Caching for annotation processors' classloaders in kapt is Experimental. It may be dropped or changed at any time. Use it only for evaluation purposes. We would appreciate your feedback on it in YouTrack." href="#caching-for-annotation-processors-classloaders-in-kapt" id="-x81cel_144" style="color: blue;">
        Caching for annotation processors classloaders in kapt
       </a>
      </p>
     </li>
     <li class="list__item" id="-x81cel_142">
      <p id="-x81cel_145">
       <a data-tooltip="With this release, Kotlin parallel compilation is controlled by the Gradle parallel execution flag --parallel. Using this flag, Gradle executes tasks concurrently, increasing the speed of compiling tasks and utilizing the resources more efficiently." href="#deprecation-of-the-kotlin-parallel-tasks-in-project-build-property" id="-x81cel_146" style="color: blue;">
        Deprecation of the
        <code class="code" id="-x81cel_147">
         kotlin.parallel.tasks.in.project
        </code>
        build property
       </a>
      </p>
     </li>
    </ul>
    <section class="chapter">
     <h3 data-toc="caching-for-annotation-processors-classloaders-in-kapt" id="caching-for-annotation-processors-classloaders-in-kapt">
      Caching for annotation processors' classloaders in kapt
     </h3>
     <aside class="prompt" data-title="" data-type="warning" id="-x81cel_148">
      <p id="-x81cel_153">
       Caching for annotation processors' classloaders in kapt is
       <a data-tooltip="The Kotlin language and toolset are divided into many components such as the compilers for the JVM, JS and Native targets, the Standard Library, various accompanying tools and so on. Many of these components were officially released as Stable, which means that they were evolved in a…" href="components-stability.html" id="-x81cel_154" style="color: blue;">
        Experimental
       </a>
       . It may be dropped or changed at any time. Use it only for evaluation purposes. We would appreciate your feedback on it in
       <a data-external="true" href="https://youtrack.jetbrains.com/issue/KT-28901" id="-x81cel_155" rel="noopener noreferrer" style="color: red;" target="_blank">
        YouTrack
       </a>
       .
      </p>
     </aside>
     <p id="-x81cel_149">
      There is now a new experimental feature that makes it possible to cache the classloaders of annotation processors in
      <a data-tooltip="kapt is in maintenance mode. We are keeping it up-to-date with recent Kotlin and Java releases but have no plans to implement new features. Please use the Kotlin Symbol Processing API (KSP) for annotation processing. See the list of libraries supported by KSP." href="kapt.html" id="-x81cel_156" style="color: blue;">
       kapt
      </a>
      . This feature can increase the speed of kapt for consecutive Gradle runs.
     </p>
     <p id="-x81cel_150">
      To enable this feature, use the following properties in your
      <code class="code" id="-x81cel_157">
       gradle.properties
      </code>
      file:
     </p>
     <div class="code-block" data-lang="none" style="font-family: monospace; background: #f4f4f4; padding: 10px; overflow-x: auto; margin: 1em 0; display: block;">
      # positive value will enable caching
# use the same value as the number of modules that use kapt
kapt.classloaders.cache.size=5

# disable for caching to work
kapt.include.compile.classpath=false
     </div>
     <p id="-x81cel_152">
      Learn more about
      <a data-tooltip="kapt is in maintenance mode. We are keeping it up-to-date with recent Kotlin and Java releases but have no plans to implement new features. Please use the Kotlin Symbol Processing API (KSP) for annotation processing. See the list of libraries supported by KSP." href="kapt.html" id="-x81cel_158" style="color: blue;">
       kapt
      </a>
      .
     </p>
    </section>
    <section class="chapter">
     <h3 data-toc="deprecation-of-the-kotlin-parallel-tasks-in-project-build-property" id="deprecation-of-the-kotlin-parallel-tasks-in-project-build-property">
      Deprecation of the kotlin.parallel.tasks.in.project build property
     </h3>
     <p id="-x81cel_159">
      With this release, Kotlin parallel compilation is controlled by the
      <a data-external="true" href="https://docs.gradle.org/current/userguide/performance.html#parallel_execution" id="-x81cel_161" rel="noopener noreferrer" style="color: red;" target="_blank">
       Gradle parallel execution flag
       <code class="code" id="-x81cel_162">
        --parallel
       </code>
      </a>
      . Using this flag, Gradle executes tasks concurrently, increasing the speed of compiling tasks and utilizing the resources more efficiently.
     </p>
     <p id="-x81cel_160">
      You no longer need to use the
      <code class="code" id="-x81cel_163">
       kotlin.parallel.tasks.in.project
      </code>
      property. This property has been deprecated and will be removed in the next major release.
     </p>
    </section>
   </section>
   <section class="chapter">
    <h2 data-toc="standard-library" id="standard-library">
     Standard library
    </h2>
    <p id="-x81cel_164">
     Kotlin 1.5.20 changes the platform-specific implementations of several functions for working with characters and as a result brings unification across platforms:
    </p>
    <ul class="list _bullet" id="-x81cel_165">
     <li class="list__item" id="-x81cel_168">
      <p id="-x81cel_170">
       <a data-tooltip="Char.digitToInt() returns the numeric value of the decimal digit that the character represents. Before 1.5.20, the function supported all Unicode digit characters only for Kotlin/JVM: implementations on the Native and JS platforms supported only ASCII digits." href="#support-for-all-unicode-digits-in-char-digittoint-in-kotlin-native-and-kotlin-js" id="-x81cel_171" style="color: blue;">
        Support for all Unicode digits in Char.digitToInt() for Kotlin/Native and Kotlin/JS
       </a>
       .
      </p>
     </li>
     <li class="list__item" id="-x81cel_169">
      <p id="-x81cel_172">
       <a data-tooltip="The functions Char.isUpperCase() and Char.isLowerCase() return a boolean value depending on the case of the character. For Kotlin/JVM, the implementation checks both the General_Category and the Other_Uppercase/Other_Lowercase Unicode properties." href="#unification-of-char-islowercase-isuppercase-implementations-across-platforms" id="-x81cel_173" style="color: blue;">
        Unification of Char.isLowerCase()/isUpperCase() implementations across platforms
       </a>
       .
      </p>
     </li>
    </ul>
    <section class="chapter">
     <h3 data-toc="support-for-all-unicode-digits-in-char-digittoint-in-kotlin-native-and-kotlin-js" id="support-for-all-unicode-digits-in-char-digittoint-in-kotlin-native-and-kotlin-js">
      Support for all Unicode digits in Char.digitToInt() in Kotlin/Native and Kotlin/JS
     </h3>
     <p id="-x81cel_174">
      <a data-external="true" href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/digit-to-int.html" id="-x81cel_177" rel="noopener noreferrer" style="color: red;" target="_blank">
       <code class="code" id="-x81cel_178">
        Char.digitToInt()
       </code>
      </a>
      returns the numeric value of the decimal digit that the character represents. Before 1.5.20, the function supported all Unicode digit characters only for Kotlin/JVM: implementations on the Native and JS platforms supported only ASCII digits.
     </p>
     <p id="-x81cel_175">
      From now, both with Kotlin/Native and Kotlin/JS, you can call
      <code class="code" id="-x81cel_179">
       Char.digitToInt()
      </code>
      on any Unicode digit character and get its numeric representation.
     </p>
     <div class="code-block" data-lang="kotlin" data-min-compiler-version="1.5" data-runnable="true" style="font-family: monospace; background: #f4f4f4; padding: 10px; overflow-x: auto; margin: 1em 0; display: block;">
      fun main() {
//sampleStart
    val ten = '\u0661'.digitToInt() + '\u0039'.digitToInt() // ARABIC-INDIC DIGIT ONE + DIGIT NINE
    println(ten)
//sampleEnd
}
     </div>
    </section>
    <section class="chapter">
     <h3 data-toc="unification-of-char-islowercase-isuppercase-implementations-across-platforms" id="unification-of-char-islowercase-isuppercase-implementations-across-platforms">
      Unification of Char.isLowerCase()/isUpperCase() implementations across platforms
     </h3>
     <p id="-x81cel_180">
      The functions
      <a data-external="true" href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/is-upper-case.html" id="-x81cel_183" rel="noopener noreferrer" style="color: red;" target="_blank">
       <code class="code" id="-x81cel_189">
        Char.isUpperCase()
       </code>
      </a>
      and
      <a data-external="true" href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/is-lower-case.html" id="-x81cel_184" rel="noopener noreferrer" style="color: red;" target="_blank">
       <code class="code" id="-x81cel_190">
        Char.isLowerCase()
       </code>
      </a>
      return a boolean value depending on the case of the character. For Kotlin/JVM, the implementation checks both the
      <code class="code" id="-x81cel_185">
       General_Category
      </code>
      and the
      <code class="code" id="-x81cel_186">
       Other_Uppercase
      </code>
      /
      <code class="code" id="-x81cel_187">
       Other_Lowercase
      </code>
      <a data-external="true" href="https://en.wikipedia.org/wiki/Unicode_character_property" id="-x81cel_188" rel="noopener noreferrer" style="color: red;" target="_blank">
       Unicode properties
      </a>
      .
     </p>
     <p id="-x81cel_181">
      Prior to 1.5.20, implementations for other platforms worked differently and considered only the general category. In 1.5.20, implementations are unified across platforms and use both properties to determine the character case:
     </p>
     <div class="code-block" data-lang="kotlin" data-min-compiler-version="1.5" data-runnable="true" style="font-family: monospace; background: #f4f4f4; padding: 10px; overflow-x: auto; margin: 1em 0; display: block;">
      fun main() {
//sampleStart
    val latinCapitalA = 'A' // has "Lu" general category
    val circledLatinCapitalA = 'Ⓐ' // has "Other_Uppercase" property
    println(latinCapitalA.isUpperCase() &amp;&amp; circledLatinCapitalA.isUpperCase())
//sampleEnd
}
     </div>
    </section>
   </section>
   <div class="last-modified">
    19 April 2025
   </div>
   <div data-feedback-placeholder="true">
   </div>
  </article>
 </body>
</html>

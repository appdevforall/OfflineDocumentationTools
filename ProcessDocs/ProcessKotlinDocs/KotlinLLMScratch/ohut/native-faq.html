<html>
 <head>
  <meta charset="utf-8"/>
  <title>
   Kotlin Documentation
  </title>
  <link href="style.css" rel="stylesheet"/>
 </head>
 <body>
  <div style="text-align: center; margin-bottom: 1em;">
   <a href="toc.html" style="font-size: 24px; text-decoration: none;">
    Menu
   </a>
  </div>
  <article class="article" data-shortcut-switcher="inactive">
   <h1 data-toc="native-faq" id="native-faq.md">
    Kotlin/Native FAQ
   </h1>
   <section class="chapter">
    <h2 data-toc="how-do-i-run-my-program" id="how-do-i-run-my-program">
     How do I run my program?
    </h2>
    <p id="xj9x9i_12">
     Define a top-level function
     <code class="code" id="xj9x9i_13">
      fun main(args: Array&lt;String&gt;)
     </code>
     or just
     <code class="code" id="xj9x9i_14">
      fun main()
     </code>
     if you are not interested in passed arguments, please ensure it's not in a package. Also, compiler switch
     <code class="code" id="xj9x9i_15">
      -entry
     </code>
     could be used to make any function taking
     <code class="code" id="xj9x9i_16">
      Array&lt;String&gt;
     </code>
     or no arguments and return
     <code class="code" id="xj9x9i_17">
      Unit
     </code>
     as an entry point.
    </p>
   </section>
   <section class="chapter">
    <h2 data-toc="what-is-kotlin-native-memory-management-model" id="what-is-kotlin-native-memory-management-model">
     What is Kotlin/Native memory management model?
    </h2>
    <p id="xj9x9i_18">
     Kotlin/Native uses an automated memory management scheme that is similar to what Java or Swift provide.
    </p>
    <p id="xj9x9i_19">
     <a data-tooltip="Kotlin/Native uses a modern memory manager that is similar to the JVM, Go, and other mainstream technologies, including the following features:" href="native-memory-manager.html" id="xj9x9i_20" style="color: blue;">
      Learn about the Kotlin/Native memory manager
     </a>
    </p>
   </section>
   <section class="chapter">
    <h2 data-toc="how-do-i-create-a-shared-library" id="how-do-i-create-a-shared-library">
     How do I create a shared library?
    </h2>
    <p id="xj9x9i_21">
     Use the
     <code class="code" id="xj9x9i_25">
      -produce dynamic
     </code>
     compiler option or
     <code class="code" id="xj9x9i_26">
      binaries.sharedLib()
     </code>
     in your Gradle build file:
    </p>
    <div class="code-block" data-lang="kotlin" style="font-family: monospace; background: #f4f4f4; padding: 10px; overflow-x: auto; margin: 1em 0; display: block;">
     kotlin {
    iosArm64("mylib") {
        binaries.sharedLib()
    }
}
    </div>
    <p id="xj9x9i_23">
     It produces a platform-specific shared object (
     <code class="code" id="xj9x9i_27">
      .so
     </code>
     on Linux,
     <code class="code" id="xj9x9i_28">
      .dylib
     </code>
     on macOS, and
     <code class="code" id="xj9x9i_29">
      .dll
     </code>
     on Windows targets) and a C language header, allowing the use of all public APIs available in your Kotlin/Native program from C/C++ code.
    </p>
    <p id="xj9x9i_24">
     <a data-tooltip="You can create dynamic libraries to use Kotlin code from existing programs. This enables code sharing across many platforms or languages, including JVM, Python, Android, and others." href="native-dynamic-libraries.html" id="xj9x9i_30" style="color: blue;">
      Complete the Kotlin/Native as a dynamic library tutorial
     </a>
    </p>
   </section>
   <section class="chapter">
    <h2 data-toc="how-do-i-create-a-static-library-or-an-object-file" id="how-do-i-create-a-static-library-or-an-object-file">
     How do I create a static library or an object file?
    </h2>
    <p id="xj9x9i_31">
     Use the
     <code class="code" id="xj9x9i_34">
      -produce static
     </code>
     compiler option or
     <code class="code" id="xj9x9i_35">
      binaries.staticLib()
     </code>
     in your Gradle build file:
    </p>
    <div class="code-block" data-lang="kotlin" style="font-family: monospace; background: #f4f4f4; padding: 10px; overflow-x: auto; margin: 1em 0; display: block;">
     kotlin {
    iosArm64("mylib") {
        binaries.staticLib()
    }
}
    </div>
    <p id="xj9x9i_33">
     It produces a platform-specific static object (
     <code class="code" id="xj9x9i_36">
      .a
     </code>
     library format) and a C language header, allowing you to use all the public APIs available in your Kotlin/Native program from C/C++ code.
    </p>
   </section>
   <section class="chapter">
    <h2 data-toc="how-do-i-run-kotlin-native-behind-a-corporate-proxy" id="how-do-i-run-kotlin-native-behind-a-corporate-proxy">
     How do I run Kotlin/Native behind a corporate proxy?
    </h2>
    <p id="xj9x9i_37">
     As Kotlin/Native needs to download a platform specific toolchain, you need to specify
     <code class="code" id="xj9x9i_38">
      -Dhttp.proxyHost=xxx -Dhttp.proxyPort=xxx
     </code>
     as the compiler's or
     <code class="code" id="xj9x9i_39">
      gradlew
     </code>
     arguments, or set it via the
     <code class="code" id="xj9x9i_40">
      JAVA_OPTS
     </code>
     environment variable.
    </p>
   </section>
   <section class="chapter">
    <h2 data-toc="how-do-i-specify-a-custom-objective-c-prefix-name-for-my-kotlin-framework" id="how-do-i-specify-a-custom-objective-c-prefix-name-for-my-kotlin-framework">
     How do I specify a custom Objective-C prefix/name for my Kotlin framework?
    </h2>
    <p id="xj9x9i_41">
     Use the
     <code class="code" id="xj9x9i_43">
      -module-name
     </code>
     compiler option or matching Gradle DSL statement.
    </p>
    <div class="tabs" data-anchors="[xj9x9i_44,xj9x9i_45]" data-group="build-script" id="xj9x9i_42">
     <div class="tabs__content" data-gtm="tab" data-sync-tabs="kotlin" data-title="Kotlin" id="xj9x9i_44">
      <div class="code-block" data-lang="kotlin" data-title="Kotlin" style="font-family: monospace; background: #f4f4f4; padding: 10px; overflow-x: auto; margin: 1em 0; display: block;">
       kotlin {
    iosArm64("myapp") {
        binaries.framework {
            freeCompilerArgs += listOf("-module-name", "TheName")
        }
    }
}
      </div>
     </div>
     <div class="tabs__content" data-gtm="tab" data-sync-tabs="groovy" data-title="Groovy" id="xj9x9i_45">
      <div class="code-block" data-lang="groovy" data-title="Groovy" style="font-family: monospace; background: #f4f4f4; padding: 10px; overflow-x: auto; margin: 1em 0; display: block;">
       kotlin {
    iosArm64("myapp") {
        binaries.framework {
            freeCompilerArgs += ["-module-name", "TheName"]
        }
    }
}
      </div>
     </div>
    </div>
   </section>
   <section class="chapter">
    <h2 data-toc="how-do-i-rename-the-ios-framework" id="how-do-i-rename-the-ios-framework">
     How do I rename the iOS framework?
    </h2>
    <p id="xj9x9i_48">
     The default name is for an iOS framework is
     <code class="code" id="xj9x9i_50">
      &lt;project name&gt;.framework
     </code>
     . To set a custom name, use the
     <code class="code" id="xj9x9i_51">
      baseName
     </code>
     option. This will also set the module name.
    </p>
    <div class="code-block" data-lang="kotlin" style="font-family: monospace; background: #f4f4f4; padding: 10px; overflow-x: auto; margin: 1em 0; display: block;">
     kotlin {
    iosArm64("myapp") {
       binaries {
          framework {
              baseName = "TheName"
          }
       }
    }
}
    </div>
   </section>
   <section class="chapter">
    <h2 data-toc="how-do-i-enable-bitcode-for-my-kotlin-framework" id="how-do-i-enable-bitcode-for-my-kotlin-framework">
     How do I enable bitcode for my Kotlin framework?
    </h2>
    <p id="xj9x9i_52">
     Bitcode embedding was deprecated in Xcode 14 and removed in Xcode 15 for all Apple targets. The Kotlin/Native compiler does not support bitcode embedding since Kotlin 2.0.20.
    </p>
    <p id="xj9x9i_53">
     If you're using earlier versions of Xcode but want to upgrade to Kotlin 2.0.20 or later versions, disable bitcode embedding in your Xcode projects.
    </p>
   </section>
   <section class="chapter">
    <h2 data-toc="how-do-i-reference-objects-safely-from-different-coroutines" id="how-do-i-reference-objects-safely-from-different-coroutines">
     How do I reference objects safely from different coroutines?
    </h2>
    <p id="xj9x9i_54">
     To safely access or update an object across multiple coroutines in Kotlin/Native, consider using concurrency-safe constructs, such as
     <code class="code" id="xj9x9i_58">
      @Volatile
     </code>
     and
     <code class="code" id="xj9x9i_59">
      AtomicReference
     </code>
     .
    </p>
    <p id="xj9x9i_55">
     Use
     <a data-external="true" href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin.concurrent/-volatile/" id="xj9x9i_60" rel="noopener noreferrer" style="color: red;" target="_blank">
      <code class="code" id="xj9x9i_62">
       @Volatile
      </code>
     </a>
     to annotate a
     <code class="code" id="xj9x9i_61">
      var
     </code>
     property. This makes all reads and writes to the property's backing field atomic. In addition, writes become immediately visible to other threads. When another thread accesses this property, it observes not only the updated value but also the changes that happened before the update.
    </p>
    <p id="xj9x9i_56">
     Alternatively, use
     <a data-external="true" href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin.concurrent.atomics/-atomic-reference/" id="xj9x9i_63" rel="noopener noreferrer" style="color: red;" target="_blank">
      AtomicReference
     </a>
     , which supports atomic reads and updates. On Kotlin/Native, it wraps a volatile variable and performs atomic operations. Kotlin also provides a set of types for atomic operations tailored to specific data types. You can use
     <code class="code" id="xj9x9i_64">
      AtomicInt
     </code>
     ,
     <code class="code" id="xj9x9i_65">
      AtomicLong
     </code>
     ,
     <code class="code" id="xj9x9i_66">
      AtomicBoolean
     </code>
     ,
     <code class="code" id="xj9x9i_67">
      AtomicArray
     </code>
     , as well as
     <code class="code" id="xj9x9i_68">
      AtomicIntArray
     </code>
     and
     <code class="code" id="xj9x9i_69">
      AtomicLongArray
     </code>
     .
    </p>
    <p id="xj9x9i_57">
     For more information about access to shared mutable state, see the
     <span id="xj9x9i_70">
      Coroutines documentation
     </span>
     .
    </p>
   </section>
   <section class="chapter">
    <h2 data-toc="how-can-i-compile-my-project-with-unreleased-versions-of-kotlin-native" id="how-can-i-compile-my-project-with-unreleased-versions-of-kotlin-native">
     How can I compile my project with unreleased versions of Kotlin/Native?
    </h2>
    <p id="xj9x9i_71">
     First, please consider trying
     <a data-tooltip="You can participate in the Kotlin Early Access Preview (EAP) to try out the latest Kotlin features before they are released." href="eap.html" id="xj9x9i_73" style="color: blue;">
      preview versions
     </a>
     .
    </p>
    <p id="xj9x9i_72">
     In case you need an even more recent development version, you can build Kotlin/Native from source code: clone
     <a data-external="true" href="https://github.com/JetBrains/kotlin" id="xj9x9i_74" rel="noopener noreferrer" style="color: red;" target="_blank">
      Kotlin repository
     </a>
     and follow
     <a data-external="true" href="https://github.com/JetBrains/kotlin/blob/master/kotlin-native/README.md#building-from-source" id="xj9x9i_75" rel="noopener noreferrer" style="color: red;" target="_blank">
      these steps
     </a>
     .
    </p>
   </section>
   <div class="last-modified">
    19 April 2025
   </div>
   <div data-feedback-placeholder="true">
   </div>
  </article>
 </body>
</html>
